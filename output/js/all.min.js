var Event=function(){"use strict";function t(){this.listenerMap={}}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,o=function(t,o){for(var i in o)o.hasOwnProperty(i)&&e(t,i,n(o,i));return t},i={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.$on=function(t,e){var n=this.listenerMap[t]||[];n.push(e),this.listenerMap[t]=n},i.$emit=function(t){var e=this.listenerMap[t]||[],n=Array.prototype.slice.call(arguments,1);$.each(e,function(t,e){e.apply(this,n)}.bind(this))},o(t.prototype,i),i=void 0,t}(),ComponentEvent=function(t){"use strict";function e(){null!==t&&t.apply(this,arguments)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t),null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1});var l={};return l.triggerComplete=function(t,e,n){t.$emit("componentComplete",{ref:e,component:n})},l.getComponent=function(t,e,n){var o=e.attr("ref")||n;return t[o]},l.remove=function(){this.element&&this.element.remove(),this.scope&&this.scope.$destroy(),this.scope=this.element=this.attrs=this.transclude=null},r(e.prototype,l),l=void 0,e}(Event);angular.module("admin.filter",[]),angular.module("admin.service",[]),angular.module("admin.service").provider("Ajax",function(){var t,e,n={setSuccessHandler:function(e){t=e},setFailHandler:function(t){e=t},$get:function(n,o,i){var r=new i("Ajax"),a=function(o,i,a){var s=n.defer();return $.ajax({url:i,cache:!1,data:a,type:o,dataType:"json",success:function(n){var o=t(n),i=e(n);void 0!==o&&null!==o?s.resolve(o):s.reject(i)},error:function(t,e){var n={403:"没有权限",404:"请求的地址不存在",500:"服务器出现了问题,请稍后重试"}[e];r.error(n||"服务器出现了问题,请稍后重试")}}),s.promise};return{get:function(t,e){return a("GET",t,e)},post:function(t,e){return a("POST",t,e)},message:function(t,e,n,o){return this.post(t,e).then(function(){return r.success(n)})["catch"](function(){return r.error(o)})},add:function(t,e){return this.message(t,e,"添加数据成功","添加数据失败")},update:function(t,e){return this.message(t,e,"更新数据成功","更新数据失败")},remove:function(t,e,n){var i=this;return n=n||{},o.confirm("您确认删除该"+(n.label||"数据")+"吗?").then(function(){return i[n.method?n.method:"get"](t,e,n)})},load:function(t){var e=$("<div/>").hide().appendTo(document.body),o=n.defer();return e.load(t,function(t){e.remove(),o.resolve(t)}),o.promise},getScript:function(t){return $.ajax({url:t,dataType:"script",cache:!0})}}}};return n});var c=window.console,Logger=function(){"use strict";function t(t){this.className=t}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,o=function(t,o){for(var i in o)o.hasOwnProperty(i)&&e(t,i,n(o,i));return t},i={},r={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),r.debug=function(e){t.debug(""+this.className+(" : "+e))},r.info=function(e){t.info(""+this.className+(" : "+e))},r.error=function(e){t.error(""+this.className+(" : "+e))},i.debug=function(t){c&&(c.debug?c.debug(t):c.log(t))},i.info=function(t){c&&(c.info?c.info(t):c.log(t))},i.error=function(t){c&&(c.error?c.error(t):c.log(t))},o(t,i),o(t.prototype,r),i=r=void 0,t}();angular.module("admin.service").factory("Logger",function(){return Logger});var PRS$0=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,e){for(var n in e)e.hasOwnProperty(n)&&DP$0(t,n,GOPD$0(e,n));return t};window.toastr?toastr.options={closeButton:!0,debug:!1,positionClass:"toast-top-center",showDuration:"1000",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}:console.error("需要 toastr库 支持, 请导入...");var Message=function(){"use strict";function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}(),MessageProvider=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.setPostion=function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},e.$get=function(){return Message},MIXIN$0(t.prototype,e),e=void 0,t}();angular.module("admin.service").provider("msg",MessageProvider).provider("Message",function(){var t={setPosition:function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},$get:function(){var t=function(){function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}();return t}};return t}),angular.module("admin.service").factory("PaginationFactory",function(t){var e=function(t,e,n,o,i,r){this.url=t,this.pageIndex=parseInt(e||0),this.pageSize=parseInt(n||10),this.maxPage=0,this.pageLimit=parseInt(o||10),this.dataName=i||"data",this.totalName=r||"total",Event.call(this)};return e.prototype={load:function(){var e=this;return t.post(this.url,{pageIndex:this.pageIndex,pageSize:this.pageSize}).then(function(t){return e.analyze(t)})},analyze:function(t){var e,n,o,i=t[this.totalName],r=[];this.maxPage=Math.ceil(i/this.pageSize),e=this.maxPage-(this.pageIndex+this.pageLimit),e>=0?(n=this.pageIndex,o=n+this.pageLimit):(n=this.pageIndex-Math.abs(e),n=0>n?0:n,o=this.pageIndex+(this.pageLimit-Math.abs(e)));for(var a=n;o>a;a++)r.push({index:a+1,current:a==this.pageIndex});return $.extend(t,{dataList:t[this.dataName],pageList:r,isFirst:0==this.pageIndex,isLast:this.pageIndex==this.maxPage-1})},prePage:function(){return this.pageIndex--,this.pageIndex=this.pageIndex<0?0:this.pageIndex,this.getPage(this.pageIndex)},nextPage:function(){return this.pageIndex++,this.pageIndex=this.pageIndex>this.maxPage-1?this.maxPage-1:this.pageIndex,this.getPage(this.pageIndex)},firstPage:function(){return this.getPage(0)},lastPage:function(){return this.getPage(this.maxPage)},getPage:function(t){return this.pageIndex=t,this.load()}},e}),function(){var t={type:"keydown",propagate:!1,inputDisabled:!1,keyCode:!1},e={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},n={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},o=function(){"use strict";function o(t,e){this.window=t,this.timeout=e,this.keyboardEvent={}}var i=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s={};return i(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.bind=function(e,n,o){o=$.extend({},t,o),e=e.toLowerCase();var i=o&&o.target?o.target:document;this.keyboardEvent[e]={callback:this.handler,target:i,event:o.type,opt:o},$(i).bind(o.type,this.handler.bind(this,n,e))},s.unbind=function(t){t=t.toLowerCase();var e=this.keyboardEvent[t];if(delete this.keyboardEvent[t],e){var n=e.event,o=e.target,i=e.callback;$(o).unbind(n,i)}},s.handler=function(t,o,i){var r=this.keyboardEvent[o],a=i.keyCode;if(r.inputDisabled){var s=i.target;if("INPUT"==s.tagName||"TEXTAREA"==s.tagName)return}var l=String.fromCharCode(i.keyCode).toLowerCase();188==a&&(l=","),190==a&&(l=".");for(var c,u=o.split("+"),p=0,d={shift:{wanted:!1,pressed:i.shiftKey?!0:!1},ctrl:{wanted:!1,pressed:i.ctrlKey?!0:!1},alt:{wanted:!1,pressed:i.altKey?!0:!1},meta:{}},h=0,f=u.length;c=u[h],f>h;h++){switch(c){case"ctrl":case"control":p++,d.ctrl.wanted=!0;break;case"shift":case"alt":case"meta":p++,d[c].wanted=!0}c.length>1?n[c]==a&&p++:r.keyCode?r.keyCode==a&&p++:l==c?p++:e[l]&&i.shiftKey&&(l=e[l],l==c&&p++)}p==u.length&&d.ctrl.pressed==d.ctrl.wanted&&d.shift.pressed==d.shift.wanted&&d.alt.pressed==d.alt.wanted&&d.meta.pressed==d.meta.wanted&&(setTimeout(function(){t(i)},1),r.propagation&&i.stopPropagation())},a(o.prototype,s),s=void 0,o}(),i=new o;angular.module("admin.service").factory("Shortcut",function(){return i})}(),angular.module("admin.service").factory("Util",function($rootScope,$compile,$filter,$parse,$q){return{dateFormatStr:function(t,e){return $filter("date")(t||new Date,e)},dateTimeStr:function(t){return this.dateFormatStr(t,"yyyy-MM-dd HH:mm:ss")},dateStr:function(t,e){return this.dateFormatStr(t,"yyyy-MM-dd")},timeStr:function(t,e){return this.dateFormatStr(t,"HH:mm:ss")},toPromise:function(t,e){var n=$q.defer();return n[e?"reject":"resolve"](t),n.promise},animate:function(t,e,n){n=void 0!==n?n:!0,t.addClass(e+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n&&$(this).removeClass(e+" animated")})},setTag:function(t,e,n){n.$emit("ui.completeInit",t,e)},setValue:function(t,e,n){var o=e.split(".");if(o.length>1){var i=o.splice(o.length-1,o.length).join(""),r=o.join("."),a=$parse(r)(t);a[i]=n}else t[e]=n},getValue:function(t,e){return $parse(e)(t)},toJSON:function(str){return eval("("+str+")")},toScope:function(t,e){return e=e||$rootScope,$.extend(e.$new(),t||{})},format:function(t,e){var n=$compile(t)(e);return n},confirm:function(t){var e=$q.defer();return bootbox.confirm(t,function(t){t?e.resolve():e.reject()}),e.promise},checkValuesUseRules:function(t,e){var n=$("<form></form>"),o=[];$.each(t,function(t,e){var i=$("<input>").attr("name",t).val(e);o.push(i),n.append(i)});var i=n.validate({rules:e,debug:!0,submitHandler:function(){return!1}}),r=null;return $.each(o,function(t,e){return i.check(e)?void 0:(r=e.attr("name"),!1)}),r?i.errorMap[r]:null},checkValueUseRules:function(t,e,n){var o={},i={};return o[t]=e,i[t]=n,this.checkValuesUseRules(o,i)}}}),function(){var t=function(){"use strict";function t(t){this.$parse=t}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,o=function(t,o){for(var i in o)o.hasOwnProperty(i)&&e(t,i,n(o,i));return t},i={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.set=function(t,e,n){var o=this.$parse(e);o.assign(t,n),t.$$phase||t.$apply()},i.get=function(t,e){var n=this.$parse(e);return n(t)},o(t.prototype,i),i=void 0,t}();angular.module("admin.service").service("ValueService",t)}(),angular.module("admin.component",[]),angular.module("admin.component").directive("uiFormItem",function(){var t=function(t){"use strict";function e(e,n,o,i){this.transclude=i,t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this),this.content=this.transclude(this.scope.$parent)},l.render=function(){this.element.find(".ui-form-item-body").append(this.content)},r(e.prototype,l),l=void 0,e}(UIFormItemControl);return{restrict:"E",replace:!0,transclude:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",help:"@"},link:function(e,n,o,i,r){new t(e,n,o,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <div class="ui-form-item-body"></div>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").constant("defaultCol","2:10").directive("uiForm",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{action:"@",onSubmit:"&"},compile:function(){var e=null;return{pre:function(n,o,i,r,a){e=new t(n,o,i,a(n.$parent))},post:function(){e.layout()}}},template:'\n                <div class="form">\n                    <form action="{{action}}" class="form-horizontal form-bordered form-row-stripped">\n                        <div class="form-body">\n                        </div>\n                    </form>\n                </div>\n\n            '}}),angular.module("admin.component").directive("uiFormText",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{lcol:"@",rcol:"@",label:"@",model:"=",css:"@",placeholder:"@",help:"@"},link:function(t,e,n,o,i){t.lcol=void 0!==t.lcol?t.lcol:2,t.rcol=void 0!==t.rcol?t.rcol:10,e.find("p").append(i(t.$parent))},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <p class="form-control-static" ng-bind="model"></p>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),function(){jQuery.validator&&(jQuery.validator.addMethod("url",function(t,e){var n=/^(http|https):\/\//;return this.optional(e)||n.test(t)},"链接地址必须以http://或者https://开头！"),jQuery.validator.addMethod("dateRange",function(t,e,n){var o=moment(t),i=moment($(this.currentForm).find('[name="terminatetime"]').val());return o.isBefore(i)},"时间范围不正确"),jQuery.validator.addMethod("maxlength",function(t,e,n){var o=0;return n&&n>0&&(o=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length<=o},"请输入一个长度最多是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("minlength",function(t,e,n){var o=0;return n&&n>0&&(o=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length>=o},"请输入一个长度最少是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("rangelength",function(t,e,n){var o=0,i=0;n&&n[0]>0&&(o=n[0]),n&&n[1]>0&&(i=n[1]);var r=t.replace(/[^\x00-\xff]/gi,"--").length;return i>=r&&r>=o},"请输入一个长度介于 {0} 和 {1} 之间的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("mobile",function(t,e){var n=t.length,o=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(e)||11==n&&o.test(t)},"手机号码不正确"),jQuery.validator.addMethod("pwdRule",function(t,e){var n=/^(?![0-9]+$)(?![a-z]+$)(?![0-9a-z]+$)(?![\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]+$)[0-9A-Za-z\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]{8,16}$/;return this.optional(e)||n.test(t)},"密码由8-16位字母、数字和特殊字符组成，且至少有一个大写字母或者特殊字符！"))}(jQuery),angular.module("admin.component").directive("uiSearchForm",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{lcol:"@",rcol:"@",onSearch:"&",onReset:"&"},link:function(e,n,o,i,r){new t(e,n,o,r)},template:'\n                <form novalidate action="" class="ui-search-form form-inline">\n                    <div class="row">\n                        <div class="col-md-{{lcol}}"></div>\n                        <div class="text-right col-md-{{rcol}}">\n                            <a title="回车键也可触发搜索" class="btn blue-chambray btn-sm" ng-click="component.search()" style="width: 30px"><i class="fa fa-search"></i></button>\n                            <a title="重置搜索选项" class="btn default btn-sm" ng-click="component.reset()" style="width: 30px"><i class="fa fa-undo font-blue-chambray"></i></a>\n                        </div>\n                    </div>\n                </form>\n            '}});var UIFormItemControl=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.isSearchControl=e.hasClass("ui-search-item"),this.formPrefix=this.isSearchControl?"$search":"$form",this.formResetEventName=this.isSearchControl?"uisearchform.reset":"uiform.reset",this.logger=new Logger(this.formPrefix+this.className),this.init(),this.initEvents(),this.cleanElement(),this.render()}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){this.message=new Message("UI"+(this.formPrefix+this.className)),this.scope.lcol=void 0!==this.scope.lcol?this.scope.lcol:2,this.scope.rcol=void 0!==this.scope.rcol?this.scope.rcol:10,this.triggerComplete(this.scope,this.attrs.ref||this.formPrefix+this.className,this)},l.initEvents=function(){var t=this;this.scope.$on(this.formResetEventName,function(){return t.reset()})},l.cleanElement=function(){this.element.removeAttr("name").removeAttr("model").removeAttr("readonly").removeAttr("disabled")},l.attr=function(t,e){return this.formEl?t&&e?(this.formEl.prop(t,e),this):this.formEl.prop(t):void 0},l.val=function(t){return this.formEl?void 0!==t?(this.formEl.val(t),this):this.formEl.val():void 0},l.destroy=function(){delete this.listenerMap,this.reset()},l.change=function(t){this.$on("change",t)},l.render=function(){},l.reset=function(){this.formEl&&this.formEl.val("")},r(e.prototype,l),l=void 0,e}(ComponentEvent);angular.module("admin.component").factory("uiFormControl",function(){return UIFormItemControl}),function(){angular.module("admin.component").factory("UIDateControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Date",this.formEl=n.find("input"),this.dateMode=o.mode?-1!=o.mode.indexOf("date"):!0,this.timeMode=o.mode?-1!=o.mode.indexOf("time"):!0,t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this);var e=[];this.dateMode&&e.push("yyyy-MM-dd"),this.timeMode&&e.push("HH:mm:ss"),this.format=e.join(" ")},l.initEvents=function(){t.prototype.initEvents.call(this)},l.render=function(){this.formEl.datetimepicker({language:"zh-CN",pickDate:this.dateMode,useCurrent:!1,pickTime:this.timeMode,useSeconds:this.timeMode})},r(e.prototype,l),l=void 0,e}(UIFormItemControl);return t})}(),function(){var t={"今天":[moment().startOf("day"),moment().endOf("day")],"昨天":[moment().subtract("days",1).startOf("day"),moment().subtract("days",1).endOf("day")],"最近7天":[moment().subtract("days",6).startOf("day"),moment().endOf("day")],"最近30天":[moment().subtract("days",29).startOf("day"),moment().endOf("day")],"当前月":[moment().startOf("month"),moment().endOf("month")],"上个月":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"最近六个月":[moment().subtract("days",182).startOf("day"),moment().endOf("day")]},e={opens:"right",minDate:moment().subtract("year",40).startOf("year"),maxDate:moment().add("year",10).endOf("year"),showDropdowns:!0,showWeekNumbers:!1,timePickerIncrement:1,timePicker12Hour:!1,buttonClasses:["btn","btn-sm"],applyClass:"green",cancelClass:"default",separator:" - ",locale:{applyLabel:"确定",cancelLabel:"取消",resetLabel:"重置",fromLabel:"从",toLabel:"至",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}};angular.module("admin.component").factory("UIDateRangeControl",function(){var n=function(n){"use strict";function o(t,e,o){this.className="DateRange",this.startDateElement=e.find(".input-group").find("input:first"),this.endDateElement=e.find(".input-group").find("input:last"),this.hasDefaultDateRange=!!o.range,this.isDateTimeMode="date"!==o.mode||void 0!==o.time,this.format=o.format||(this.isDateTimeMode?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"),this.limit=o.limit,n.call(this,t,e,o)}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,a(e,n));return t},l=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;i||s(o,n);var u={};return null!==n&&l(o,n),o.prototype=c(null!==n?n.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),r(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){n.prototype.init.call(this);var o=t[this.attrs.range]||[];this.defaultStartDate=this.attrs.fromValue||o[0],this.defaultEndDate=this.attrs.toValue||o[1],this.config=$.extend({},e,{ranges:t,timePicker:this.isDateTimeMode,format:this.format}),this.limit&&(this.config.dateLimit={days:this.limit}),this.hasDefaultDateRange&&(this.config.startDate=this.defaultStartDate,this.config.endDate=this.defaultEndDate)},u.render=function(){var t=this;this.element.find("div").daterangepicker(this.config,function(e,n){e=e?e.format(t.format):"",n=n?n.format(t.format):"",t.val(e,n),t.scope.change({startVal:e,endVal:n})})},u.reset=function(){this.startDateElement.val(""),this.endDateElement.val("")},u.val=function(t,e){return t&&this.startDateElement.val(t),e&&this.endDateElement.val(e),t||e?this:[this.startDateElement.val(),this.endDateElement.val()]},s(o.prototype,u),u=void 0,o}(UIFormItemControl);return n})}(),function(){angular.module("admin.component").provider("UIEditorControl",function(){var t,e,n={setUrl:function(n,o){t=n,e=o},$get:function(){var n=function(n){function o(t,e,o){this.className="Editor",this.$scriptElement=e.find("script"),n.call(this,t,e,o)}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,a(e,n));return t},l=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;i||s(o,n);var u={};return null!==n&&l(o,n),o.prototype=c(null!==n?n.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),r(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){n.prototype.init.call(this),this.editorId="uiFromEditor"+(new Date).getTime(),this.$scriptElement.attr("id",this.editorId)},u.render=function(){var o=this;n.prototype.render.call(this),window.UE?this._initEditor():$.getScript(t,function(){$.getScript(e,function(){o._initEditor()})})},u.reset=function(){this.editor.setContent("")},u.val=function(t){return void 0!==t?(this.editor.setContent(t),this):this.editor.getContent()},u.getEditor=function(){return this.editor},u._initEditor=function(){var t=this;this.editor=UE.getEditor(this.editorId,{autoHeightEnabled:!0}),this.editor.addListener("contentChange",function(){t._change()})},u._change=function(){var t=this.val();this.scope.model=t,this.scope.change({val:t})},s(o.prototype,u),u=void 0,o}(UIFormItemControl);return n}};return n})}(),function(){angular.module("admin.component").factory("UIFormControl",function(){var t=function(t){"use strict";function e(e,n,o,i){this.className="form",this.formItems=i,this.formControlMap={},this.formElement=n.find("form"),t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){var e=this;t.prototype.init.call(this),this.scope.action&&(this.action=this.scope.action.replace(/#/g,"")),this.scope.$on("componentComplete",function(t,n){e.formControlMap[n.name]=n.component})},l.initEvents=function(){var e=this;t.prototype.initEvents.call(this),this.formElement.submit(function(t){return e._onSubmit(t)})},l.changeValidateRule=function(t,e){var n=this.element.data().validator;if(n){var o=n.settings.rules[t];n.settings.rules[t]=$.extend(o,e)}},l.startValidate=function(){this.element.valid()},l.layout=function(){this.element.find(".form-body").append(this.formItems)},l._onSubmit=function(t){this.attrs.onSubmit&&(this.scope.onSubmit({data:this.formElemnt.serializeArray()}),t.preventDefault())},r(e.prototype,l),l=void 0,e}(UIFormItemControl);return t})}(jQuery),function(){angular.module("admin.component").factory("UIInputControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Input",this.formEl=n.find("input"),t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;return n||r(e,t),null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e}(UIFormItemControl);return t})}(),angular.module("admin.component").factory("uiRegionHelper",function(t,e,n,o){var i,r,a,s=new e("UiRegionHelper"),l=[],c=!1,u=!1,p=""+n+"/assets/js/China_Region_Last.js",d=!1,h=!1,f="086",m=function(e,n,o,i){if(!i||void 0!==e){var r=this,s=t.defer();return this.getTreeData().then(function(){var t=a[e].child;s.resolve(t),o&&r.setHtml(o,t)},function(){s.reject([])}),s.promise}};return{getDataMap:function(){var e=t.defer();return u?e.resolve(i):c?l.push(e):(c=!0,$.getScript(p,function(){e.resolve(i=window.CHINA_REGION),$.each(l,function(t,e){e.resolve(i)}),l=[],u=!0},function(){c=!1,e.reject({})})),e.promise},getDataList:function(e){e=e||"s";var n=t.defer();return this.getTreeData().then(function(){var t=[];$.each(i,function(n,o){var i=!1;switch(e){case"p":i=o[1]==f;break;case"c":var r=a[o[1]];if(r&&r.id==f)i=!0;else if(n==f)i=!0;else{var s=a[r.pid];i=s?s.id==f:!1}break;case"s":i=!0}i&&t.push({id:n,name:o[0],pid:o[1]})}),n.resolve(t),d=!0},function(){n.reject({})}),n.promise},getDatasByMode:function(e){e=e||"s";var n=t.defer();return this.getTreeData().then(function(){var t=[];$.each(a,function(n,o){o.mode==e&&t.push(o)}),n.resolve(t)},function(){n.reject({})}),n.promise},getTreeData:function(){var e=t.defer();return h?e.resolve(r):this.getDataMap().then(function(t){r={"086":{id:f,text:"全国",child:[]}},a={"086":{id:f,text:"全国",child:[]}},$.each(t,function(t,e){var n={id:t,text:e[0],child:[],pid:e[1],mode:null};t!=f&&(a[t]=n),a[e[1]]&&(a[e[1]].child.push(n),e[1]==f?(n.mode="p",r[f].child.push(n)):n.mode=a[e[1]].pid==f?"c":"s")}),e.resolve(r),h=!0},function(){e.reject({})}),e.promise},getHtml:function(t){var e=[];return $.each(t,function(t,n){var o=n.id;e.push('<option value="'+o+'">'+n.text+"</option>")}),e.join("")},setHtml:function(t,e){t.html(this.getHtml(e)).change()},getProvince:function(t){return m.call(this,f,"请选择省",t,!1)},getCity:function(t,e){return m.call(this,t,"请选择市",e,!0)},getStreet:function(t,e){return m.call(this,t,"请选择区",e,!0)},getById:function(e){var n=t.defer();return this.getTreeData().then(function(){n.resolve(a[e])},function(){n.reject({})}),n.promise},htmlById:function(e,n,o,i){var r=this,l=t.defer();return this.getById(e).then(function(t){if(t){var c,u,p,d,h;switch(t.mode){case"p":c=e,r.getProvince(i),r.getCity(c,o),l.resolve([null,null,t]);break;case"c":d=a[t.pid],c=d.id,u=e,r.getProvince(i),r.getCity(d.id,o),r.getStreet(u,n),l.resolve([null,t,d]);break;case"s":h=a[t.pid],d=a[h.pid],c=d.id,u=h.id,p=e,r.getProvince(i),r.getCity(d.id,o),r.getStreet(h.id,n),l.resolve([t,h,d])}setTimeout(function(){c&&i&&i.select2("val",c),u&&o&&o.select2("val",u),p&&n&&n.select2("val",p)},500)}else s.error("当前地址数据有误, 请重新编辑保存"),logger.error("["+e+"]"),r.getProvince(i),l.reject()}),l.promise}}}),function(){angular.module("admin.component").factory("UIRegionControl",function(t){var e=function(e){"use strict";function n(t,n,o){this.className="Region",this.$inputDom=n.find("input:eq(0)"),this.$pDom=n.find('[name="province"]'),this.$cDom=n.find('[name="city"]'),this.$sDom=n.find('[name="area"]'),this.$aDom=n.find('[name="address"]'),this.valueType=o.valueType||"text",e.call(this,t,n,o)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){switch(e.prototype.init.call(this),this.attrs.mode){case"p":this.$cDom.hide(),this.$sDom.hide(),this.$aDom.hide();break;case"c":this.$sDom.hide(),this.$aDom.hide();break;case"s":this.$aDom.hide()}},c.initEvents=function(){var n=this;e.prototype.initEvents.call(this),this.$pDom.change(function(e){e.val?(t.getCity(e.val).then(function(t){n.$cDom.select2(n.toCityData(t)),n.$sDom.select2(n.toStreetData())}),n.$pDom.val(e.added[n.valueType]),n.$inputDom.val(e.val),n._change("p")):n.reset()}),this.$cDom.change(function(e){e.val?(t.getStreet(e.val).then(function(t){n.$sDom.select2(n.toStreetData(t))}),n.$cDom.val(e.added[n.valueType]),n.$inputDom.val(e.val),n._change("c")):(n.$sDom.select2(n.toStreetData()),n.$cDom.val(""),n.$inputDom.val(""))}),this.$sDom.change(function(t){t.val?(n.$sDom.val(t.added[n.valueType]),n.$inputDom.val(t.val),n._change("s")):(n.$sDom.val(""),n.$inputDom.val(""))})},c.render=function(){var n=this;e.prototype.render.call(this),/^\d+$/g.test(this.codeValue)?(t.htmlById(this.codeValue).then(function(e){
return e.concat(t.getProvince())}).then(function(e,o,i,r){if(n.$pDom.select2(n.toProvinceData(r)),e)return n.$pDom.select2("val",e.id),n.$pDom.val(e[self.valueType]),[o,i,t.getCity(e.id)];throw n.$cDom.select2(n.toCityData([])),n.$sDom.select2(n.toStreetData([])),new Error}).then(function(e,o,i){if(n.$cDom.select2(self.toCityData(i)),e)return n.$cDom.select2("val",e.id),n.$cDom.val(e[self.valueType]),[o,t.getStreet(e.id)];throw n.$sDom.select2(n.toStreetData([])),new Error}).then(function(t,e){n.$sDom.select2(self.toStreetData(e)),t&&(self.$sDom.select2("val",t.id),self.$sDom.val(t[self.valueType]))}),this.$inputDom.val(this.codeValue)):t.getProvince().then(function(t){n.$pDom.select2(n.toProvinceData(t)),n.$cDom.select2(n.toCityData([])),n.$sDom.select2(n.toStreetData([]))})},c.toProvinceData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},c.toCityData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},c.toStreetData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},c.reset=function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())},c._change=function(t){this.scope.model=this.$inputDom.val();var e=this.scope.mode,n=this.$pDom.val(),o=this.$cDom.val(),i=this.$sDom.val();this.scope.change({mode:t,val:e,p:n,c:o,s:i})},a(n.prototype,c),c=void 0,n}(UIFormItemControl);return e})}(),angular.module("admin.component").factory("uiRegionService",function(t,e,n){var o=(new e("Region"),function(t,e,o){var i=e.find("input");this.$inputDom=$(i[0]),this.$pDom=$(i[1]),this.$cDom=$(i[2]),this.$sDom=$(i[3]),this.$aDom=$(i[i.length-1]),this.codeValue=o.sValue,this.autoWidth=o.autoWidth,this.mode=o.mode||"s",this.valueType=o.valueType||"text",n.apply(this,arguments)});return o.prototype=$.extend(new n,{_init:function(){var e=this;if(/^\d+$/g.test(this.codeValue)){var n,o,i;t.htmlById(this.codeValue).then(function(e){return n=e[2],o=e[1],i=e[0],t.getProvince()}).then(function(o){return e.$pDom.select2(e.toProvinceData(o)),n?(e.$pDom.select2("val",n.id),e.$pDom.val(n[e.valueType]),t.getCity(n.id)):null}).then(function(n){return n?(e.$cDom.select2(e.toCityData(n)),o?(e.$cDom.select2("val",o.id),e.$cDom.val(o[e.valueType]),t.getStreet(o.id)):null):void 0}).then(function(t){t&&(e.$sDom.select2(e.toStreetData(t)),i&&(e.$sDom.select2("val",i.id),e.$sDom.val(i[e.valueType])))}),this.$inputDom.val(this.codeValue)}else t.getProvince().then(function(t){e.$pDom.select2(e.toProvinceData(t))});this.attrs.aValue&&this.$aDom.val(this.attrs.aValue),this.initMode(),this.initEvent()},initMode:function(){var t=0;switch(this.attrs.mode){case"p":t=120,this.$pDom.select2(this.toProvinceData()),this.$cDom.remove(),this.$sDom.remove();break;case"c":t=240,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.remove();break;default:t=360,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.select2(this.toStreetData())}this.autoWidth&&this.element.width(t+60)},initEvent:function(){var e=this;this.$pDom.change(function(n){n.val?(t.getCity(n.val).then(function(t){e.$cDom.select2(e.toCityData(t)),e.$sDom.select2(e.toStreetData())}),this.$pDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):this.reset()}.bind(this)),this.$cDom.change(function(n){n.val?(t.getStreet(n.val).then(function(t){e.$sDom.select2(e.toStreetData(t))}),this.$cDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):(this.$sDom.select2(this.toStreetData()),this.$cDom.val(""),this.$inputDom.val(""))}.bind(this)),this.$sDom.change(function(t){t.val?(this.$sDom.val(t.added[this.valueType]),this.$inputDom.val(t.val)):(this.$sDom.val(""),this.$inputDom.val(""))}.bind(this))},toProvinceData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},toCityData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},toStreetData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},reset:function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())}}),function(t,e,n,i,r){return new o(t,e,n,i,r)}}),angular.module("admin.component").factory("UISearchFormControl",function(){var t=function(t){"use strict";function e(e,n,o,i){this.content=i(e.$parent),t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){this.attrs.ref=this.attrs.ref||"$searchForm",this.scope.lcol=this.scope.lcol||11,this.scope.rcol=this.scope.rcol||1,t.prototype.init.call(this),this.scope.component=this,this.element.find(".row > div:eq(0)").append(this.content)},l.initEvents=function(){t.prototype.initEvents.call(this)},l.formData=function(){return this.element.serializeArray()},l.formParamData=function(){return this.element.serialize()},l.formJsonData=function(){function t(t){if(t){if(Array.isArray(t))return 0;var e;if(r&&r(t),"object"==typeof t&&"function"==typeof(e=t[i]))return r&&r(void 0),e.call(t);if(r&&r(void 0),t+""=="[object Generator]")return t}throw new Error(t+" is not iterable")}var e,n,o,i="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",r="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__,a=this.formData(),s={};e=t(a),o=0===e,n=o?a.length:void 0;for(var l;o?n>e:!(n=e.next()).done;)l=o?a[e++]:n.value,void 0!==l.value&&(s[l.name]?(s[l.name]=_.isArray(s[l.name])?s[l.name]:[s[l.name]],s[l.name].push(l.value)):s[l.name]=l.value);return e=n=o=void 0,s},l.search=function(){var t=this.formJsonData();this.scope.onSearch({data:t}),this.scope.$parent.$broadcast("uitable.search",t)},l.reset=function(){this.scope.onReset(),this.scope.$parent.$broadcast("uisearchform.reset")},r(e.prototype,l),l=void 0,e}(UIFormItemControl);return t}),function(){angular.module("admin.component").factory("UISelectControl",function(t){var e=function(e){"use strict";function n(t,n,o){this.className="Select",this.formEl=n.find("Select"),e.call(this,t,n,o)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var t=this;e.prototype.init.call(this),this.attrs.multiple&&this.formEl.prop("multiple","multiple"),this.defaultValue=this.scope.value||this.formEl.find("option:eq(0)").val()||"",!this.scope.model&&this.defaultValue&&(this.scope.model=this.defaultValue,this.val(this.defaultValue)),this.attrs.url&&this.load(this.attrs.url),this.scope.labelName=this.scope.labelName||"name",this.scope.valueName=this.scope.valueName||"id",this.dataList=[],this.formEl.find("option").each(function(e,n){var o={};o[t.scope.labelName]=n.innerHTML,o[t.scope.valueName]=n.value,t.dataList.push(o)})},c.initEvents=function(){var t=this;e.prototype.initEvents.call(this),this.scope.$watch("model",function(e){void 0!==e?(t.val(e),t.scope.change()):t.val(t.defaultValue)}),this.formEl.change(function(){t.scope.model=t.formEl.val(),t.scope.$apply()})},c.render=function(){this.isInit?this.formEl.selectpicker("refresh"):(this.formEl.selectpicker({iconBase:"fa",tickIcon:"fa-check",style:this.scope.buttonClass||"btn-default",title:this.attrs.placeholder||"请选择"}),this.isInit=!0)},c.val=function(t){e.prototype.val.call(this,t),t&&this.render()},c.load=function(e,n,o){var i=this;return t.get(e).then(function(t){if(i.setData(t,o),n)i.val(n);else{var e=i.val()||i.scope.model,r=/^\?.+:(.+)\s+\?$/.exec(e);i.logger.debug("load => "+e),i.val(r?r[1]:e)}})},c.setData=function(t,e,n,o){var i=this;n=n||this.scope.labelName,o=o||this.scope.valueName,e&&this.formEl.html(""),_.isArray(t)?$.each(t,function(t,e){i.formEl.append(i.toOption(e,o,n))}):$.each(t,function(t,e){var r=i.toOptionGroup(t);$.each(e,function(t,e){r.append(i.toOption(e,o,n))}),i.formEl.append(r)}),this.dataList=t,this.reset()},c.toOption=function(t,e,n){var o=_.isString(t),i=o?t:t[e],r=o?t:t[n],a=$("<option/>").attr("value",i).html(r),s=this.scope.render(a,t);s&&a.data("content",s),a.data("item",t);var l=this.scope.onRender({item:t});return l&&a.data("content",l),a},c.toOptionGroup=function(t){var e=$("<optgroup/>").attr("label",t);return e},c.reset=function(){e.prototype.reset.call(this),this.render()},a(n.prototype,c),c=void 0,n}(UIFormItemControl);return e})}(),function(){angular.module("admin.component").factory("UISpinnerControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Spinner",this.formEl=n.find("input"),t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this)},l.initEvents=function(){var e=this;t.prototype.initEvents.call(this),this.element.on("mousedown",".spinner-up",function(){return e._changeValue(!0)}),this.element.on("mousedown",".spinner-down",function(){return e._changeValue(!1)}),this.scope.$watch("model",function(t){var n=e._checkValue(t);n!=t&&(e.scope.model=n)})},l._changeValue=function(t){var e=1*(this.attrs.step||1),n=this.val();n=void 0!==n?parseInt(n):this.attrs.value,n+=e*(t?1:-1),n=this._checkValue(n),this.scope.model=n,this.scope.$apply(),this.scope.change({val:n})},l._checkValue=function(t){var e=1*(this.attrs.min||0),n=1*(this.attrs.max||Number.MAX_VALUE);return t>n&&(t=n),e>t&&(t=e),t},r(e.prototype,l),l=void 0,e}(UIFormItemControl);return t})}(),function(){angular.module("admin.component").factory("UISwitchControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Switch",this.formEl=n.find("input"),this.checkEl=this.formEl[0],t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this),this.onValue=this.attrs.onValue||"1",this.offValue=this.attrs.offValue||"0",this.onText=this.attrs.onText||"开",this.offText=this.attrs.offText||"关"},l.initEvents=function(){t.prototype.initEvents.call(this)},l.render=function(){var t=this;if(this.formEl.bootstrapSwitch({size:"normal",onText:this.onText,offText:this.offText,onSwitchChange:function(e,n){t._change(n)}}),this.formEl.bootstrapSwitch("state",this.attrs.value==this.onValue),this.checkEl.checked=!0,this.scope.$watch("model",function(e){e!=t.val()&&t.val(e)}),!this.scope.model){var e=this.offValue;this.scope.model=e}},l.disabled=function(t){this.formEl.bootstrapSwitch("disabled","true"==t)},l.val=function(t){return void 0!==t?(this.formEl.bootstrapSwitch("state",t==this.onValue),this):this.formEl.val()},l._change=function(t){var e=t?this.onValue:this.offValue;this.val(e),this.checkEl.checked=!0,this.scope.model=e,this.scope.change({val:e})},r(e.prototype,l),l=void 0,e}(UIFormItemControl);return t})}(),function(){angular.module("admin.component").factory("UITagControl",function(t,e,n){var o=function(e){"use strict";function o(t,n,o){this.className="RemoteSelect",this.selectValues=[],this.selectItems=[],e.call(this,t,n,o)}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,a(e,n));return t},l=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;i||s(o,e);var u={};return null!==e&&l(o,e),o.prototype=c(null!==e?e.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),r(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){e.prototype.init.call(this)},u.initEvents=function(){var t=this;e.prototype.initEvents.call(this),this.element.on("select2-selecting",function(e){return e.object.isNew&&"false"==t.attrs.editable?!1:(t.selectValues.push(e.val),t.selectItems.push(e.object),t.scope.model=t.selectValues,t.scope.change({isAdd:!0,val:e.val,item:e.object,vals:t.selectValues,items:t.selectItems}),!0)}),this.element.on("select2-removing",function(e){t.selectValues=$.grep(t.selectValues,function(t){return t!=e.val}),t.selectItems=$.grep(t.selectItems,function(t){return t!=e.choice}),t.scope.model=t.selectValues,t.scope.change({isAdd:!1,val:e.val,item:e.object,vals:t.selectValues,items:t.selectItems})}),this.scope.$watch("model",function(e){e&&t.val(e)})},u.render=function(){e.prototype.render.call(this);var t=this._getConfig();this.inputElement=this.element.find("input").select2(t)},u._getConfig=function(){var t={openOnEnter:!1,multiple:!0,createSearchChoice:$.proxy(this._createSearchChoice,this),formatResult:$.proxy(this._formatResult,this),formatSelection:$.proxy(this._formatResult,this),id:$.proxy(this._formatId,this),initSelection:$.proxy(this._initSelection,this),query:$.proxy(this._filterData,this),formatNoMatches:function(){return"没有符合的数据"},formatInputTooShort:function(t,e){return"输入"+e+"个字符后开始查询"},formatSelectionTooBig:function(t){return"最大可以选中"+t+"个数据"},formatSearching:function(){return"正在加载数据..."},formatAjaxError:function(){return"加载数据失败"}};return this.attrs.minmum&&(t.minimumInputLength=this.attrs.minmum),this.attrs.maxSize&&(t.maximumSelectionSize=this.attrs.maxSize),t.closeOnSelect=!1,t},u.useParams=function(t){return $.extend(this.params,t||{})},u.loadData=function(){var e=this,o=t.defer();return this.datas?o.resolve(this.datas):n.get(this.attrs.url,this.useParams()).then(function(t){e.datas=t?t.aaData||t:[],$.each(e.datas,function(t,e){var n=[];for(var o in e)n.push(o+"="+(e[o]||"").toString().toLowerCase());e.__string=n.join(",")}),o.resolve(e.datas)}),o.promise},u._createSearchChoice=function(t,e){return 0===$(e).filter(function(){return 0===this.name.indexOf(t)}).length?e.length<=10?{id:t,name:t,isNew:!0}:null:void 0},u._filterData=function(t){var e=this,n=(this.attrs.search||"").toLowerCase().split(","),o=t.term.toLowerCase();this.loadData().then(function(i){var r=[];$.each(i,function(i,a){var s=!1;t.init?s=e.attrs.multi?-1!=t.term.indexOf(e._formatId(a)):e._formatId(a)==t.term:0===n.length||""===n[0]?s=-1!=a.__string.indexOf(o):$.each(n,function(t,e){s=-1!=(a[e]||"").toString().toLowerCase().indexOf(o)}),s&&r.push(a)}),t.callback({results:r})})},u._initSelection=function(t,e){var n=this,o=function(t){e(t.results)};n.isFocusInit?(n.isFocusInit=!1,n.isInit=!1,o({results:n.selectItems})):void 0!==t.val()?(n.isInit=!1,this._filterData({term:t.val(),init:!0,callback:o})):n.isInit&&(n.isInit=!1,o({results:[]}))},u._formatId=function(t){return t[this.attrs.valueName||"id"]},u._formatResult=function(t,e,n){return t[this.attrs.labelName||"name"]},u.reset=function(){this.selectItems=[],this.selectValues=[],this.inputElement.select2("val","")},u.val=function(t){if(!t)return this.attrs.multi?this.selectValues:this.selectValues[0];this.inputElement.select2("val",t),this.selectValues=this.attrs.multi?t:[t];var e=","+this.selectValues.join(",")+",",n=this;this.loadData().then(function(t){n.selectItems=$.grep(t,function(t){return-1!=e.indexOf(","+n._formatId(t)+",")})})},u.item=function(){return this.attrs.multi?this.selectItems:this.selectItems[0]},s(o.prototype,u),u=void 0,o}(UIFormItemControl);return o})}(),function(){angular.module("admin.component").provider("UIUploadControl",function(){var t,e,n,o={setDomain:function(e){t=e},setTokenUrl:function(t){e=t},setMaxSize:function(t){n=t},$get:function(){var o=function(o){function i(t,e,n){this.className="Upload",o.call(this,t,e,n)}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,s(e,n));return t},c=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;r||l(i,o);var p={};return null!==o&&c(i,o),i.prototype=u(null!==o?o.prototype:null,{constructor:{value:i,configurable:!0,writable:!0}}),a(i,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.init=function(){o.prototype.init.call(this),this.$updateButton=this.element.find("button:eq(0)"),this.$removeButton=this.element.find("button:eq(1)"),this.$container=this.element.find(".ui-form-upload"),this.uploadButtonId="uiFormUploadButton"+(new Date).getTime(),this.uploadContrainerId="uiFormUploadContainer"+(new Date).getTime(),this.$updateButton.attr("id",this.uploadButtonId),this.$container.attr("id",this.$container)},p.render=function(){o.prototype.render.call(this),Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:this.uploadButtonId,uptoken_url:e,domain:t,unique_names:!0,container:this.uploadContrainerId,max_file_size:n,flash_swf_url:"/assets/js/plupload/js/Moxie.swf",max_retries:3,dragdrop:!0,drop_element:this.uploadContrainerId,chunk_size:"1mb",auto_start:!0,init:{FilesAdded:function(t,e){plupload.each(e,function(t){})},BeforeUpload:function(t,e){},UploadProgress:function(t,e){},FileUploaded:function(e,n,o){o=JSON.parse(o),o.name=n.name,o.url=t+"/"+o.key,cb&&cb(o)},Error:function(t,e,n){},UploadComplete:function(){},Key:function(t,e){var n="";return n}}})},l(i.prototype,p),p=void 0,i}(UIFormItemControl);return o}};return o})}(),angular.module("admin.component").factory("UIPortletControl",function(t,e){var n=function(n){"use strict";function o(t,e,o,i){n.call(this),this.element=e,this.scope=t,this.attrs=o,this.transclude=i,this.message=new Message("UIPortlet"),this.init(),this.initEvents(),this.render()}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,a(e,n));return t},l=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;i||s(o,n);var u={};return null!==n&&l(o,n),o.prototype=c(null!==n?n.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),r(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){this.bodyElement=this.element.find(".portlet-body"),this.headElement=this.element.find(".portlet-title"),this.triggerComplete(this.scope,this.attrs.ref||"$portlet",this)},u.initEvents=function(){},u.render=function(){var t=this;this.transclude(this.scope.$parent,function(e){var n=e.filter(".portlet-tool-bar");0===n.length&&$.each(e,function(t,e){return-1!=e.nodeName.indexOf("UI-PORTLET-ACTION")?(n=$(e),!1):void 0}),t.bodyElement.append(e),0!==n.length&&t.headElement.append(n),t.scope.title||t.headElement.hide(),t.load()})},u.load=function(n,o){var i=this;o=o||this.scope.url,o&&t.get(o,n||{}).then(function(t){var n=e(t)(i.scope);i.bodyElement.append(n)})},u.setTitle=function(t){this.headElement.find("span").html(t)},s(o.prototype,u),u=void 0,o}(ComponentEvent);return n}),angular.module("admin.component").directive("uiPortlet",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{captionClass:"@",bodyClass:"@",icon:"@",url:"@",title:"@"},link:function(e,n,o,i,r){new t(e,n,o,r)},template:'\n                <div class="portlet">\n                    <div class="portlet-title tabbable-line">\n                        <div class="caption">\n                            <i ng-if="icon" class="{{icon}}"></i>\n                            <span class="caption-subject {{captionClass}}">{{title}}</span>\n                        </div>\n                    </div>\n                    <div class="portlet-body {{bodyClass}}">\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").factory("UITabItemControl",function(t,e,n){var o=function(o){"use strict";function i(t,e,n,i){o.call(this),this.element=e,this.scope=t,this.attrs=n,this.transclude=i,this.message=new Message("UITabItem"),this.init(),this.initEvents()}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,s(e,n));return t},c=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;r||l(i,o);var p={};return null!==o&&c(i,o),i.prototype=u(null!==o?o.prototype:null,{constructor:{value:i,configurable:!0,writable:!0}}),a(i,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.init=function(){this.scope.component=this,this.scope.$emit("uitab.item.complete",this)},p.initEvents=function(){var t=this;this.scope.$on("uitab.item.remove",function(e,n){n==t.element.index()&&t.remove()}),this.scope.$on("uitab.item.show",function(e,n){var o=n.index,i=n.lazy;o==t.element.index()?t._show():t.content?t._hide():i||t.getContent().then(function(){t.getContainer().append(t.content),t.content.hide()})})},p.setTitle=function(t){this.scope.head=t},p.clickHandler=function(t){this.scope.$parent.$broadcast("uitab.item.show",{index:this.element.index()}),t.stopPropagation()},p.removeHandler=function(t){this.scope.$parent.$broadcast("uitab.item.remove",this.element.index()),t.stopPropagation()},p.getContainer=function(){return this.bodyElement||(this.bodyElement=this.element.parents(".ui-tab").find(".tab-content"),0===this.bodyElement.length&&(this.bodyElement=this.element.parents(".portlet").find(".portlet-body"))),this.bodyElement},p.getContent=function(){var n=this;return this.content?e.toPromise(this.wrapperContent(html)):this.scope.url?t.load(this.scope.url).then(function(t){return n.content=n.wrapperContent(t),n.content}):(this.transclude(this.scope.$parent.$parent,function(t){n.content=t}),e.toPromise(this.content))},p.wrapperContent=function(t){return n(t)(this.scope.$parent.$parent)},p._show=function(){var t=this;this.content?this.content.show():this.getContent().then(function(){t.getContainer().append(t.content),t.content.show()}),this.scope.active=!0},p._hide=function(){this.content&&this.content.hide(),this.scope.active=!1},p.remove=function(){var t=this;setTimeout(function(){t.element.remove(),t.content&&t.content.remove(),t.scope.$destroy()},100)},l(i.prototype,p),p=void 0,i}(ComponentEvent);return o}),angular.module("admin.component").directive("uiTabItem",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@",url:"@"},link:function(e,n,o,i,r){new t(e,n,o,r)},template:'\n                <li ng-class="{\'active\': active}">\n                    <a href="javascript:;" ng-click="component.clickHandler($event)">\n                        <span>{{head}}</span>\n                        <i class="fa fa-times" ng-click="component.removeHandler($event)"></i>\n                    </a>\n                </li>\n            '}}),angular.module("admin.component").directive("uiTableCheckColumn",function(t){var e=function(t){"use strict";function e(e,n,o){this.className="CheckColumn",t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this),this.$table=this.element.parents("table"),this.$tableBody=this.$table.find("tbody")},l.initEvents=function(){var e=this;t.prototype.initEvents.call(this),this.scope.$emit("uitable.column.idname",this.attrs.name),this.scope.selectAllHandler=function(t){e._selectAllHandler(t)}},l.render=function(t){var e=this,n=this.getValue(t);return $('<input type="checkbox" value="'+n+'"/>').data("rowData",t).click(function(t){e._selectOneHandler(t)})},l._selectAllHandler=function(t){var e=t.target.checked;this.$tableBody.find("input[type=checkbox]").prop("checked",e).uniform(),this.scope.$emit("uitable.column.selectall",e)},l._selectOneHandler=function(t){var e=$(t.target);this.scope.$emit("uitable.column.selectone",{isCheck:t.target.checked,rowData:e.data("rowData"),value:e.val()})},r(e.prototype,l),l=void 0,e}(t);return{restrict:"E",replace:!0,scope:{head:"@"},controller:function(t,n,o){return new e(t,n,o)},template:'\n                <th>\n                    <input type="checkbox" ng-click="selectAllHandler($event)"/>\n                </th>\n            '}}),angular.module("admin.component").directive("uiTableDateColumn",function(t,e){var n=function(t){"use strict";function n(e,n,o){this.className="DateColumn",t.call(this,e,n,o)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,t);var c={};return null!==t&&s(n,t),n.prototype=l(null!==t?t.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){t.prototype.init.call(this),this.format=this.attrs.format||"yyyy-MM-dd HH:mm:ss"},c.render=function(t){var n=this.getValue(t);return n&&(n=e.dateFormatStr(n,this.format)),$("<div/>").html(n)},a(n.prototype,c),c=void 0,n}(t);return{restrict:"E",replace:!0,scope:{head:"@"},controller:function(t,e,o){return new n(t,e,o)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiTableImageColumn",function(t){var e=function(t){"use strict";function e(e,n,o){t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this)},l.render=function(t){var e=this.getValue(t),n=this.attrs.placeholder,o=this.attrs.qiniu;return void 0===e&&(e=n),void 0!==e&&o&&(e+=o),$("<img/>").attr("src",e).addClass(this.scope.imageCss)},r(e.prototype,l),l=void 0,e}(t);return{restrict:"E",replace:!0,scope:{head:"@",imageCss:"@"},controller:function(t,n,o){return new e(t,n,o)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").factory("UITableColumnHelper",function(t){return function(e,n,o,i){var r=n.attr(""+i+"-bak")||n.attr(i);if(n.attr(""+i+"-bak")||o.$set(""+i+"-bak",r),e.data&&r){var a=(r||"").replace(/\{\{([^\}]+)\}\}/g,function(n,o){return t.get(e,o)});n.prop(i.replace("ng-",""),a)}}}).directive("a",function(t){return{restrict:"E",link:function(e,n,o){t(e,n,o,"ng-href")}}}).directive("img",function(t){return{restrict:"E",link:function(e,n,o){t(e,n,o,"ng-src")}}}).directive("uiTableColumn",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@",onRender:"&"},compile:function(e,n,o){return{pre:function(e,n,i){return new t(e,n,i,o)}}},template:'\n                <th>\n                    {{head}}\n                    <script type="text/ng-template" ng-transclude>\n                    </scirpt>\n                </th>\n            '}}),angular.module("admin.component").directive("uiTableOperationColumn",function(t){var e=function(t){"use strict";function e(e,n,o,i){this.className="OperationColumn",t.call(this,e,n,o,i)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this)},r(e.prototype,l),l=void 0,e}(t);return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@"},controller:function(t,n,o,i){return new e(t,n,o,i)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiTableProgressColumn",function(t){var e=function(t){"use strict";function e(e,n,o){this.className="ProgressColumn",t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this)},l.render=function(t){var e,n=this.getValue(t),o=this._getDom();return n=void 0!==n?n:0,25>=n?e="progress-bar-danger":50>=n?e="progress-bar-danger":75>=n&&(e="progress-bar-info"),o.attr("title",n+"%").find("div").addClass(e).animate({width:n+"%"}).end(),o},l._getDom=function(){return $('\n                    <div style="border: 1px solid #57b5e3;" class="progress progress-striped active" role="progressbar"style="margin-bottom:0px;">\n                        <div class="progress-bar"></div>\n                    </div>\n                ')},r(e.prototype,l),l=void 0,e}(t);return{restrict:"E",replace:!0,scope:{head:"@"},controller:function(t,n,o){return new e(t,n,o)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").filter("emptyFilter",function(){return function(t,e){return t||e||"-";

}}).factory("UITableColumnControl",function(t,e){var n=function(e){"use strict";function n(t,n,o,i){e.call(this),this.scope=t,this.element=n,this.attrs=o,this.transclude=i,this.hasTransclude=i&&i(t).length>0,this.className=this.className||"Column",this.init(),this.initEvents()}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var e=this;this.message=new t("UITable"+this.className),this.sName=this.attrs.name||"",this.mTitle=this.attrs.head,this.bEditable=this.attrs.editable,this.bChecked=this.attrs.checked,this.mEditUrl=this.attrs.editUrl,this.mAttrs=this.attrs,this.sClass=this.attrs.css||"",this.sWidth=this.attrs.width||"smart",this.bVisible=void 0===this.attrs.novisible,this.bSortable=void 0!==this.attrs.sort,this.mDataProp=function(t,n){if("display"!=n)return"";if(3==arguments.length)return arguments[2];var o=e.render(t,n),i=e.wrapperDisplay(o);return i},this.scope.$emit("uitable.column.complete",this)},c.initEvents=function(){},c.render=function(t){return this.hasTransclude?this.getTransclude(t):this.scope.onRender?this.scope.onRender({rowData:t}):this.getValue(t)},c.getValue=function(t){var e,n=this.sName;if(n&&-1!=n.indexOf(".")){var o,i=n.split(".");for(e=t;(o=i.shift())&&e;)e=e[o]}else n&&(e=t[n]);return e},c.getTransclude=function(t){var e=this.scope.$new();e.data=t;var n;return this.transclude(e,function(t){n=t}),n},c.wrapperDisplay=function(t){return t=void 0!==t?t:"-",void 0!==t&&angular.isString(t)&&(t=$.trim(t),t=t.length?t:"-",t="<div>"+t+"</div>"),t},a(n.prototype,c),c=void 0,n}(ComponentEvent);return n}),angular.module("admin.component").directive("uiTableStateColumn",function(t){var e=function(t){"use strict";function e(e,n,o,i){this.className="StateColumn",t.call(this,e,n,o,i)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this)},l.render=function(t){var e,n=this.getValue(t);return this.hasTransclude?e=this._getFromTransclude(t,n):this.scope.map&&(e=this._getFromMap(n)),e},l._getFromMap=function(t){function e(t){if(t){if(Array.isArray(t))return 0;var e;if(s&&s(t),"object"==typeof t&&"function"==typeof(e=t[a]))return s&&s(void 0),e.call(t);if(s&&s(void 0),t+""=="[object Generator]")return t}throw new Error(t+" is not iterable")}var n,o,i,r,a="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",s="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;if(_.isArray(this.scope.map)){r=this.scope.map,n=e(r),i=0===n,o=i?r.length:void 0;for(var l;i?o>n:!(o=n.next()).done;)if(l=i?r[n++]:o.value,l.id==t)return l.name;n=o=i=r=void 0}else if(_.isObject(this.scope.map))return this.scope.map[t]},l._getFromTransclude=function(t,e){var n,o=this.scope.$new(),i=this.attrs["default"];return o.data=t,this.transclude(o,function(t){n=t.filter('[state="'+e+'"]'),0===n.length&&(n=t.filter('[state="'+i+'"]')),0===n.length&&$.each(t||[],function(t,e){e.innerHTML&&-1!=e.innerHTML.indexOf(i)&&(n=$(e))})}),n},r(e.prototype,l),l=void 0,e}(t);return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@",map:"="},controller:function(t,n,o,i){return new e(t,n,o,i)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiFormEditor",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <script name="{{name}}" type="text/plain"></script>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormDate",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change({val: model})" ng-model="model" readonly="true"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormDateRange",function(t){return{restrict:"E",replace:!0,link:function(e,n,o){new t(e,n,o)},scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",fromModel:"=",toModel:"=",change:"&",help:"@"},template:'\n               <div class="form-group">\n                   <label class="col-md-{{lcol}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol}}">\n                       <div class="input-date-range input-inline">\n                           <div class="input-group">\n                               <input type="text" class="form-control" name="{{fromName}}" ng-model="fromModel" value="{{fromValue}}" readonly>\n                               <span class="input-group-addon">至</span>\n                               <input type="text" class="form-control" name="{{toName}}" ng-model="toModel" value="{{toValue}}" readonly>\n                           </div>\n                       </div>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormInput",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@",type:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="{{type || \'text\'}}" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change({val: model})" ng-model="model"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormTextarea",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,o,i){var r=e.find("textarea");t.$on("uiform.reset",function(){r.val("")}),r.html(i().text()),e.removeAttr("name").removeAttr("model").removeAttr("rows").removeAttr("cols")},template:function(n,o){var i=(o.col||e).split(":");return t.getTemplate("tpl.form.textarea",$.extend({leftCol:i[0],rightCol:i[1]},o))}}}),angular.module("admin.component").directive("uiFormRegion",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@",type:"@",mode:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}} ui-form-region">\n                        <input type="hidden" name="{{name}}"/>\n                        <input type="text" class="input-small form-control input-inline" name="province"/>\n                        <input type="text" class="input-small form-control input-inline" name="city"/>\n                        <input type="text" class="input-small form-control input-inline" name="area"/>\n                        <input type="text" class="input-medium form-control input-inline" name="address" ng-value="{{aValue}}" placeholder="请输入详细地址" />\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormSelect",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{lcol:"@",rcol:"@",label:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@",multiple:"@",render:"&"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                    <label class="col-md-{{lcol}} control-label">{{label}}</label>\n                    <div class="col-md-{{rcol}}">\n                        <select class="form-control show-tick" data-container="body" data-live-search="true" data-style="{{buttonClass}}" name="{{name}}" ng-transclude></select>\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiFormTag",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",name:"@",model:"=",placeholder:"@",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control" name="{{name}}"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormSpinner",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <div class="input-group" style="width:150px;">\n                           <div class="spinner-buttons input-group-btn">\n                               <button type="button" class="btn spinner-up blue"><i class="fa fa-plus"></i></button>\n                           </div>\n                           <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" readonly="true"/>\n                           <div class="spinner-buttons input-group-btn">\n                               <button type="button" class="btn spinner-down red"><i class="fa fa-minus"></i></button>\n                           </div>\n                       </div>\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                    </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormSwitch",function(t){return{restrict:"E",scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n               <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                        <input type="checkbox" class="form-control {{css}}" name="{{name}}" />\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormUpload",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}} ui-form-upload">\n                       <div>\n                           <img class="{{css}}"/>\n                       </div>\n                       <div class="btn-group">\n                           <button type="button" class="btn blue start">\n                               <i class="fa fa-upload"></i>\n                               <span>选择文件</span>\n                           </button>\n                           <button type="button" class="btn red start">\n                               <i class="fa fa-upload"></i>\n                               <span>删除文件</span>\n                           </button>\n                       </div>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiSearchDate",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                 <div class="input-inline ui-search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change({val: model})" readonly="true"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchDateRange",function(t){return{restrict:"E",replace:!0,link:function(e,n,o){new t(e,n,o)},scope:{css:"@",name:"@",fromModel:"=",fromName:"@",toModel:"=",toName:"@",change:"&",label:"@"},template:'\n                 <div class="input-inline ui-search-item ui-search-date-range input-xlarge {{css}}">\n                    <div class="input-group">\n                        <input type="text" readonly class="form-control" name="{{fromName}}" ng-model="fromModel"/>\n                        <span class="input-group-addon">{{label || \'到\'}}</span>\n                        <input type="text" readonly class="form-control" name="{{toName}}" ng-model="toModel"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchInput",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                 <div class="input-inline ui-search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change({val: model})"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchInputSelect",function(t,e,n,o){var i=new o("SearchInputSelect");return{restrict:"E",replace:!0,transclude:!0,link:function(o,r,a){var s=a.selectName&&a.inputName,l=new e(o,r,a),c=new t(o,r,a);n.tiggerComplete(o,a.ref||"$searchInputSelect",{select:c,input:l}),s||(a.selectName||a.inputName?i.error("必须同时设置select-name和input-name, 要么不设置, 要么全设置"):(c.change(function(){l.attr("name",c.val())}),l.attr("name",c.val()))),o.$on("uisearchform.reset",function(){c.reset(),l.reset()})},template:function(t,e){return n.getTemplate("tpl.searchform.input.select",e)}}}),angular.module("admin.component").directive("uiSearchRegion",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",mode:"@"},link:function(e,n,o){(void 0===o.mode||"a"==o.mode)&&(o.mode="s"),new t(e,n,o)},template:'\n                <div class="input-inline ui-search-item">\n                    <div class="input-group ui-search-region">\n                        <div ng-if="label" class="input-group-addon">{{label}}:</div>\n                        <input type="hidden" name="{{name}}"/>\n                        <input type="text" class="input-small form-control input-inline" name="province"/>\n                        <input type="text" class="input-small form-control input-inline" style="left:-1px" name="city"/>\n                        <input type="text" class="input-small form-control input-inline" style="left:-2px" name="area"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchSelect",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{label:"@",placeholder:"@",name:"@",css:"@",model:"=",change:"&",multiple:"@",render:"&",labelName:"@",valueName:"@",buttonClass:"@",onRender:"&"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="input-inline ui-search-item">\n                    <div ng-class="{\'input-group\': label}">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <select class="form-control show-tick" data-live-search="true" name="{{name}}" ng-transclude></select>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchTag",function(t){return{restrict:"E",replace:!0,scope:{label:"@",name:"@",model:"=",placeholder:"@",change:"&"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="input-large ui-search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" />\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiPortletAction",function(){return{restrict:"E",replace:!0,transclude:!0,template:'\n                <div class="actions portlet-tool-bar tools" ng-transclude>\n                </div>\n            '}}),angular.module("admin.component").directive("uiPortletActionPagination",function(t){return{restrict:"E",replace:!0,link:function(e,n,o){var i=o.url,r=o.pageIndex,a=o.pageSize,s=o.pageLimit,l=o.pageDataName,c=o.pageTotalName,u=!1,p=new t(i,r,a,s,l,c),d=function(t){$.extend(e,t)};e.setUrl=function(t){p.url=t},e.load=function(t){t--,t==p.pageIndex&&u||(u=!0,p.getPage(t).then(d))},e.loadFirst=function(t){(!e.isFirst||t)&&p.prePage().then(d)},e.loadLast=function(t){(!e.isLast||t)&&p.nextPage().then(d)},e.load(1)},template:'\n                <ul class="pagination pagination-circle portlet-tool-bar">\n                    <li ng-class="{\'disabled\': isFirst}" ><a href="javascript:;" ng-click="loadFirst()"><i class="fa fa-angle-left"></i></a></li>\n                    <li ng-repeat="page in pageList" ng-class="{\'active\': page.current}" ng-click="load(page.index)">\n                        <a href="javascript:;" ng-bind="page.index"></a>\n                    </li>\n                    <li ng-class="{\'disabled\': isLast}" ><a href="javascript:;" ng-click="loadLast()"><i class="fa fa-angle-right"></i></a></li>\n                </ul>\n            '}}),angular.module("admin.component").directive("uiPortletActionSearch",function(){return{restrict:"E",replace:!0,scope:{change:"&",placeholder:"@",model:"="},link:function(t){t.model=""},template:'\n                <div class="inputs portlet-tool-bar">\n                    <div class="portlet-input input-inline">\n                        <div class="input-icon right">\n                            <i class="icon-magnifier"></i>\n                            <input type="text" ng-model="model" class="form-control input-circle" placeholder="{{placeholder}}"/>\n                        </div>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiPortletActionTab",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{"default":"@",lazy:"@"},compile:function(){var e=null;return{pre:function(n,o,i,r,a){e=new t(n,o,i,a)},post:function(){e.build()}}},template:'\n                <ul class="nav nav-tabs portlet-tool-bar" ng-transclude>\n                </ul>\n            '}}),function(){angular.module("admin.component").directive("maxlength",function(){return{restrict:"a",link:function(t,e,n){var o=n.maxlength;/^\d+$/g.test(o)&&$("input.className").maxlength({alwaysShow:!0,threshold:Math.ceil(o/2),warningClass:"label label-info",limitReachedClass:"label label-warning",placement:"bottom ",preText:"已输入 ",postText:" 个字符",separator:" - "})},template:""}})}(),function(){var t=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.message=new Message("uiStateButton")}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){var t=this;this.scope.onClick||this.message.error("必须设置on-click属性"),this.element.click(function(){t.disable(!0);var e=t.scope.onClick({});t.wait(e)})},l.wait=function(t){var e=this;t&&t["finally"]?t["finally"](function(){return e.disable(!1)}):t&&t.always?t.always(function(){return e.disable(!1)}):this.disable(!1)},l.disable=function(t){this.scope.target&&(t?Metronic.blockUI({target:this.scope.target}):Metronic.unblockUI(this.scope.target)),this.element.prop("disabled",t)},r(e.prototype,l),l=void 0,e}(Event);angular.module("admin.component").directive("uiStateButton",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{target:"@",onClick:"&"},link:function(e,n,o){var i=new t(e,n,o);i.init()},template:function(t,e){return void 0!==e.link?"<a ng-transclude></a>":'<button type="button" ng-transclude></button>'}}})}(),function(){angular.module("admin.component").factory("UIDialog",function(t,e,n){return{show:function(o,i,r){var a=n.defer(),s=new t(i,o);return i.onShow=function(){a.resolve(s)},i.onHide=function(){a.reject(s)},s.show().then(function(){try{e(window[r]||r,{$scope:i})}catch(t){}}),a.promise}}}).factory("UIDialogControl",function(t,e,n,o,i){var r=function(o){"use strict";function i(t,e,n,i){o.call(this),this.scope=t,this.scope.dialog=this,this.url=e,this.urlParams=n,this.transclude=i,this.message=new Message("UIDialogHelper")}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,s(e,n));return t},c=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;r||l(i,o);var p={};return null!==o&&c(i,o),i.prototype=u(null!==o?o.prototype:null,{constructor:{value:i,configurable:!0,writable:!0}}),a(i,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.show=function(){var t=this;return this.getContent().then(function(){return t.content.modal({keyboard:!0,size:"large",show:!0}),t.content})},p.hide=function(){this.content&&this.content.modal("hide")},p.getContent=function(){var o=this;return this.content?t.toPromise(this.content):this.url?e.load(this.url,this.urlParams||{}).then(function(t){o.content=n(t)(o.scope),o._addEvents()}):(this.content=this.transclude(this.scope).filter(".modal"),this._addEvents(),t.toPromise(this.content))},p.remove=function(){this.hide(),this.content.unbind("shown.bs.modal"),this.content.unbind("hidden.bs.modal"),this.content.remove(),o.prototype.remove.call(this)},p.close=function(){this.remove()},p._addEvents=function(){var t=this;this.content.bind("shown.bs.modal",function(){t.scope.onShow()}),this.content.bind("hidden.bs.modal",function(){t.scope.onHide()})},l(i.prototype,p),p=void 0,i}(ComponentEvent);return r})}(),angular.module("admin.component").directive("uiDialog",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{url:"@",initParams:"=",onShow:"&",onHide:"&"},link:function(e,n,o,i,r){var a=new t(e,e.url,e.initParams,r);a.triggerComplete(e,o.ref||"$dialog",a)},template:'\n                <div class="ui-dialog"></div>\n            '}}),function(){angular.module("admin.component").directive("uiBreadcrumb",function(t,e){var n=function(n){"use strict";function o(t){this.scope=t,this.message=new Message("uiBreadcrumb")}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,a(e,n));return t},l=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;i||s(o,n);var u={};return null!==n&&l(o,n),o.prototype=c(null!==n?n.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),r(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){var n=this;this.scope.datas?this.handler(t.toJSON(this.scope.datas)):this.scope.url?e.post(this.scope.url).then(function(t){return n.handler(t)}):this.message.error("至少设置datas或者url来配置面包屑")},u.handler=function(t){this.scope.items=(t||[]).map(function(t){return _.isArray(t)?{name:t[0],url:t[1]}:_.isObject(t)?{name:t.name,url:t.url}:{name:t,url:"#"}})},s(o.prototype,u),u=void 0,o}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{datas:"@",isRoute:"@",url:"@"},link:function(t){new n(t).init()},template:'\n                    <div class="page-bar">\n                        <ul class="page-breadcrumb">\n                            <li ng-repeat="item in items">\n                                <a ng-if="isRoute" ui-sref="{{item.url}}" ng-bind="item.name"></a>\n                                <a ng-if="!isRoute" ng-href="{{item.url}}" ng-bind="item.name"></a>\n                                <i ng-if="!$last" class="fa fa-angle-right"></i>\n                            </li>\n                        </ul>\n                    </div>\n                '}})}(),angular.module("admin.component").directive("uiCol",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{col:"@"},link:function(t,e,n,o,i){e.append(i(t.$parent))},template:'\n                <div class="col-md-{{col}}"></div>\n            '}}),function(){angular.module("admin.component").directive("uiContainer",function(t,e,n,o){var i=function(i){"use strict";function r(t,e,n,i){this.scope=t,this.element=e,this.attrs=n,this.transclude=i,this.logger=new o("UIContainer")}var a=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(t,e){for(var n in e)e.hasOwnProperty(n)&&s(t,n,l(e,n));return t},u=Object.setPrototypeOf||function(t,e){return a?t.__proto__=e:s(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},p=Object.create;a||c(r,i);var d={};return null!==i&&u(r,i),r.prototype=p(null!==i?i.prototype:null,{constructor:{value:r,configurable:!0,writable:!0}}),s(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),d.init=function(){this.scope.$parent.$on("componentComplete",this.initHandler.bind(this)),this.content=this.transclude(this.scope.$parent),this.element.show().append(this.content)},d.initController=function(){var o=this,i=this.scope.controller;t(function(){if(i&&window[i]){var t=/\(([^\)]+)\)/.exec(window[i].toString())[1],r={$scope:o.scope.$parent};t=t.split(",");for(var a,s=1;s<t.length;s++)a=$.trim(t[s]),r[a]=n.get(a);e(window[i],r)}else i&&e(i,{$scope:o.scope.$parent});o.scope.onComplete({})})},d.initHandler=function(t,e){if(e){var n=this.scope.$parent;n[e.ref]?(n[e.ref]=[].concat(n[e.ref]),n[e.ref].push(e.component)):n[e.ref]=e.component,this.logger.debug(""+e.ref+(" => "+n[e.ref]))}},c(r.prototype,d),d=void 0,r}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{controller:"@",onComplete:"&"},compile:function(){var t=null;return{pre:function(e,n,o,r,a){t=new i(e,n,o,a),t.init()},post:function(){t.initController()}}},template:"\n                    <div></div>\n                "}})}(),angular.module("admin.component").directive("uiPageContainer",function(){return{restrict:"E",replace:!0,transclude:!0,template:'\n                <div class="page-container" ng-transclude></div>\n            '}}),angular.module("admin.component").directive("uiPageContent",function(){return{restrict:"E",replace:!0,transclude:!0,template:'\n                <div class="page-content-wrapper">\n                    <div class="page-content" ng-transclude>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiPageHeader",function(t){!function(e){"use strict";function n(t,n,o){e.call(this),this.scope=t,this.element=n,this.init()}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var t=this;this.leftContainer=this.element.find(".hor-menu ul"),this.scope.leftMenuUrl&&this._getContent(this.scope.leftMenuUrl).then(function(e){t.leftContent=$(e),t.leftContainer.append(t.leftContent)}),this.rightContainer=this.element.find(".top-menu ul"),this.scope.rightMenuUrl&&this._getContent(this.scope.rightMenuUrl).then(function(e){t.leftContent=$(e),t.leftContainer.append(t.leftContent)})},c._getContent=function(e){return t.load(e)},a(n.prototype,c),c=void 0,n}(ComponentEvent);return{restrict:"E",replace:!0,transclude:!0,scope:{logUrl:"@",logImage:"@",logCss:"@",logoutUrl:"@",leftMenuUrl:"@",rightMenuUrl:"@"},link:function(t,e,n,o,i){$(document.body).addClass("page-header-fixed"),t.leftMenuUrl,t.rightMenuUrl;var r,a=$('<span class="selected"></span>');e.find(".hor-menu li").click(function(t){var e=$(t.target),n=e.parents("li");r&&r.removeClass("active"),n.find("> a").append(a),r=n.addClass("active")}),e.find(".hor-menu li").each(function(t,e){r=$(e),-1!=r.html().indexOf(location.hash)&&(r.find("> a").append(a),r.addClass("active"))})},template:'\n                <div class="page-header navbar navbar-fixed-top">\n                    <div class="page-header-inner">\n                        <div class="page-logo">\n                            <a ng-href="{{logUrl}}">\n                                <img ng-src="{{logImage}}" class="{{logCss}}">\n                            </a>\n                        </div>\n                        <div class="hor-menu hidden-sm hidden-xs">\n                            <ul class="nav navbar-nav" ng-transclude>\n                            </ul>\n                        </div>\n                        <div class="top-menu">\n                            <ul class="nav navbar-nav pull-right">\n                                <li>\n                                    <a ng-href="{{logoutUrl}}">\n                                        <i class="icon-logout"></i>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            '
}}),angular.module("admin.component").directive("uiRow",function(){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,o,i){e.append(i(t))},template:'\n                <div class="row"></div>\n            '}}),angular.module("admin.component").directive("uiSideBar",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{url:"@"},link:function(t,e,n,o,i){$(document.body).addClass("page-sidebar-fixed")},template:'\n                <div class="page-sidebar-wrapper">\n                    <div class="page-sidebar navbar-collapse collapse">\n                        <ul class="page-sidebar-menu hidden-sm hidden-xs" ng-transclude>\n                        </ul>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").controller("UIPortalControl",function(){var t=function(t){"use strict";function e(e,n,o,i){t.call(this),this.element=n,this.scope=e,this.attrs=o,this.transclude=i,this.message=new Message("UIPortal"),this.init(),this.initEvents()}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&a(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){},l.initEvents=function(){},r(e.prototype,l),l=void 0,e}(ComponentEvent);return t}),angular.module("admin.component").directive("uiPortal",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{url:"@"},link:function(e,n,o,i,r){new t(e,n,o,r)},templateUrl:'\n                <div class="row ui-sortable">\n                    <div class="column sortable col-md-{{eachColumn}}" ng-repeat="column in columns">\n                        <ui-portlet-container ng-repeat="portlet in column"></ui-portlet-container>\n                        <div class="portlet-container portlet-sortable-empty"></div>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").factory("UITabControl",function(t){var e=function(e){"use strict";function n(t,n,o,i){e.call(this),this.element=n,this.scope=t,this.attrs=o,this.transclude=i,this.message=new Message("UITab"),this.init(),this.initEvents()}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var t=this;this.tabItems=[],this.scope.component=this,this.bodyElement=this.element.find("ul"),this.isLazy="false"!=this.scope.lazy,this.transclude(this.scope,function(e){t.element.find("ul").append(e)}),this.triggerComplete(this.scope,this.attrs.ref||"$tab",this)},c.initEvents=function(){var t=this;this.scope.$on("uitab.item.show",function(e,n){setTimeout(function(){t.scope.onChange({index:n.index,tabItem:t.tabItems[n.index]})},60)}),this.scope.$on("uitab.item.remove",function(e,n){t.scope.onRemove({index:n})}),this.scope.$on("uitab.item.complete",function(e,n){t.tabItems.push(n)})},c.build=function(){this.showAtIndex(this.scope["default"]||"0")},c.addTab=function(t,e,n){this.addCustomTab('<ui-tab-item head="'+t+('">'+(e||""))+"</ui-tab-item>",n)},c.addCustomTab=function(e,n){var o=$(e);this.bodyElement.append(o),t(o)(this.scope),n&&this.showAtIndex(this.bodyElement.find("li").length-1)},c.showAtIndex=function(t){t=parseInt(t),void 0!==t&&t>=0&&this.scope.$broadcast("uitab.item.show",{index:t,lazy:this.isLazy})},c.removeAtIndex=function(t){t=parseInt(t),void 0!==t&&t>=0&&this.scope.$broadcast("uitab.item.remove",t)},a(n.prototype,c),c=void 0,n}(ComponentEvent);return e}),angular.module("admin.component").directive("uiTab",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{close:"@","default":"@",lazy:"@",url:"@",onRemove:"&",onChange:"&"},compile:function(){var e=null;return{pre:function(n,o,i,r,a){e=new t(n,o,i,a)},post:function(){e.build()}}},template:'\n                <div class="ui-tab tabbable-custom" ng-class="{\'tabbable-close\': close}">\n                    <ul class="nav nav-tabs">\n                    </ul>\n                    <div class="tab-content" style="min-height: 100px;">\n                    </div>\n                </div>\n            '}}),function(){var t={bDestroy:!0,sDom:"<'table-scrollable't><'row ui-table-footer'<'col-md-3 col-sm-12'li>r<'col-md-7 col-sm-12'p>>",bLengthChange:!0,bFilter:!1,bSort:!0,bAutoWidth:!1,bStateSave:!0,oLanguage:{sProcessing:'<img src="http://7xi8np.com1.z0.glb.clouddn.com/assets/img/loading-spinner-grey.gif"/><span>&nbsp;&nbsp;正在查询.. .</span>',sLengthMenu:"每页显示 _MENU_ 条",sZeroRecords:"请选择条件后，点击搜索按钮开始搜索",sInfo:"<label>当前第 _START_ - _END_ 条　共计 _TOTAL_ 条</label>",sInfoEmpty:"没有符合条件的记录",sInfoFiltered:"(从 _MAX_ 条记录中过滤)",sSearch:"查询",oPaginate:{sFirst:"首页",sPrevious:"上一页",sNext:"下一页",sLast:"尾页"}},sPaginationType:"bootstrap_full_number",aLengthMenu:[[10,20,30,60],[10,20,30,60]],iDisplayLength:10,bProcessing:!0,bServerSide:!0},e='\n            <div class="col-md-2">\n                <div class="input-group">\n                    <input type="text" class="form-control" placeholder="跳转页数">\n                    <span class="input-group-btn">\n                        <a href="javascript:;" class="btn green" style="font-size: 12px;">Go</a>\n                    </span>\n                </div>\n            </div>\n        ',n="aaData",o="iTotalRecords",i="post",r="pageSize",a="pageNo";angular.module("admin.component").provider("UITableControl",function(){return{setConfig:function(e){t=$.extend(!0,t,e)},setResultName:function(t,e){n=t,o=e},setRequestMethod:function(t){i=t},setPageName:function(t,e){r=t,a=e},setPageSize:function(e,n){t.aLengthMenu=e,t.iDisplayLength=n?n:e[0]},$get:function(s,l,c,u){var p=function(p){"use strict";function d(t,e,n){p.call(this),this.element=e,this.scope=t,this.attrs=n,this.message=new l("UITable")}var h=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),f=Object.defineProperty,m=Object.getOwnPropertyDescriptor,v=function(t,e){for(var n in e)e.hasOwnProperty(n)&&f(t,n,m(e,n));return t},b=Object.setPrototypeOf||function(t,e){return h?t.__proto__=e:f(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},g=Object.create;h||v(d,p);var y={};return null!==p&&b(d,p),d.prototype=g(null!==p?p.prototype:null,{constructor:{value:d,configurable:!0,writable:!0}}),f(d,"prototype",{configurable:!1,enumerable:!1,writable:!1}),y.init=function(){var t=this;this.aoColumns=[],this.bPaginate=void 0===this.attrs.nopage,this.bInfo=this.bPaginate,this.aaSorting=c.toJSON(this.attrs.sort||"[]"),this.fnInitComplete=function(){t._buildJumpDom()},this.fnServerData=function(e,n,o){setTimeout(function(){t._fetchData(e,n,o)},100)},this.idName=this.attrs.idName,this.pageResult={},this.pageResultData=[],this.selectValues=[],this.selectItems=[],this.instance=null,this.searchParams=[],this.pageSelectNum=[],this.triggerComplete(this.scope,this.attrs.ref||"$table",this)},y.initEvents=function(){var t=this;this.scope.$on("uitable.column.complete",function(e,n){t.aoColumns.push(n)}),this.scope.$on("uitable.column.idname",function(e,n){t.idName=n}),this.scope.$on("uitable.column.selectall",function(e,n){n?(t.selectItems=t.pageResultData,t.selectValues=t.selectItems.map(function(e){return e[t.idName]})):(t.selectItems=[],t.selectValues=[])}),this.scope.$on("uitable.column.selectone",function(e,n){if(n.isCheck)t.selectItems.push(n.rowData),t.selectValues.push(n.value);else{var o=_.indexOf(t.selectItems,n.rowData);o>=0&&(t.selectItems.splice(o,1),t.selectValues.splice(o,1))}}),this.scope.$on("uitable.column.visable",function(e,n){var o=_.indexOf(t.aoColumns,n);t.instance.fnSetColumnVis(o,n.bVisible,!1)}),this.scope.$on("uitable.search",function(e,n){t.refresh(n)})},y.build=function(){var t=this;$.fn.dataTable?this._build():s.getScript(""+u+"/assets/js/jquery.dataTables.min.js").then(function(){return t._build()})},y.jumpTo=function(t){return/^\d+$/.test(t)?t=parseInt(t)-1:void 0===t&&(t=this.getCurrentPage()-1),this.instance.fnPageChange(void 0!==t?Math.abs(t):"first"),this},y.refresh=function(t,e){return this.searchParams=t||this.searchParams,this.url=e||this.url,this.instance.fnPageChange(this.getCurrentPage()-1),this},y.search=function(t,e){this.selectItems=[],this.selectValues=[],this.searchParams=t||this.searchParams,this.url=e||this.url,this.jumpTo(1)},y.getCurrentPage=function(){var t=this.instance.fnSettings();return Math.ceil(t._iDisplayStart/t._iDisplayLength)+1},y.selectAll=function(t){this.scope.$broadcast("uitable.column.selectall",t)},y._build=function(){this.instance=this.element.find("table").dataTable($.extend({},t,this)),this.scope.$emit("uitable.complete",this)},y._fetchData=function(t,e,n){var o=this;if(!this.attrs.url&&!this.url||void 0!==this.attrs.manual)delete this.attrs.manual,n({aaData:[],iTotalRecords:0,iTotalDisplayRecords:0});else{var r=this.url||this.attrs.url;this._buildPageParam(e),s[i](r,e).then(function(t){var e=o._buildPageResult(t);o._beforeDataHandler(e),n(e),o._afterDataHandler(e)})["catch"](function(t){o._errorDataHandler(t)})["finally"](function(){})}},y._beforeDataHandler=function(t){this.pageResult=t,this.pageResultData=t.aaData,this.bPaginate&&(this.selectItems=[],this.selectValues=[]),this.scope.onDataSuccess({result:t})},y._afterDataHandler=function(t){this.element.find("input[type=checkbox]").uniform()},y._errorDataHandler=function(t){this.scope.onDateFail({result:t})},y._buildPageResult=function(t){var e={};return e=$.isArray(t)?{aaData:t,iTotalDisplayRecords:t.length,iTotalRecords:t.length}:{aaData:t[n],iTotalDisplayRecords:t[o],iTotalRecords:t[o]}},y._buildPageParam=function(t){$.each(this.scope.initParams||{},function(e,n){t.push({name:e,value:n})}),$.each(this.searchParams||{},function(e,n){t.push({name:e,value:n})});var e=0,n=0;$.each(t||[],function(t,o){"iDisplayStart"==o.name?e=o.value:"iDisplayLength"==o.name&&(n=o.value)}),t.push({name:a,value:e/n}),t.push({name:r,value:n})},y._buildJumpDom=function(){var t=this;if(this.bPaginate){var n=this.element.find(".ui-table-footer"),o=$(e),i=o.find("a"),r=o.find("input");n.append(o),i.click(function(){t.jumpTo(r.val())}),$(document).keydown(function(e){13==e.keyCode&&t.refresh()})}},v(d.prototype,y),y=void 0,d}(ComponentEvent);return p}}})}(),angular.module("admin.component").directive("uiTable",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{change:"&",jumpTo:"&",onDataSuccess:"&",onDateFail:"&",initParams:"="},compile:function(){var e=null;return{pre:function(n,o,i){e=new t(n,o,i),e.init(),e.initEvents()},post:function(){e.build()}}},template:'\n                <div class="ui-table">\n                    <table class="table table-striped table-bordered table-hover">\n                        <thead>\n                            <tr role="row" class="heading" ng-transclude>\n                            </tr>\n                        </thead>\n                        <tbody></tbody>\n                    </table>\n                </div>\'\n            '}}),angular.module("admin.component").factory("UITableToolBarControl",function(t){var e=function(e){"use strict";function n(t,n,o,i){e.call(this),this.element=n,this.scope=t,this.attrs=o,this.transclude=i,this.table=null,this.isEdit=!1,this.message=new Message("UITableToolBar"),this.init(),this.initEvents()}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var t=this;this.transclude(this.scope,function(e){t.element.find(".btn-group:eq(0)").append(e)}),this.scope.component=this,this.scope.editText="开启",this.triggerComplete(this.scope,this.attrs.ref||"$tableToolbar",this)},c.initEvents=function(){var t=this;this.scope.$parent.$on("uitable.complete",function(e,n){t.scope.table=n})},c.toggleEdit=function(){this.isEdit=!this.isEdit,this.scope.editText=this.isEdit?"关闭":"开启",this.scope.$parent.$broadcast("uitable.column.edit",this.isEdit)},c.doAddItem=function(){this.scope[this.attrs.add]?this.scope[this.attrs.add]():this.attrs.add&&-1!=this.attrs.add.indexOf("/")?this.attrs.addDialog||t.go(this.attrs.add):this.message.error('点击添加数据按钮，但是没有设置地址, 请在add="地址"')},c.doDelItems=function(){var t=this.scope.table,e=t.selectValues;this.scope[this.attrs.del]?this.scope[this.attrs.del](e):this.attrs.del?e.length>1?ajax.remove(this.attrs.del,{ids:e.join(",")}).then(function(){t.refresh()}):ajax.remove(this.attrs.del+"/"+e[0]).then(function(){t.refresh()}):this.message.error('点击删除数据按钮，但是没有设置地址, 请在del="地址"')},c.isShow=function(t,e){return"CheckColumn"==e.className||"OperationColumn"==e.className?!1:!0},c.toggleColumn=function(t,e){e.bVisible=!e.bVisible,this.scope.$parent.$broadcast("uitable.column.visable",e)},a(n.prototype,c),c=void 0,n}(ComponentEvent);return e}),angular.module("admin.component").directive("uiToolBarTable",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{editable:"@",add:"@",del:"@",tip:"@"},controller:function(e,n,o,i){new t(e,n,o,i)},template:'\n                <div class="ui-toolbar table-toolbar">\n                    <div class="btn-group pull-left">\n                        <button ng-if="editable" type="button" class="btn btn-sm btn-info" ng-click="component.toggleEdit()"><i class="fa fa-edit"></i> <span ng-bind="editText"></span>快速编辑</button>&nbsp;&nbsp;\n                        <button ng-if="add" type="button" class="btn btn-sm btn-primary" ng-click="component.doAddItem()"><i class="fa fa-plus-circle"></i> 新增{{tip}}</button>&nbsp;&nbsp;\n                        <button ng-if="del" type="button" ng-class="{\'btn-danger\': table.selectItems.selectValues.length > 0}" class="btn btn-sm" ng-disabled="table.selectItems.length==0" ng-click="component.doDelItem()"><i class="fa fa-times-circle"></i> 删除{{tip}}</button>&nbsp;&nbsp;\n                    </div>\n\n                    <span ng-show="table.selectItems.length > 0" class="table-toolbar-tip fadeInRight">您已选择 <strong ng-bind="selectItems.length"></strong> 个{{tip}}，支持翻页选择多个{{tip}}。</span>\n\n                    <div class="btn-group pull-right">\n                        <a class="btn default btn-sm" href="#" data-hover="dropdown"><i class="fa fa-table"></i></a>\n                        <div class="dropdown-menu dropdown-checkboxes pull-right">\n                            <label ng-repeat="column in table.aoColumns" ng-if="component.isShow($index, column)" style="cursor:pointer" >\n                                <div class="checker">\n                                    <span ng-class="{checked: column.bVisible}">\n                                        <input type="checkbox" ng-click="component.toggleColumn($event, column)">\n                                    </span>\n                                </div>\n                                <span ng-bind="column.mTitle"/>\n                            </label>\n                         </div>\n                    </div>\n                    <div style="clear:both"></div>\n                </div>\n            '}}),angular.module("admin.component").directive("tooltip",function(){return{restrict:"A",replace:!1,link:function(t,e,n){var o=n.tooltip,i=n.title,r=n.placement||(i?"right":"top");i?e.popover({title:i,content:o,placement:r,trigger:"hover"}):e.tooltip({title:o,placement:r})}}}),function(){var t="post",e="id",n="pid",o="name",i={check:{enable:!0},edit:{enable:!1},data:{key:{name:"name",childs:"childs",title:"name"},simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:"0"}}};angular.module("admin.component").provider("UITreeControl",function(){var r={setDataName:function(t,r,a){i.data.simpleData.idKey=e=t,i.data.simpleData.pIdKey=n=a,i.data.key.name=o=r},setRequestMethod:function(e){t=e},$get:function(r,a,s){var l=function(s){function l(t,e,n,o){s.call(this),this.element=e,this.treeElement=e.find("ul"),this.scope=t,this.attrs=n,this.treeNodeBtnMap={},this.dataMap={},this.transclude=o,this.message=new Message("UITree"),this.initAfters=[],this.init(),this.initEvents()}var c=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),u=Object.defineProperty,p=Object.getOwnPropertyDescriptor,d=function(t,e){for(var n in e)e.hasOwnProperty(n)&&u(t,n,p(e,n));return t},h=Object.setPrototypeOf||function(t,e){return c?t.__proto__=e:u(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},f=Object.create;c||d(l,s);var m={};return null!==s&&h(l,s),l.prototype=f(null!==s?s.prototype:null,{constructor:{value:l,configurable:!0,writable:!0}}),u(l,"prototype",{configurable:!1,enumerable:!1,writable:!1}),m.init=function(){var t=this;this.scope.component=this,this.selectItems=[],this.selectValues=[],this.treeElement.attr("id","uiTree"+(new Date).getTime()),this.callback={beforeClick:function(e,n,o){return t.scope.onBeforeClick({treeNode:n})},onClick:function(e,n,o,i){return t.scope.onClick({treeNode:o})},beforeCheck:function(e,n){return t.scope.onBeforeCheck({treeNode:n})},onCheck:function(n,o,i){t.selectItems.push(i),t.selectValues.push(i[e]),t.scope.onCheck({treeNode:i})}},this.view={addHoverDom:function(e,n){return t._onMouseEnterTreeNode(n)},removeHoverDom:function(e,n){return t._onMouseOverTreeNode(n)}},this.check={enabled:"false"!=this.attrs.checked},this.triggerComplete(this.scope,this.attrs.ref||"$tree",this)},m.initEvents=function(){var t=this;this.scope.$watch("filter",function(e){$.fn.zTree&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){t._filter(e)},100))}),this.scope.onAddHandler=function(e){return t.scope.onAdd($(e.target).parent().data("treeNode"))},this.scope.onEditHandler=function(e){return t.scope.onEdit($(e.target).parent().data("treeNode"))},this.scope.onRemoveHandler=function(e){return t.scope.onRemove($(e.target).parent().data("treeNode"))}},m.build=function(){var t=this;$.fn.ztree?(this.load(),this.scope.onComplete()):a.getScript(""+r+"/assets/js/zTree_v3/js/jquery.ztree.all-3.5.min.js").then(function(){t.load(),t.scope.onComplete()})},m.load=function(e,n){var o=this;return(n=n||this.attrs.url)?a[t](n,e||{}).then(function(t){o.scope.onDataSuccess({result:t}),o.setData(t)})["catch"](function(t){o.scope.onDataFail({result:t}),o.setData(t)}):void(this.dataList?this.setData(this.dataList):this.attrs.manual?this.setData([]):this.message.error("未设置url, 无法请求"))},m.setData=function(t,e){return t=t||[],this.instance&&this.instance.destroy(),$.fn.zTree&&(this.instance=$.fn.zTree.init(this.treeElement,$.extend({},i,this),t),this.expand()),e||(this.dataList=t,this.setDataMap(t)),this.treeNodeBtnMap=[],this},m.setDataMap=function(t){function n(t){if(t){if(Array.isArray(t))return 0;var e;if(s&&s(t),"object"==typeof t&&"function"==typeof(e=t[a]))return s&&s(void 0),e.call(t);if(s&&s(void 0),t+""=="[object Generator]")return t}throw new Error(t+" is not iterable")}var o,i,r,a="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",s="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;this.dataMap={},o=n(t),r=0===o,i=r?t.length:void 0;for(var l;r?i>o:!(i=o.next()).done;)l=r?t[o++]:i.value,this.dataMap[l[e]]=l;return o=i=r=void 0,this},m.expand=function(t){return t=t||this.attrs.expand,"all"==t?this.expandAll(!0):t&&this.expandById(t),this},m.expandById=function(t){var e=this.getTreeNodeById(t);return e&&this.instance&&this.instance.expandNode(e,!0),this},m.expandAll=function(t){this.instance.expandAll(t)},m.getHierarchyData=function(t){var e=[];if(t)for(e.push(t);t=this.getParentData(t);)e.unshift(t);return e},m.getParentData=function(t){return this.dataMap[t[n]]},m.getTreeNodeById=function(t){return this.instance?this.instance.getNodeByParam(e,t,null):void 0},m.cleanChecked=function(){var t=this;$.each(this.selectItems,function(n,o){var i=t.instance.getNodeByParam(e,o.id,null);i&&t.instance.checkNode(i,!1,!0)})},m.appendData=function(t,i,r){var a={};if(a[e]=t,a[o]=i,a[n]=r,void 0!==r&&this.instance){var s=this.instance.getNodeByParam(e,r,null);this.instance.addNodes(s,a)}else this.instance&&this.instance.addNodes(null,a);this.dataList=this.dataList||[],this.dataList.push(a),this.dataMap[t]=a},m.clickItemById=function(t,n){if(this.instance){var o=this.instance.getNodeByParam(e,t,null);o&&this.instance.selectNode(o,n)}},m._filter=function(t){var n=this;if(this.dataList){var i=this.dataList,r={};t&&(t=t.toLowerCase(),i=[],$.each(this.dataList,function(e,r){r[o]&&-1!=r[o].toLowerCase().indexOf(t)&&(i=i.concat(n.getHierarchyData(r)))}),i=i.filter(function(t){return r[t[e]]?!1:(r[t[e]]=1,!0)})),this.setData(i,!0),this.expandAll(!0)}},m._onMouseEnterTreeNode=function(t){var e=this;if(this.treeNodeBtnMap[t.id])this.treeNodeBtnMap[t.id].show();else{var n=this.scope.$parent.$new(),o=this.element.find(">span").clone(!0);n.treeNode=t,this.transclude(n,function(n){o.data("treeNode",t),o.append(n).show(),$("#"+t.tId+"_span").append(o),e.treeNodeBtnMap[t.id]=o})}},m._onMouseOverTreeNode=function(t){this.treeNodeBtnMap[t.id]&&this.treeNodeBtnMap[t.id].hide()},d(l.prototype,m),m=void 0,l}(ComponentEvent);return l}};return r})}(),angular.module("admin.component").directive("uiTree",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{onBeforeClick:"&",onClick:"&",onBeforeCheck:"&",onDataSuccess:"&",onDataFail:"&",onCheck:"&",onComplete:"&",onAdd:"&",onEdit:"&",onRemove:"&",checked:"=",filter:"="},compile:function(){var e=null;return{pre:function(n,o,i,r,a){e=new t(n,o,i,a)},post:function(){e.build()}}},template:'\n                <div class="ui-tree">\n                    <ul class="ztree"></ul>\n                    <span style="display:none">\n                        <span ng-if="component.attrs.onAdd" class="button add" ng-click="onAddHandler($event)"></span>\n                        <span ng-if="component.attrs.onEdit" class="button edit" ng-click="onEditHandler($event)"></span>\n                        <span ng-if="component.attrs.onRemove" class="button remove" ng-click="onRemoveHandler($event)"></span>\n                    </span>\n                </div>\n            '}}),angular.module("admin.component").directive("uiRegionTree",function(t,e){var n=function(t){"use strict";function n(e,n,o,i){t.call(this,e,n,o,i)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;o||a(n,t);var c={};return null!==t&&s(n,t),n.prototype=l(null!==t?t.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),i(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.load=function(){var t=this;e.getDataList(this.attrs.mode||"s").then(function(e){return t.setData(e)})},a(n.prototype,c),c=void 0,n}(t);return{restrict:"E",replace:!0,transclude:!0,scope:{onBeforeClick:"&",onClick:"&",onBeforeCheck:"&",onDataSuccess:"&",onDataFail:"&",onCheck:"&",onComplete:"&",onAdd:"@",onEdit:"@",onRemove:"&",checked:"=",filter:"="},compile:function(){var t=null;return{pre:function(e,o,i,r,a){t=new n(e,o,i,a),t.init(),t.initEvents()},post:function(){t.build()}}},template:'\n                <div>\n                    <ul class="ztree ui-tree"></ul>\n                    <div style="display:none">\n                        <span ng-if="onAdd" class="button add" ng-click="onAddHandler(treeNode)"></span>\n                        <span ng-if="onEdit" class="button edit" ng-click="onEditHandler(treeNode)"></span>\n                        <span ng-if="onRemove" class="button remove" ng-click="onRemoveHandler(treeNode)"></span>\n                    </div>\n                </div>\n            '}}),function(){angular.module("admin",["admin.service","admin.filter","admin.component","ui.router"]).constant("AdminCDN","http://7xllk7.com1.z0.glb.clouddn.com").config(function(t,e,n,o,i,r,a){e.setSuccessHandler(function(t){return 1==t.type?t.data:null}),e.setFailHandler(function(t){return 1!=t.type?t.data:null}),n.setPosition("bottom","right"),o.setUrl(""+t+"/assets/js/ueditor/ueditor.config.js",""+t+"/assets/js/ueditor/ueditor.all.js"),i.setDomain("七牛域名"),i.setTokenUrl("七牛每次上传会调用这个URL, 返回算好的token, 然后才能上传"),i.setMaxSize("1mb"),r.setRequestMethod("post"),r.setResultName("aaData","iTotalRecords"),r.setPageName("pageSize","pageNo"),r.setConfig({}),a.setDataName("id","name","pid"),a.setRequestMethod("post")})}();