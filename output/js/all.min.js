var Event=function(){"use strict";function t(){this.listenerMap={}}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,o=function(t,o){for(var r in o)o.hasOwnProperty(r)&&e(t,r,n(o,r));return t},r={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),r.$on=function(t,e){var n=this.listenerMap[t]||[];n.push(e),this.listenerMap[t]=n},r.$emit=function(t){var e=this.listenerMap[t]||[],n=Array.prototype.slice.call(arguments,1);$.each(e,function(t,e){e.apply(this,n)}.bind(this))},o(t.prototype,r),r=void 0,t}(),ComponentEvent=function(t){"use strict";function e(){null!==t&&t.apply(this,arguments)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t),null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1});var s={};return s.triggerComplete=function(t,e,n){t[e]=n,t.$emit("componentComplete",{ref:e,component:n})},i(e.prototype,s),s=void 0,e}(Event);angular.module("admin.filter",[]),angular.module("admin.service",[]),angular.module("admin.service").provider("Ajax",function(){var t,e,n={setSuccessHandler:function(e){t=e},setFailHandler:function(t){e=t},$get:function(n,o,r){var i=new r("Ajax"),a=function(o,r,a){var l=n.defer();return $.ajax({url:r,cache:!1,data:a,type:o,dataType:"json",success:function(n){var o=t(n),r=e(n);o?l.resolve(o):l.reject(r)},error:function(t,e){var n={403:"没有权限",404:"请求的地址不存在",500:"服务器出现了问题,请稍后重试"}[e];i.error(n||"服务器出现了问题,请稍后重试")}}),l.promise};return{get:function(t,e){return a("GET",t,e)},post:function(t,e){return a("POST",t,e)},message:function(t,e,n,o){return this.post(t,e).then(function(){return i.success(n)})["catch"](function(){return i.error(o)})},add:function(t,e){return this.message(t,e,"添加数据成功","添加数据失败")},update:function(t,e){return this.message(t,e,"更新数据成功","更新数据失败")},remove:function(t,e,n){var o=this;return util.confirm("您确认删除该"+(n.label||"数据")+"吗?").then(function(){return o.message(t,e,"删除数据成功","删除数据失败")})}}}};return n});var PRS$0=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,e){for(var n in e)e.hasOwnProperty(n)&&DP$0(t,n,GOPD$0(e,n));return t};window.toastr?toastr.options={closeButton:!0,debug:!1,positionClass:"toast-top-center",showDuration:"1000",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}:console.error("需要 toastr库 支持, 请导入...");var Message=function(){"use strict";function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}(),MessageProvider=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.setPostion=function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},e.$get=function(){return Message},MIXIN$0(t.prototype,e),e=void 0,t}();angular.module("admin.service").provider("msg",MessageProvider).provider("Message",function(){var t={setPosition:function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},$get:function(){var t=function(){function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}();return t}};return t}),function(){var t={type:"keydown",propagate:!1,inputDisabled:!1,keyCode:!1},n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},o={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},r=function(){"use strict";function r(t,e){this.window=t,this.timeout=e,this.keyboardEvent={}}var i=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s={};return i(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.bind=function(e,n,o){o=$.extend({},t,o),e=e.toLowerCase();var r=o&&o.target?o.target:this.window.document;this.keyboardEvent[e]={callback:this.handler,target:r,event:o.type,opt:o},$(r).bind(o.type,this.handler.bind(this,n,e))},s.unbind=function(t){t=t.toLowerCase();var e=this.keyboardEvent[t];if(delete this.keyboardEvent[t],e){var n=e.event,o=e.target,r=e.callback;$(o).unbind(n,r)}},s.handler=function(t,r,i){var a=this.keyboardEvent[r];if(a.inputDisabled){var l=i.target;if("INPUT"==l.tagName||"TEXTAREA"==l.tagName)return}var s=String.fromCharCode(i.keyCode).toLowerCase();188==code&&(s=","),190==code&&(s=".");for(var c,u=r.split("+"),p=0,m={shift:{wanted:!1,pressed:i.shiftKey?!0:!1},ctrl:{wanted:!1,pressed:i.ctrlKey?!0:!1},alt:{wanted:!1,pressed:i.altKey?!0:!1}},f=0,h=u.length;c=u[f],h>f;f++){switch(c){case"ctrl":case"control":p++,m.ctrl.wanted=!0;break;case"shift":case"alt":case"meta":p++,m[c].wanted=!0}c.length>1?o[c]==code&&p++:a.keyCode?a.keyCode==code&&p++:s==c?p++:n[s]&&e.shiftKey&&(s=n[s],s==c&&p++)}p==u.length&&m.ctrl.pressed==m.ctrl.wanted&&m.shift.pressed==m.shift.wanted&&m.alt.pressed==m.alt.wanted&&m.meta.pressed==m.meta.wanted&&(this.timeout(function(){t(e)},1),a.propagation&&i.stopPropagation())},l(r.prototype,s),s=void 0,r}();angular.module("admin.service").factory("Shortcut",r)}(),angular.module("admin.service").factory("Util",function($rootScope,$compile,$filter,$parse,$q){return{dateFormatStr:function(t,e){return $filter("date")(t||new Date,e)},dateTimeStr:function(t){return this.dateFormatStr(t,"yyyy-MM-dd HH:mm:ss")},dateStr:function(t,e){return this.dateFormatStr(t,"yyyy-MM-dd")},timeStr:function(t,e){return this.dateFormatStr(t,"HH:mm:ss")},animate:function(t,e,n){n=void 0!==n?n:!0,t.addClass(e+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n&&$(this).removeClass(e+" animated")})},setTag:function(t,e,n){n.$emit("ui.completeInit",t,e)},setValue:function(t,e,n){var o=e.split(".");if(o.length>1){var r=o.splice(o.length-1,o.length).join(""),i=o.join("."),a=$parse(i)(t);a[r]=n}else t[e]=n},getValue:function(t,e){return $parse(e)(t)},toJSON:function(str){return eval("("+str+")")},toScope:function(t,e){return e=e||$rootScope,$.extend(e.$new(),t||{})},format:function(t,e){var n=$compile(t)(e);return n},confirm:function(t){if(bootbox){var e=$q.defer();return bootbox.confirm(t,function(t){t?e.resolve():e.reject()}),e.promise}throw new Error("需要 bootbox库 支持, 请导入....")},checkValuesUseRules:function(t,e){var n=$("<form></form>"),o=[];$.each(t,function(t,e){var r=$("<input>").attr("name",t).val(e);o.push(r),n.append(r)});var r=n.validate({rules:e,debug:!0,submitHandler:function(){return!1}}),i=null;return $.each(o,function(t,e){return r.check(e)?void 0:(i=e.attr("name"),!1)}),i?r.errorMap[i]:null},checkValueUseRules:function(t,e,n){var o={},r={};return o[t]=e,r[t]=n,this.checkValuesUseRules(o,r)}}}),function(){var t=function(){"use strict";function t(t){this.$parse=t}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,o=function(t,o){for(var r in o)o.hasOwnProperty(r)&&e(t,r,n(o,r));return t},r={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),r.set=function(t,e,n){var o=this.$parse(e);o.assign(t,n),t.$$phase||t.$apply()},r.get=function(t,e){var n=this.$parse(e);return n(t)},o(t.prototype,r),r=void 0,t}();angular.module("admin.service").service("ValueService",t)}();var ComponentEvent=function(t){"use strict";function e(){null!==t&&t.apply(this,arguments)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t),null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1});var s={};return s.triggerComplete=function(t,e,n){t[e]=n,t.$emit("componentComplete",{ref:e,component:n})},i(e.prototype,s),s=void 0,e}(Event);angular.module("admin.component",[]).service("componentHelper",function(t){this.tiggerComplete=function(t,e,n){t[e]=n,t.$emit("componentComplete",{ref:e,component:n})},this.getComponentRef=function(t,e){var n=t.attr("ref")||e;return n},this.getTemplate=function(e,n){var o=t.get(e),r=Handlebars.compile(o);return r(n)},this.setTemplate=function(e,n){t.put(e,n)}}),angular.module("admin.component").directive("uiFormItem",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,o,r){e.find(">div").append(r(t)),e.removeAttr("name").removeAttr("model")},template:function(n,o){var r=(o.col||e).split(":");return t.getTemplate("tpl.form.item",$.extend({leftCol:r[0],rightCol:r[1]},o))}}}),angular.module("admin.component").constant("defaultCol","2:10").directive("uiForm",function(t){return{restrict:"E",replace:!0,scope:!1,transclude:!0,compile:function(){var e=null;return{pre:function(n,o,r,i,a){e=new t(n,o,r,a(n))},post:function(){e.layout(),setTimeout(function(){e.initValidation()},300)}}},templateUrl:"tpl.form"}}),function(){jQuery.validator&&(jQuery.validator.addMethod("url",function(t,e){var n=/^(http|https):\/\//;return this.optional(e)||n.test(t)},"链接地址必须以http://或者https://开头！"),jQuery.validator.addMethod("dateRange",function(t,e,n){var o=moment(t),r=moment($(this.currentForm).find('[name="terminatetime"]').val());return o.isBefore(r)},"时间范围不正确"),jQuery.validator.addMethod("maxlength",function(t,e,n){var o=0;return n&&n>0&&(o=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length<=o},"请输入一个长度最多是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("minlength",function(t,e,n){var o=0;return n&&n>0&&(o=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length>=o},"请输入一个长度最少是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("rangelength",function(t,e,n){var o=0,r=0;n&&n[0]>0&&(o=n[0]),n&&n[1]>0&&(r=n[1]);var i=t.replace(/[^\x00-\xff]/gi,"--").length;return r>=i&&i>=o},"请输入一个长度介于 {0} 和 {1} 之间的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("mobile",function(t,e){var n=t.length,o=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(e)||11==n&&o.test(t)},"手机号码不正确"),jQuery.validator.addMethod("pwdRule",function(t,e){var n=/^(?![0-9]+$)(?![a-z]+$)(?![0-9a-z]+$)(?![\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]+$)[0-9A-Za-z\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]{8,16}$/;return this.optional(e)||n.test(t)},"密码由8-16位字母、数字和特殊字符组成，且至少有一个大写字母或者特殊字符！"))}(jQuery),angular.module("admin.component").directive("uiSearchForm",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(n,o,r){var i=e.getComponentRef(o.parent().find(".ui-table"),"$table"),a=new t(n,o,r,i),l=r.ref||"$searchForm";n[l]=a,e.tiggerComplete(n,l,a)},template:function(t,n){var o=n.column||"11:1",r=n.ref||"$searchForm",i=o.split(":");return e.getTemplate("tpl.searchform",{leftCol:i[0],rightCol:i[1],ref:r})}}});var UIFormControl=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.isSearchControl=e.parents(".ui-search-form").length>0,this.formPrefix=this.isSearchControl?"$search":"$form",this.formResetEventName=this.isSearchControl?"uisearchform.reset":"uiform.reset",this.init(),this.initEvents(),this.cleanElement(),this.render()}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){this.message=new Message("Input"),this.scope.lcol=void 0!==this.scope.lcol?this.scope.lcol:2,this.scope.rcol=void 0!==this.scope.rcol?this.scope.rcol:10,this.triggerComplete(this.scope,this.attrs.ref||this.formPrefix+this.className,this)},s.initEvents=function(){var t=this;this.scope.$on(this.formResetEventName,function(){return t.reset()})},s.cleanElement=function(){this.element.removeAttr("name").removeAttr("model").removeAttr("readonly").removeAttr("disabled")},s.attr=function(t,e){return this.formEl?t&&e?(this.formEl.prop(t,e),this):this.formEl.prop(t):void 0},s.val=function(t){return this.formEl?void 0!==t?(this.formEl.val(t),this):this.formEl.val():void 0},s.destroy=function(){delete this.listenerMap,this.reset()},s.change=function(t){this.$on("change",t)},s.render=function(){},s.reset=function(){this.formEl&&this.formEl.val("")},i(e.prototype,s),s=void 0,e}(ComponentEvent);angular.module("admin.component").factory("uiFormControl",function(){return UIFormControl}),function(){angular.module("admin.component").factory("UIDateControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Date",this.formEl=n.find("input"),this.dateMode=o.mode?-1!=o.mode.indexOf("date"):!0,this.timeMode=o.mode?-1!=o.mode.indexOf("time"):!0,t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this);var e=[];this.dateMode&&e.push("yyyy-MM-dd"),this.timeMode&&e.push("HH:mm:ss"),this.format=e.join(" ")},s.initEvents=function(){t.prototype.initEvents.call(this)},s.render=function(){this.formEl.datetimepicker({language:"zh-CN",pickDate:this.dateMode,useCurrent:!1,pickTime:this.timeMode,useSeconds:this.timeMode})},i(e.prototype,s),s=void 0,e}(UIFormControl);return t})}(),function(){var t={"今天":[moment().startOf("day"),moment().endOf("day")],"昨天":[moment().subtract("days",1).startOf("day"),moment().subtract("days",1).endOf("day")],"最近7天":[moment().subtract("days",6).startOf("day"),moment().endOf("day")],"最近30天":[moment().subtract("days",29).startOf("day"),moment().endOf("day")],"当前月":[moment().startOf("month"),moment().endOf("month")],"上个月":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"最近六个月":[moment().subtract("days",182).startOf("day"),moment().endOf("day")]},e={opens:"right",minDate:moment().subtract("year",40).startOf("year"),maxDate:moment().add("year",10).endOf("year"),showDropdowns:!0,showWeekNumbers:!1,timePickerIncrement:1,timePicker12Hour:!1,buttonClasses:["btn","btn-sm"],applyClass:"green",cancelClass:"default",separator:" - ",locale:{applyLabel:"确定",cancelLabel:"取消",resetLabel:"重置",fromLabel:"从",toLabel:"至",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}};angular.module("admin.component").factory("UIDateRangeControl",function(){var n=function(n){"use strict";function o(t,e,o){this.className="DateRange",this.startDateElement=e.find(".input-group").find("input:first"),this.endDateElement=e.find(".input-group").find("input:last"),this.hasDefaultDateRange=!!o.range,this.isDateTimeMode="date"!==o.mode||void 0!==o.time,this.format=o.format||(this.isDateTimeMode?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"),this.limit=o.limit,n.call(this,t,e,o)}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;r||l(o,n);var u={};return null!==n&&s(o,n),o.prototype=c(null!==n?n.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),i(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){n.prototype.init.call(this);var o=t[this.attrs.range]||[];this.defaultStartDate=this.attrs.fromValue||o[0],this.defaultEndDate=this.attrs.toValue||o[1],this.config=$.extend({},e,{ranges:t,timePicker:this.isDateTimeMode,format:this.format}),this.limit&&(this.config.dateLimit={days:this.limit}),this.hasDefaultDateRange&&(this.config.startDate=this.defaultStartDate,this.config.endDate=this.defaultEndDate)},u.render=function(){var t=this;this.element.find("div").daterangepicker(this.config,function(e,n){e=e?e.format(t.format):"",n=n?n.format(t.format):"",t.val(e,n),t.scope.change({startVal:e,endVal:n})})},u.reset=function(){this.startDateElement.val(""),this.endDateElement.val("")},u.val=function(t,e){return t&&this.startDateElement.val(t),e&&this.endDateElement.val(e),t||e?this:[this.startDateElement.val(),this.endDateElement.val()]},l(o.prototype,u),u=void 0,o}(UIFormControl);return n})}(),function(){angular.module("admin.component").factory("UIFormControl",function(){var t=function(t){"use strict";function e(e,n,o,r){this.className="form",this.action=this.attrs.action.replace(/#/g,""),this.formItems=r,this.formControlMap={},t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){var e=this;t.prototype.init.call(this),this.scope.$on("componentComplete",function(t,n){e.formControlMap[n.name]=n.component})},s.initEvents=function(){t.prototype.initEvents.call(this)},s.changeValidateRule=function(t,e){var n=this.element.data().validator;if(n){var o=n.settings.rules[t];n.settings.rules[t]=$.extend(o,e)}},s.startValidate=function(){this.element.valid()},i(e.prototype,s),s=void 0,e}(t);return t}).constant("uiFormValidateConfig",{errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{},highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},success:function(t,e){t.closest(".form-group").removeClass("has-error")},errorPlacement:function(t,e,n){$(t).appendTo($(e).parent())}}).factory("uiFormFactory",function(t,e,n,o){var r=(new t("Form"),function(t,e,n,r){this.column=n.column,this.formItems=r,this.formControlMap={},this.action=n.action.replace(/#/g,""),this.formName=n.formName,o.apply(this,arguments)});return r.prototype=$.extend(new o,{_init:function(){this.scope.$on("componentComplete",function(t,e){e&&e.name&&(this.formControlMap[e.name]=e)}.bind(this))},changeValidateRule:function(t,e){var n=this.element.data().validator;if(n){var o=n.settings.rules[t];n.settings.rules[t]=$.extend(o,e)}},startValidate:function(){this.element.valid()},addFormItem:function(t){this.formItems.push(t),this.layout()},formItemVal:function(t,e){var n=this.element.find('[name="'+t+'"]');return e?void n.val(e):n.val()},layout:function(t){if(t=parseInt(void 0!==t?t:this.column),t>1){var e=12/t,n=this.element.find(" > div"),o=[];n.html();var r,i;for(r=0;r<this.formItems.length;r++)i=this.formItems[r],void 0!==i.innerHTML&&("hidden"==i.type?n.append(i):o.push(i));var a=function(t,e){n.append(e)};for(r=0;r<o.length;r+=t){for(var l=$("<div/>").addClass("row"),s=r,c=r,u=[];s+t>c&&o[c];){if(i=o[c],-1!=i.className.indexOf("row"))u.push(i),r++,s++;else{var p=$("<div/>").addClass("col-md-"+e);p.append(o[c]),l.append(p)}c++}n.append(l),$.each(u,a)}}else this.element.find(" > div").append(this.formItems)},initValidation:function(){this.action?$.getJSON("/validator?action="+this.action,function(t){this.setRules(t)}.bind(this)):this.formName?$.getJSON("/validator?cm="+this.formName,function(t){this.setRules(t)}.bind(this)):this.attrs.validateUrl?$.getJSON(this.attrs.validateUrl,function(t){this.setRules(t)}.bind(this)):this.element.submit(this._submit.bind(this))},setRules:function(t){var e={};this.$emit("uiform.rules",t,e),this.element.validate($.extend({},n,{rules:t,messages:e,submitHandler:this._submit.bind(this)}))},formData:function(t){var e=this.element.serializeArray();if(t===!0){var n={};$.each(e,function(t,e){var o=e.name,r=e.value;n[o]?$.isArray(n[o])?n[o].push(r):n[o]=[n[o],r]:n[o]=r}),e=n}return e},loadData:function(t){var n=this;return e.post(t).then(function(t){n.setData(t)})},setData:function(t){for(var e in t){var n=this.formControlMap[e];n&&n.val(t[e])}},submit:function(t){this.$on("uiForm.doSubmit",t)},_submit:function(t){return this.action?e.post(this.action,this.formData(t)).then(function(){this.$emit("uiForm.completeSubmit",this)}.bind(this)):this.$emit("uiForm.doSubmit",this.formData({})),!1},reset:function(){this.scope.$broadcast("uiform.reset")}}),r})}(jQuery),function(){angular.module("admin.component").factory("UIInputControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Input",this.formEl=n.find("input"),t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;return n||i(e,t),null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e}(UIFormControl);return t})}(),angular.module("admin.component").factory("uiRegionHelper",function(t,e){var n,o,r,i=new e("UiRegionHelper"),a=[],l=!1,s=!1,c="http://localhost:63342/AngularAdmin/output/assets/js/China_Region_Last.js",u=!1,p=!1,m="086",f=function(e,n,o,i){if(!i||void 0!==e){var a=this,l=t.defer();return this.getTreeData().then(function(){var t=r[e].child;l.resolve(t),o&&a.setHtml(o,t)},function(){l.reject([])}),l.promise}};return{getDataMap:function(){var e=t.defer();return s?e.resolve(n):l?a.push(e):(l=!0,$.getScript(c,function(){e.resolve(n=window.CHINA_REGION),$.each(a,function(t,e){e.resolve(n)}),a=[],s=!0},function(){l=!1,e.reject({})})),e.promise},getDataList:function(e){e=e||"s";var o=t.defer();return this.getTreeData().then(function(){var t=[];$.each(n,function(n,o){var i=!1;switch(e){case"p":i=o[1]==m;break;case"c":var a=r[o[1]];if(a&&a.id==m)i=!0;else if(n==m)i=!0;else{var l=r[a.pid];i=l?l.id==m:!1}break;case"s":i=!0}i&&t.push({id:n,name:o[0],pid:o[1]})}),o.resolve(t),u=!0},function(){o.reject({})}),o.promise},getDatasByMode:function(e){e=e||"s";var n=t.defer();return this.getTreeData().then(function(){var t=[];$.each(r,function(n,o){o.mode==e&&t.push(o)}),n.resolve(t)},function(){n.reject({})}),n.promise},getTreeData:function(){var e=t.defer();return p?e.resolve(o):this.getDataMap().then(function(t){o={"086":{id:m,text:"全国",child:[]}},r={"086":{id:m,text:"全国",child:[]}},$.each(t,function(t,e){var n={id:t,text:e[0],child:[],pid:e[1],mode:null};t!=m&&(r[t]=n),r[e[1]]&&(r[e[1]].child.push(n),e[1]==m?(n.mode="p",o[m].child.push(n)):n.mode=r[e[1]].pid==m?"c":"s")}),e.resolve(o),p=!0},function(){e.reject({})}),e.promise},getHtml:function(t){var e=[];return $.each(t,function(t,n){var o=n.id;e.push('<option value="'+o+'">'+n.text+"</option>")}),e.join("")},setHtml:function(t,e){t.html(this.getHtml(e)).change()},getProvince:function(t){return f.call(this,m,"请选择省",t,!1)},getCity:function(t,e){return f.call(this,t,"请选择市",e,!0)},getStreet:function(t,e){return f.call(this,t,"请选择区",e,!0)},getById:function(e){var n=t.defer();return this.getTreeData().then(function(){n.resolve(r[e])},function(){n.reject({})}),n.promise},htmlById:function(e,n,o,a){var l=this,s=t.defer();return this.getById(e).then(function(t){if(t){var c,u,p,m,f;switch(t.mode){case"p":c=e,l.getProvince(a),l.getCity(c,o),s.resolve([null,null,t]);break;case"c":m=r[t.pid],c=m.id,u=e,l.getProvince(a),l.getCity(m.id,o),l.getStreet(u,n),s.resolve([null,t,m]);break;case"s":f=r[t.pid],m=r[f.pid],c=m.id,u=f.id,p=e,l.getProvince(a),l.getCity(m.id,o),l.getStreet(f.id,n),s.resolve([t,f,m])}setTimeout(function(){c&&a&&a.select2("val",c),u&&o&&o.select2("val",u),p&&n&&n.select2("val",p)},500)}else i.error("当前地址数据有误, 请重新编辑保存"),logger.error("["+e+"]"),l.getProvince(a),s.reject()}),s.promise}}}),function(){angular.module("admin.component").factory("UIRegionControl",function(t){var e=function(e){"use strict";function n(t,n,o){this.className="Region",this.$inputDom=n.find("input:eq(0)"),this.$pDom=n.find('[name="province"]'),this.$cDom=n.find('[name="city"]'),this.$sDom=n.find('[name="area"]'),this.$aDom=n.find('[name="address"]'),this.valueType=o.valueType||"text",e.call(this,t,n,o)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,i(e,n));return t},l=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;o||a(n,e);var c={};return null!==e&&l(n,e),n.prototype=s(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),r(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){switch(e.prototype.init.call(this),this.attrs.mode){case"p":this.$cDom.hide(),this.$sDom.hide(),this.$aDom.hide();break;case"c":this.$sDom.hide(),this.$aDom.hide();break;case"s":this.$aDom.hide()}},c.initEvents=function(){var n=this;e.prototype.initEvents.call(this),this.$pDom.change(function(e){e.val?(t.getCity(e.val).then(function(t){n.$cDom.select2(n.toCityData(t)),n.$sDom.select2(n.toStreetData())}),n.$pDom.val(e.added[n.valueType]),n.$inputDom.val(e.val),n._change("p")):n.reset()}),this.$cDom.change(function(e){e.val?(t.getStreet(e.val).then(function(t){n.$sDom.select2(n.toStreetData(t))}),n.$cDom.val(e.added[n.valueType]),n.$inputDom.val(e.val),n._change("c")):(n.$sDom.select2(n.toStreetData()),n.$cDom.val(""),n.$inputDom.val(""))}),this.$sDom.change(function(t){t.val?(n.$sDom.val(t.added[n.valueType]),n.$inputDom.val(t.val),n._change("s")):(n.$sDom.val(""),n.$inputDom.val(""))})},c.render=function(){var n=this;e.prototype.render.call(this),/^\d+$/g.test(this.codeValue)?(t.htmlById(this.codeValue).then(function(e){return e.concat(t.getProvince())}).then(function(e,o,r,i){if(n.$pDom.select2(n.toProvinceData(i)),e)return n.$pDom.select2("val",e.id),n.$pDom.val(e[self.valueType]),[o,r,t.getCity(e.id)];throw n.$cDom.select2(n.toCityData([])),n.$sDom.select2(n.toStreetData([])),new Error}).then(function(e,o,r){if(n.$cDom.select2(self.toCityData(r)),e)return n.$cDom.select2("val",e.id),n.$cDom.val(e[self.valueType]),[o,t.getStreet(e.id)];throw n.$sDom.select2(n.toStreetData([])),new Error}).then(function(t,e){n.$sDom.select2(self.toStreetData(e)),t&&(self.$sDom.select2("val",t.id),self.$sDom.val(t[self.valueType]))}),this.$inputDom.val(this.codeValue)):t.getProvince().then(function(t){n.$pDom.select2(n.toProvinceData(t)),n.$cDom.select2(n.toCityData([])),n.$sDom.select2(n.toStreetData([]))})},c.toProvinceData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},c.toCityData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},c.toStreetData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},c.reset=function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())},c._change=function(t){this.scope.model=this.$inputDom.val();var e=this.scope.mode,n=this.$pDom.val(),o=this.$cDom.val(),r=this.$sDom.val();this.scope.change({mode:t,val:e,p:n,c:o,s:r})},a(n.prototype,c),c=void 0,n}(UIFormControl);return e})}(),angular.module("admin.component").factory("uiRegionService",function(t,e,n){var o=(new e("Region"),function(t,e,o){var r=e.find("input");this.$inputDom=$(r[0]),this.$pDom=$(r[1]),this.$cDom=$(r[2]),this.$sDom=$(r[3]),this.$aDom=$(r[r.length-1]),this.codeValue=o.sValue,this.autoWidth=o.autoWidth,this.mode=o.mode||"s",this.valueType=o.valueType||"text",n.apply(this,arguments)});return o.prototype=$.extend(new n,{_init:function(){var e=this;if(/^\d+$/g.test(this.codeValue)){var n,o,r;t.htmlById(this.codeValue).then(function(e){return n=e[2],o=e[1],r=e[0],t.getProvince()}).then(function(o){return e.$pDom.select2(e.toProvinceData(o)),n?(e.$pDom.select2("val",n.id),e.$pDom.val(n[e.valueType]),t.getCity(n.id)):null}).then(function(n){return n?(e.$cDom.select2(e.toCityData(n)),o?(e.$cDom.select2("val",o.id),e.$cDom.val(o[e.valueType]),t.getStreet(o.id)):null):void 0}).then(function(t){t&&(e.$sDom.select2(e.toStreetData(t)),r&&(e.$sDom.select2("val",r.id),e.$sDom.val(r[e.valueType])))}),this.$inputDom.val(this.codeValue)}else t.getProvince().then(function(t){e.$pDom.select2(e.toProvinceData(t))});this.attrs.aValue&&this.$aDom.val(this.attrs.aValue),this.initMode(),this.initEvent()},initMode:function(){var t=0;switch(this.attrs.mode){case"p":t=120,this.$pDom.select2(this.toProvinceData()),this.$cDom.remove(),this.$sDom.remove();break;case"c":t=240,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.remove();break;default:t=360,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.select2(this.toStreetData())}this.autoWidth&&this.element.width(t+60)},initEvent:function(){var e=this;this.$pDom.change(function(n){n.val?(t.getCity(n.val).then(function(t){e.$cDom.select2(e.toCityData(t)),e.$sDom.select2(e.toStreetData())}),this.$pDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):this.reset();

}.bind(this)),this.$cDom.change(function(n){n.val?(t.getStreet(n.val).then(function(t){e.$sDom.select2(e.toStreetData(t))}),this.$cDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):(this.$sDom.select2(this.toStreetData()),this.$cDom.val(""),this.$inputDom.val(""))}.bind(this)),this.$sDom.change(function(t){t.val?(this.$sDom.val(t.added[this.valueType]),this.$inputDom.val(t.val)):(this.$sDom.val(""),this.$inputDom.val(""))}.bind(this))},toProvinceData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},toCityData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},toStreetData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},reset:function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())}}),function(t,e,n,r,i){return new o(t,e,n,r,i)}}),angular.module("admin.component").factory("uiSearchFormFactory",function(t,e){var n=new t("SearchForm"),o=function(t,n,o,r){this.elementContainer=n.find(".row > div:eq(0)"),this.tableId=r,e.apply(this,arguments)};return o.prototype=$.extend(new e,{_init:function(){$(document).keydown(function(t){13==t.keyCode&&this.search()}.bind(this)),this.element.submit(function(t){return t.preventDefault(),!1})},addFormItem:function(t){this.elementContainer.append(t)},formData:function(){return this.element.serializeArray()},formParamData:function(){return this.element.serialize()},search:function(){var t=this.formData();this.$emit("uisearchform.doSubmit",t),this.scope[this.tableId]?this.scope[this.tableId].search(t):n.error("为发现ref为["+this.tableId+"]的组件, 无法调用查询")},submit:function(t){this.$on("uisearchform.doSubmit",t)},reset:function(){this.scope.$broadcast("uisearchform.reset")}}),o}),function(){angular.module("admin.component").factory("UISelectControl",function(t){var e=function(e){"use strict";function n(t,n,o){this.className="Select",this.formEl=n.find("Select"),e.call(this,t,n,o)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,i(e,n));return t},l=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;o||a(n,e);var c={};return null!==e&&l(n,e),n.prototype=s(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),r(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){e.prototype.init.call(this),this.attrs.multiple&&this.formEl.prop("multiple","multiple"),this.defaultValue=this.scope.value||this.formEl.find("option:eq(0)").val()||"",!this.scope.model&&this.defaultValue&&(this.scope.model=this.defaultValue,this.val(this.defaultValue)),this.attrs.url&&this.load(this.attrs.url)},c.initEvents=function(){var t=this;e.prototype.initEvents.call(this),this.scope.$watch("model",function(e){void 0!==e?(t.val(e),t.scope.change()):t.val(t.defaultValue)}),this.formEl.change(function(){t.scope.model=t.formEl.val(),t.scope.$apply()})},c.render=function(){this.init?this.formEl.selectpicker("refresh"):(this.formEl.selectpicker({iconBase:"fa",tickIcon:"fa-check"}),this.init=!0)},c.val=function(t){e.prototype.val.call(this,t),t&&this.render()},c.load=function(e,n,o){var r=this;return t.get(e).then(function(t){if(r.setData(t,o),n)r.val(n);else{var e=self.val(),i=/^\?.+:(.+)\s+\?$/.exec(e);r.val(i?i[1]:e)}})},c.setData=function(t,e,n,o){var r=this;n=n||this.scope.dataKeyName,o=o||this.scope.dataValueName,e&&this.formEl.html(""),_.isArray(t)?$.each(t,function(t,e){r.formEl.append(r.toOption(e,n,o))}):$.each(t,function(t,e){var i=r.toOptionGroup(t);$.each(e,function(t,e){i.append(r.toOption(e,n,o))}),r.formEl.append(i)}),this.reset()},c.toOption=function(t,e,n){var o=_.isString(t),r=o?t:t[e],i=o?t:t[n],a=$("<option/>").attr("value",r).html(i),l=this.scope.render(a,t);return l&&a.data("content",l),a.data("item",t),a},c.toOptionGroup=function(t){var e=$("<optgroup/>").attr("label",t);return e},a(n.prototype,c),c=void 0,n}(UIFormControl);return e})}(),function(){angular.module("admin.component").factory("UISpinnerControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Spinner",this.formEl=n.find("input"),t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this)},s.initEvents=function(){var e=this;t.prototype.initEvents.call(this),this.element.on("mousedown",".spinner-up",function(){return e._changeValue(!0)}),this.element.on("mousedown",".spinner-down",function(){return e._changeValue(!1)}),this.scope.$watch("model",function(t){var n=e._checkValue(t);n!=t&&(e.scope.model=n)})},s._changeValue=function(t){var e=1*(this.attrs.step||1),n=this.val();n=void 0!==n?parseInt(n):this.attrs.value,n+=e*(t?1:-1),n=this._checkValue(n),this.scope.model=n,this.scope.$apply(),this.scope.change({val:n})},s._checkValue=function(t){var e=1*(this.attrs.min||0),n=1*(this.attrs.max||Number.MAX_VALUE);return t>n&&(t=n),e>t&&(t=e),t},i(e.prototype,s),s=void 0,e}(UIFormControl);return t})}(),function(){angular.module("admin.component").factory("UISwitchControl",function(){var t=function(t){"use strict";function e(e,n,o){this.className="Switch",this.formEl=n.find("input"),this.checkEl=this.formEl[0],t.call(this,e,n,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this),this.onValue=this.attrs.onValue||"1",this.offValue=this.attrs.offValue||"0",this.onText=this.attrs.onText||"开",this.offText=this.attrs.offText||"关"},s.initEvents=function(){t.prototype.initEvents.call(this)},s.render=function(){var t=this;if(this.formEl.bootstrapSwitch({size:"normal",onText:this.onText,offText:this.offText,onSwitchChange:function(e,n){t._change(n)}}),this.formEl.bootstrapSwitch("state",this.attrs.value==this.onValue),this.checkEl.checked=!0,this.scope.$watch("model",function(e){e!=t.val()&&t.val(e)}),!this.scope.model){var e=this.offValue;this.scope.model=e}},s.disabled=function(t){this.formEl.bootstrapSwitch("disabled","true"==t)},s.val=function(t){return void 0!==t?(this.formEl.bootstrapSwitch("state",t==this.onValue),this):this.formEl.val()},s._change=function(t){var e=t?this.onValue:this.offValue;this.val(e),this.checkEl.checked=!0,this.scope.model=e,this.scope.change({val:e})},i(e.prototype,s),s=void 0,e}(UIFormControl);return t})}(),function(){angular.module("admin.component").factory("UITagControl",function(t,e,n){var o=function(e){"use strict";function o(t,n,o){this.className="RemoteSelect",this.selectValues=[],this.selectItems=[],e.call(this,t,n,o)}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;r||l(o,e);var u={};return null!==e&&s(o,e),o.prototype=c(null!==e?e.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),i(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){e.prototype.init.call(this)},u.initEvents=function(){var t=this;e.prototype.initEvents.call(this),this.element.on("select2-selecting",function(e){return e.object.isNew&&"false"==t.attrs.editable?!1:(t.selectValues.push(e.val),t.selectItems.push(e.object),t.scope.model=t.selectValues,t.scope.change({isAdd:!0,val:e.val,item:e.object,vals:t.selectValues,items:t.selectItems}),!0)}),this.element.on("select2-removing",function(e){t.selectValues=$.grep(t.selectValues,function(t){return t!=e.val}),t.selectItems=$.grep(t.selectItems,function(t){return t!=e.choice}),t.scope.model=t.selectValues,t.scope.change({isAdd:!1,val:e.val,item:e.object,vals:t.selectValues,items:t.selectItems})})},u.render=function(){e.prototype.render.call(this);var t=this._getConfig();this.element.find("input").select2(t)},u._getConfig=function(){var t={openOnEnter:!1,multiple:!0,createSearchChoice:$.proxy(this._createSearchChoice,this),formatResult:$.proxy(this._formatResult,this),formatSelection:$.proxy(this._formatResult,this),id:$.proxy(this._formatId,this),initSelection:$.proxy(this._initSelection,this),query:$.proxy(this._filterData,this),formatNoMatches:function(){return"没有符合的数据"},formatInputTooShort:function(t,e){return"输入"+e+"个字符后开始查询"},formatSelectionTooBig:function(t){return"最大可以选中"+t+"个数据"},formatSearching:function(){return"正在加载数据..."},formatAjaxError:function(){return"加载数据失败"}};return this.attrs.minmum&&(t.minimumInputLength=this.attrs.minmum),this.attrs.maxSize&&(t.maximumSelectionSize=this.attrs.maxSize),t.closeOnSelect=!1,t},u.useParams=function(t){return $.extend(this.params,t||{})},u.loadData=function(){var e=this,o=t.defer();return this.datas?o.resolve(this.datas):n.get(this.attrs.url,this.useParams()).then(function(t){e.datas=t?t.aaData||t:[],$.each(e.datas,function(t,e){var n=[];for(var o in e)n.push(o+"="+(e[o]||"").toString().toLowerCase());e.__string=n.join(",")}),o.resolve(e.datas)}),o.promise},u._createSearchChoice=function(t,e){return 0===$(e).filter(function(){return 0===this.name.indexOf(t)}).length?e.length<=10?{id:t,name:t,isNew:!0}:null:void 0},u._filterData=function(t){var e=this,n=(this.attrs.search||"").toLowerCase().split(","),o=t.term.toLowerCase();this.loadData().then(function(r){var i=[];$.each(r,function(r,a){var l=!1;t.init?l=e.attrs.multi?-1!=t.term.indexOf(e.formatId(a)):e.formatId(a)==t.term:0===n.length||""===n[0]?l=-1!=a.__string.indexOf(o):$.each(n,function(t,e){l=-1!=(a[e]||"").toString().toLowerCase().indexOf(o)}),l&&i.push(a)}),t.callback({results:i})})},u._initSelection=function(t,e){var n=this,o=function(t){e(void 0!==n.attrs.multi?t.results:t.results[0])};n.isFocusInit?(n.isFocusInit=!1,n.isInit=!1,o({results:n.selectItems})):void 0!==t.val()?(n.isInit=!1,this.filterData({term:t.val(),init:!0,callback:o})):n.isInit&&(n.isInit=!1,o({results:[]}))},u._formatId=function(t){return t[this.attrs.valueName||"id"]},u._formatResult=function(t,e,n){return t[this.attrs.labelName||"name"]},u.reset=function(){this.selectItems=[],this.selectValues=[],this.inputElement.select2("val","")},u.val=function(t){if(!t)return this.attrs.multi?this.selectValues:this.selectValues[0];this.inputElement.select2("val",t),this.selectValues=this.attrs.multi?t:[t];var e=","+this.selectValues.join(",")+",",n=this;this.loadData().then(function(t){n.selectItems=$.grep(t,function(t){return-1!=e.indexOf(","+n.formatId(t)+",")})})},u.item=function(){return this.attrs.multi?this.selectItems:this.selectItems[0]},l(o.prototype,u),u=void 0,o}(UIFormControl);return o})}(),angular.module("admin.component").directive("uiFormDate",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change({val: model})" ng-model="model" readonly="true"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormDateRange",function(t){return{restrict:"E",replace:!0,link:function(e,n,o){new t(e,n,o)},scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",fromModel:"=",toModel:"=",change:"&",help:"@"},template:'\n               <div class="form-group">\n                   <label class="col-md-{{lcol}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol}}">\n                       <div class="input-date-range input-inline">\n                           <div class="input-group">\n                               <input type="text" class="form-control" name="{{fromName}}" ng-model="fromModel" value="{{fromValue}}" readonly>\n                               <span class="input-group-addon">至</span>\n                               <input type="text" class="form-control" name="{{toName}}" ng-model="toModel" value="{{toValue}}" readonly>\n                           </div>\n                       </div>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormInput",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@",type:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="{{type || \'text\'}}" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change({val: model})" ng-model="model"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormTextarea",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,o,r){var i=e.find("textarea");t.$on("uiform.reset",function(){i.val("")}),i.html(r().text()),e.removeAttr("name").removeAttr("model").removeAttr("rows").removeAttr("cols")},template:function(n,o){var r=(o.col||e).split(":");return t.getTemplate("tpl.form.textarea",$.extend({leftCol:r[0],rightCol:r[1]},o))}}}),angular.module("admin.component").directive("uiFormRegion",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@",type:"@",mode:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}} ui-form-region">\n                        <input type="hidden" name="{{name}}"/>\n                        <input type="text" class="input-small form-control input-inline" name="province"/>\n                        <input type="text" class="input-small form-control input-inline" name="city"/>\n                        <input type="text" class="input-small form-control input-inline" name="area"/>\n                        <input type="text" class="input-medium form-control input-inline" name="address" ng-value="{{aValue}}" placeholder="请输入详细地址" />\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormSelect",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{lcol:"@",rcol:"@",label:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@",multiple:"@",render:"&"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                    <label class="col-md-{{lcol}} control-label">{{label}}</label>\n                    <div class="col-md-{{rcol}}">\n                        <select class="form-control show-tick" data-live-search="true" data-style="{{buttonClass}}" name="{{name}}" title="{{placeholder || \'请选择\'}}" ng-transclude></select>\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiFormTag",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",name:"@",model:"=",placeholder:"@",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control" name="{{name}}"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormSpinner",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <div class="input-group" style="width:150px;">\n                           <div class="spinner-buttons input-group-btn">\n                               <button type="button" class="btn spinner-up blue"><i class="fa fa-plus"></i></button>\n                           </div>\n                           <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" readonly="true"/>\n                           <div class="spinner-buttons input-group-btn">\n                               <button type="button" class="btn spinner-down red"><i class="fa fa-minus"></i></button>\n                           </div>\n                       </div>\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                    </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormSwitch",function(t){return{restrict:"E",scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n               <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                        <input type="checkbox" class="form-control {{css}}" name="{{name}}" />\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiSearchDate",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                 <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change({val: model})" readonly="true"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchDateRange",function(t){return{restrict:"E",replace:!0,link:function(e,n,o){new t(e,n,o)},scope:{css:"@",name:"@",fromModel:"=",toModel:"=",change:"&",label:"@"},template:'\n                 <div class="input-inline search-item input-mlarge {{css}}">\n                    <div class="input-group">\n                        <input type="text" readonly class="form-control" name="{{fromName}}" ng-model="fromModel"/>\n                        <span class="input-group-addon">{{label || \'到\'}}</span>\n                        <input type="text" readonly class="form-control" name="{{toName}}" ng-model="toModel"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchInput",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,o){new t(e,n,o)},template:'\n                 <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change({val: model})"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchInputSelect",function(t,e,n,o){var r=new o("SearchInputSelect");return{restrict:"E",replace:!0,transclude:!0,link:function(o,i,a){var l=a.selectName&&a.inputName,s=new e(o,i,a),c=new t(o,i,a);n.tiggerComplete(o,a.ref||"$searchInputSelect",{select:c,input:s}),l||(a.selectName||a.inputName?r.error("必须同时设置select-name和input-name, 要么不设置, 要么全设置"):(c.change(function(){s.attr("name",c.val())}),s.attr("name",c.val()))),o.$on("uisearchform.reset",function(){c.reset(),s.reset()})},template:function(t,e){return n.getTemplate("tpl.searchform.input.select",e)}}}),angular.module("admin.component").directive("uiSearchRegion",function(t,e){return{restrict:"E",replace:!0,link:t,template:function(t,n){return e.getTemplate("tpl.searchform.region",n)}}}),angular.module("admin.component").directive("uiSearchSelect",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{label:"@",placeholder:"@",name:"@",css:"@",model:"=",change:"&",multiple:"@",render:"&"},link:function(e,n,o){new t(e,n,o)},template:'\n                <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <select class="form-control show-tick" data-live-search="true" data-style="{{buttonClass}}" name="{{name}}" title="{{placeholder}}" ng-transclude></select>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchRemoteSelect",function(t,e,n){return{restrict:"E",replace:!0,transclude:!0,link:function(n,o,r){var i=t(n,o,$.extend({multi:!0},r));e.tiggerComplete(n,r.ref||"$searchRemoteSelect",i),n.$on("uisearchform.reset",function(){i.reset()}),o.removeAttr("name").removeAttr("readonly").removeAttr("model")},template:function(t,o){var r=(o.col||n).split(":");return e.getTemplate("tpl.searchform.userselect.input",$.extend({leftCol:r[0],rightCol:r[1]},o))}}}),angular.module("admin.component").directive("uiSearchUserSelect",function(t,e,n){return{restrict:"E",replace:!0,link:function(o,r,i){var a=t(o,r,$.extend({},n,i));e.tiggerComplete(o,i.ref||"$searchUserSelect",a),o.$on("uisearchform.reset",function(){a.reset()}),r.removeAttr("name").removeAttr("model")},template:function(t,n){return e.getTemplate("tpl.searchform.userselect.input",n)}}}),function(){var t=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.message=new Message("uiStateButton")}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,r(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){var t=this;this.scope.clickHandler||this.message.error("必须设置on-click属性"),this.element.click(function(){t.disable(!0);var e=t.scope.clickHandler();t.wait(e)})},s.wait=function(t){var e=this;t&&t["finally"]?t["finally"](function(){return e.disable(!1)}):this.disable(!1)},s.disable=function(t){this.scope.target&&Metronic[""+(t?"":"un")+"blockUI"](this.scope.target),this.element.prop("disabled",t)},i(e.prototype,s),s=void 0,e}(Event);angular.module("admin.component").directive("uiStateButton",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{target:"@target",clickFnName:"@onClick"},link:function(e,n,o){var r=new t(e,n,o);r.init()},template:'\n                    <button type="button" class="btn" ng-transclude ng-click="clickHandler()"></button>\n                '}})}(),function(){angular.module("admin.component").directive("uiBreadcrumb",function(t,e){var n=function(n){"use strict";function o(t){this.scope=t,this.message=new Message("uiBreadcrumb")}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;r||l(o,n);var u={};return null!==n&&s(o,n),o.prototype=c(null!==n?n.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),i(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){var n=this;this.scope.datas?this.handler(t.toJSON(this.scope.datas)):this.scope.url?e.post(this.scope.url).then(function(t){return n.handler(t)}):this.message.error("至少设置datas或者url来配置面包屑")},u.handler=function(t){this.scope.items=(t||[]).map(function(t){return{name:t.name?t.name:t,url:t.url?t.url:""}})},l(o.prototype,u),u=void 0,o}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{datas:"@",url:"@"},link:function(t){new n(t).init()},template:'\n                    <div class="page-bar">\n                        <ul class="page-breadcrumb">\n                            <li ng-repeat="item in items">\n                                <a ng-href="item.url" ng-bind="item.name"></a>\n                                <i ng-if="!$last" class="fa fa-angle-right"></i>\n                            </li>\n                        </ul>\n                    </div>\n                '}})}(),function(){angular.module("admin.component").directive("uiContainer",function(t,e,n){var o=function(o){"use strict";function r(t,e,n){this.scope=t,this.element=e,this.scope.$on("componentComplete",this.initHandler.bind(this)),this.content=n(t)}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,l(e,n));return t},c=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;i||s(r,o);var p={};return null!==o&&c(r,o),r.prototype=u(null!==o?o.prototype:null,{constructor:{value:r,configurable:!0,writable:!0}}),a(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.init=function(){this.element.show().append(this.content),this.lazyInit()},p.lazyInit=function(){var o=this,r=this.scope.controller;t(function(){if(r&&window[r]){var t=/\(([^\)]+)\)/.exec(window[r].toString())[1],i={$scope:o.scope};t=t.split(",");for(var a,l=1;l<t.length;l++)a=$.trim(t[l]),i[a]=n.get(a);e(window[r],i)}else r&&e(r,{$scope:o.scope});o.scope.$emit("uicontainer.ready")})},p.initHandler=function(t,e){e&&(this.scope[e.ref]?(this.scope[e.ref]=[].concat(this.scope[e.ref]),this.scope[e.ref].push(e.component)):this.scope[e.ref]=e.component)},s(r.prototype,p),p=void 0,r}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{controller:"@"},link:function(t,e,n,r,i){new o(t,e,i).init()},template:"\n                    <div></div>\n                "}})}(),function(){angular.module("admin",["admin.service","admin.filter","admin.component"]).config(function(t,e){t.setSuccessHandler(function(t){return 1==t.type?t.data:null}),t.setFailHandler(function(t){return 1!=t.type?t.data:null}),e.setPosition("bottom","right")})}();