angular.module("admin.filter",[]),angular.module("admin.filter").filter("safeFilter",function(t){return function(e){return t.trustAsHtml(e)}}),angular.module("admin.service",[]);var PRS$0=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,e){for(var n in e)e.hasOwnProperty(n)&&DP$0(t,n,GOPD$0(e,n));return t},Ajax=function(){"use strict";function t(t,e,n){this.q=t,this.msg=new Message("Ajax"),this.util=e,this.provder=n}var e={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e._execute=function(t,e,n){var i=this,a=this.q.defer();return $.ajax({url:e,cache:!1,data:n,type:t,dataType:"json",success:function(t){var e=i.provider.successHandler(t),n=i.provder.failHandler(t);a.resolve(e?e:n)},error:function(t,e){var n={403:"没有权限",404:"请求的地址不存在",500:"服务器出现了问题,请稍后重试"}[e];i.msg.error(n||"服务器出现了问题,请稍后重试")}}),a.promise},e.get=function(t,e){return this._execute("GET",t,e)},e.post=function(t,e){return this._execute("POST",t,e)},e.message=function(t,e,n,i){var a=this;return this.post(t,e).then(function(){return a.msg.success(n)})["catch"](function(){return a.msg.error(i)})},e.add=function(t,e){return this.message(t,e,"添加数据成功","添加数据失败")},e.update=function(t,e){return this.message(t,e,"更新数据成功","更新数据失败")},e.remove=function(t,e,n){var i=this;return this.util.confirm("您确认删除该"+(n.label||"数据")+"吗?").then(function(){return i.message(t,e,"删除数据成功","删除数据失败")})},MIXIN$0(t.prototype,e),e=void 0,t}(),AjaxProvider=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.setSuccessHandler=function(t){this.successHandler=t},e.setFailHandler=function(t){this.failHandler=t},e.$get=function(t,e){return new Ajax(t,e,this)},MIXIN$0(t.prototype,e),e=void 0,t}();angular.module("admin.service").provider("ajax",AjaxProvider).provider("Ajax",AjaxProvider),angular.module("admin.service").factory("uiDialog",function(t,e,n,i,a,r){var o=(new t("Dialog"),function(t,e,n,i){r.call(this),this.url=t,this.ctrlName=n,this.scope=e.$new(),this.scope.dialog=this,this.resolve=$.extend(i||{},{$scope:this.scope}),this.start()});return o.prototype={onClose:function(t){this.$on("hidden.bs.modal",t)},start:function(){var t=$("<div/>").hide().appendTo(document.body),e=n.defer();t.load(this.url,function(n){var i=this.build(n);t.remove(),e.resolve(i)}.bind(this)),this.result=e.promise},build:function(t){var n=angular.element(t),r=e(n)(this.scope);this.element=r,this.element.one("hidden.bs.modal",function(){this.$emit("uiDialog.doHide"),this.element.remove(),$(".modal-backdrop").remove(),this.scope.$destroy()}.bind(this)),this.element.one("shown.bs.modal",function(){this.ctrlName&&a(function(){try{i(window[this.ctrlName]||this.ctrlName,this.resolve)}catch(t){console.error("加载controller失败")}}.bind(this)),this.$emit("uiDialog.doShow")}.bind(this)),this.element.modal({keyboard:!0,show:!0}),this.scope.$apply()},close:function(){this.element&&this.element.modal("hide")}},{load:function(t,e,n,i){return new o(t,e,n,i)},show:function(){}}}),angular.module("admin.service").factory("uiEditableChooseFactory",function(t,e,n){var i=(new t("EditableChoose"),function(t,n,i,a){this.selectData=a,e.apply(this,arguments)});return i.prototype=$.extend({},e.prototype,{beforeRender:function(){this.option.type="select",this.option.source=this.selectData},render:function(t){this.select=n(t,{})}}),function(t,e,n,a){return new i(t,e,n,a)}}),jQuery.fn.editable.defaults.inputclass="form-control",jQuery.fn.editable.defaults.ajaxOptions={type:"post",dataType:"json"},angular.module("admin.service").factory("uiEditableCommonFactory",function(t,e){var n=(new t("EditableCommon"),function(e,n,i){this.element=$(e),this.name=i.name,this.rule=i.rule,this.attrs=n,this.isRender=!1,this.option=$.extend(!0,i,{emptytext:"-",placement:"right",mode:"popup",doAfter:function(){this.render&&!this.isRender&&(this.isRender=!0,this.render.call(this,this.element.data("editableContainer").$form))}.bind(this),validate:this.validation.bind(this),success:function(e,n){return e=e||{},"ok"==e.result?!0:(t.error(e.msg),!1)}}),this.beforeRender(),this.element.editable(this.option),this.afterRender()});return n.prototype={beforeRender:function(){},afterRender:function(){},validation:function(t){var n=this.element.data("editableContainer").$form.find('[name="'+this.name+'"]').val();return t=void 0!==n?n:t,this.rule?e.checkValueUseRules(this.name,t,this.rule):null},show:function(){return this.element.editable("toggleDisabled"),this},hide:function(){return this.element.editable("toggleDisabled"),this}},n}),angular.module("admin.service").factory("uiEditableImageFactory",function(t,e){var n=(new t("EditableImage"),function(){e.apply(this,arguments)});return n.prototype=$.extend({},e.prototype,{beforeRender:function(){this.option.type="text"}}),function(t,e,i,a){return new n(t,e,i,a)}}),angular.module("admin.service").factory("uiEditableDateInputFactory",function(t,e){var n=(new t("EditableDateInput"),function(){e.apply(this,arguments)});return n.prototype=$.extend({},e.prototype,{beforeRender:function(){this.option.type="text",this.option.tpl=$('<input type="text" readonly>').datetimepicker({language:"zh-CN",format:this.attrs.format||"YYYY-MM-DD"})}}),function(t,e,i,a){return new n(t,e,i,a)}}),angular.module("admin.service").factory("uiEditableInputFactory",function(t,e){var n=(new t("EditableInput"),function(){e.apply(this,arguments)});return n.prototype=$.extend({},e.prototype,{beforeRender:function(){this.option.type="text"}}),function(t,e,i,a){return new n(t,e,i,a)}}),angular.module("admin.service").factory("uiEditableRegionFactory",function(t,e,n,i){var a=(new t("EditableRegion"),function(){e.apply(this,arguments)});return a.prototype=$.extend({},e.prototype,{beforeRender:function(){this.option.display=function(t,e){var n=this.element.data("editableContainer");if(n){var i=n.$form.find("form"),a=i.serializeArray(),r="",o="";$.each(a,function(t,e){"province"==e.name&&(r=e.value),"city"==e.name&&(o=e.value)})}}.bind(this),this.option.clear=!1,this.option.params=function(t){var e=this.element.data("editableContainer").$form.find("form"),n=e.serializeArray();return $.each(n,function(e,n){t[n.name]=n.value}),t.value=t[t.name],t}.bind(this),this.option.validateChange=function(){var t=this.element.data("editableContainer").$form.find("form"),e=t.serializeArray(),n=!0;return $.each(e,function(t,e){e.name==this.option.name&&(n=this.option.value==e.value)}),n}.bind(this)},render:function(t){var e=angular.element('<ui-search-region s-value="'+this.option.value+'" s-name="'+this.option.name+'" mode="text"></ui--search-region>'),a=n(e)(i.$new(!0));t.find(".editable-input").html("").append(a)}}),function(t,e,n,i){return new a(t,e,n,i)}}),angular.module("admin.service").factory("uiEditableUserFactory",function(t,e,n,i){var a=(new t("EditableUser"),function(){e.apply(this,arguments)});return a.prototype=$.extend({},e.prototype,{beforeRender:function(){this.option.type="text",this.option.doAfter=function(){var t=this.data("editableContainer").$form.find("input");this.select=n({},t,i)}.bind(this),this.option.display=function(t,e){var n=$(this),i=n.data("editableContainer");if(i){var a=$(i.$form.find("input")[1]).data("uiSelect.data");a&&n.html(a.name)}},this.option.clear=!1}}),function(t,e,n,i){return new a(t,e,n,i)}}),angular.module("admin.service").factory("CascadeFactory",function(t,e){var n=(new t("CascadeFactory"),{U:"url",C:"callback"}),i=function(){this.levelList=[],e.call(this)};return i.prototype={addUrl:function(t,e){return this.addUrlByIndex(-1,t,e)},addUrlByIndex:function(t,e,i){return i=i||"id",this.levelList.push({url:e,type:n.U,paramName:i}),this}},i});var Event=function(){"use strict";function t(){this.listenerMap={}}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,i=function(t,i){for(var a in i)i.hasOwnProperty(a)&&e(t,a,n(i,a));return t},a={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.$on=function(t,e){var n=this.listenerMap[t]||[];n.push(e),this.listenerMap[t]=n},a.$emit=function(t){var e=this.listenerMap[t]||[],n=Array.prototype.slice.call(arguments,1);$.each(e,function(t,e){e.apply(this,n)}.bind(this))},i(t.prototype,a),a=void 0,t}();angular.module("admin.service").service("Event",function(){return Event}),function(){window.Handlebars&&(Handlebars.registerHelper("math",function(t,e,n,i){return t=parseFloat(t),n=parseFloat(n),{"+":t+n,"-":t-n,"*":t*n,"/":t/n,"%":t%n}[e]}),Handlebars.registerHelper("sif",function(t,e,n,i){switch(e){case"!=":return t!=n?i.fn(this):i.inverse(this);case"==":return t==n?i.fn(this):i.inverse(this);case"===":return t===n?i.fn(this):i.inverse(this);case"<":return n>t?i.fn(this):i.inverse(this);case"<=":return n>=t?i.fn(this):i.inverse(this);case">":return t>n?i.fn(this):i.inverse(this);case">=":return t>=n?i.fn(this):i.inverse(this);case"&&":return t&&n?i.fn(this):i.inverse(this);case"||":return t||n?i.fn(this):i.inverse(this);default:return i.inverse(this)}}))}();var Logger=function(){"use strict";function t(t){this.className=t,this.console=window.console,this.isEnableDebug=-1!=location.hash.indexOf("debug")}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,i=function(t,i){for(var a in i)i.hasOwnProperty(a)&&e(t,a,n(i,a));return t},a={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.debug=function(t){t=""+this.className+(": "+t),this.isEnableDebug&&this.console&&(this.console.debug?this.console.debug(t):this.console.log(t))},a.info=function(t){t=""+this.className+(": "+t),this.console.info?this.console.info(t):this.console.log(t)},a.error=function(t){t=""+this.className+(": "+t),this.console.error?this.console.error(t):this.console.log(t)},i(t.prototype,a),a=void 0,t}();angular.module("admin.service").service("logger",function(){return Logger}).service("Logger",function(){return Logger});var PRS$0=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,e){for(var n in e)e.hasOwnProperty(n)&&DP$0(t,n,GOPD$0(e,n));return t};window.toastr?toastr.options={closeButton:!0,debug:!1,positionClass:"toast-top-center",showDuration:"1000",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}:console.error("需要 toastr库 支持, 请导入...");var Message=function(){"use strict";function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}(),MessageProvider=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.setPostion=function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},e.$get=function(){return Message},MIXIN$0(t.prototype,e),e=void 0,t}();angular.module("admin.service").provider("msg",MessageProvider).provider("Message",MessageProvider),function(){var t=function(t){"use strict";function e(t,e,n,i,a,r){this.url=t,this.pageIndex=parseInt(e||0),this.pageSize=parseInt(n||10),this.maxPage=0,this.pageLimit=parseInt(i||10),this.dataName=a||"data",this.totalName=r||"total",this.ajax=new Ajax}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&o(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.load=function(){var t=this;return this.ajax.post(this.url,{pageIndex:this.pageIndex,pageSize:this.pageSize}).then(function(e){return t.analyze(e)})},l.analyze=function(t){var e,n,i,a=t[this.totalName],r=[];this.maxPage=Math.ceil(a/this.pageSize),e=this.maxPage-(this.pageIndex+this.pageLimit),e>=0?(n=this.pageIndex,i=n+this.pageLimit):(n=this.pageIndex-Math.abs(e),n=0>n?0:n,i=this.pageIndex+(this.pageLimit-Math.abs(e)));for(var o=n;i>o;o++)r.push({index:o+1,current:o==this.pageIndex});return $.extend(t,{dataList:t[this.dataName],pageList:r,isFirst:0===this.pageIndex,isLast:this.pageIndex==this.maxPage-1})},l.prePage=function(){return this.pageIndex--,this.pageIndex=this.pageIndex<0?0:this.pageIndex,this.getPage(this.pageIndex)},l.nextPage=function(){return this.pageIndex++,this.pageIndex=this.pageIndex>this.maxPage-1?this.maxPage-1:this.pageIndex,this.getPage(this.pageIndex)},l.firstPage=function(){return this.getPage(0)},l.lastPage=function(){return this.getPage(this.maxPage)},l.getPage=function(t){return this.pageIndex=t,this.load()},r(e.prototype,l),l=void 0,e}(Event);angular.module("admin.service").service("PaginationFactory",t)}(),function(){var t={type:"keydown",propagate:!1,inputDisabled:!1,keyCode:!1},n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},i={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},a=function(){"use strict";function a(t,e){this.window=t,this.timeout=e,this.keyboardEvent={}}var r=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),o=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},l={};return r(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.bind=function(e,n,i){i=$.extend({},t,i),e=e.toLowerCase();var a=i&&i.target?i.target:this.window.document;this.keyboardEvent[e]={callback:this.handler,target:a,event:i.type,opt:i},$(a).bind(i.type,this.handler.bind(this,n,e))},l.unbind=function(t){t=t.toLowerCase();var e=this.keyboardEvent[t];if(delete this.keyboardEvent[t],e){var n=e.event,i=e.target,a=e.callback;$(i).unbind(n,a)}},l.handler=function(t,a,r){var o=this.keyboardEvent[a];if(o.inputDisabled){var s=r.target;if("INPUT"==s.tagName||"TEXTAREA"==s.tagName)return}var l=String.fromCharCode(r.keyCode).toLowerCase();188==code&&(l=","),190==code&&(l=".");for(var c,u=a.split("+"),d=0,h={shift:{wanted:!1,pressed:r.shiftKey?!0:!1},ctrl:{wanted:!1,pressed:r.ctrlKey?!0:!1},alt:{wanted:!1,pressed:r.altKey?!0:!1}},m=0,p=u.length;c=u[m],p>m;m++){switch(c){case"ctrl":case"control":d++,h.ctrl.wanted=!0;break;case"shift":case"alt":case"meta":d++,h[c].wanted=!0}c.length>1?i[c]==code&&d++:o.keyCode?o.keyCode==code&&d++:l==c?d++:n[l]&&e.shiftKey&&(l=n[l],l==c&&d++)}d==u.length&&h.ctrl.pressed==h.ctrl.wanted&&h.shift.pressed==h.shift.wanted&&h.alt.pressed==h.alt.wanted&&h.meta.pressed==h.meta.wanted&&(this.timeout(function(){t(e)},1),o.propagation&&r.stopPropagation())},s(a.prototype,l),l=void 0,a}();angular.module("admin.service").factory("ShortcutFactory",a)}(),angular.module("admin.service").factory("util",function($rootScope,$compile,$filter,$parse,$q){return{dateFormatStr:function(t,e){return $filter("date")(t||new Date,e)},dateTimeStr:function(t){return this.dateFormatStr(t,"yyyy-MM-dd HH:mm:ss")},dateStr:function(t,e){return this.dateFormatStr(t,"yyyy-MM-dd")},timeStr:function(t,e){return this.dateFormatStr(t,"HH:mm:ss")},animate:function(t,e,n){n=void 0!==n?n:!0,t.addClass(e+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n&&$(this).removeClass(e+" animated")})},setTag:function(t,e,n){n.$emit("ui.completeInit",t,e)},setValue:function(t,e,n){var i=e.split(".");if(i.length>1){var a=i.splice(i.length-1,i.length).join(""),r=i.join("."),o=$parse(r)(t);o[a]=n}else t[e]=n},getValue:function(t,e){return $parse(e)(t)},toJSON:function(str){return eval("("+str+")")},toScope:function(t,e){return e=e||$rootScope,$.extend(e.$new(),t||{})},format:function(t,e){var n=$compile(t)(e);return n},confirm:function(t){if(bootbox){var e=$q.defer();return bootbox.confirm(t,function(t){t?e.resolve():e.reject()}),e.promise}throw new Error("需要 bootbox库 支持, 请导入....")},checkValuesUseRules:function(t,e){var n=$("<form></form>"),i=[];$.each(t,function(t,e){var a=$("<input>").attr("name",t).val(e);i.push(a),n.append(a)});var a=n.validate({rules:e,debug:!0,submitHandler:function(){return!1}}),r=null;return $.each(i,function(t,e){return a.check(e)?void 0:(r=e.attr("name"),!1)}),r?a.errorMap[r]:null},checkValueUseRules:function(t,e,n){var i={},a={};return i[t]=e,a[t]=n,this.checkValuesUseRules(i,a)}}}),function(){var t=function(){"use strict";function t(){}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,i=function(t,i){for(var a in i)i.hasOwnProperty(a)&&e(t,a,n(i,a));return t};e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var a={};return a.constrcutor=function(t){this.$parse=t},a.set=function(t,e,n){var i=this.$parse(e);i.assign(t,n),t.$$phase||t.$apply()},a.get=function(t,e){var n=this.$parse(e);return n(t)},i(t.prototype,a),a=void 0,t}();angular.module("admin.service").service("ValueService",t)}();var ComponentEvent=function(t){"use strict";function e(){null!==t&&t.apply(this,arguments)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t),null!==t&&o(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1});var l={};return l.triggerComplete=function(t,e,n){t[e]=n,t.$emit("componentComplete",{ref:e,component:n})},r(e.prototype,l),l=void 0,e}(Event);angular.module("admin.component",[]).service("componentHelper",function(t){this.tiggerComplete=function(t,e,n){t[e]=n,t.$emit("componentComplete",{ref:e,component:n})},this.getComponentRef=function(t,e){var n=t.attr("ref")||e;return n},this.getTemplate=function(e,n){var i=t.get(e),a=Handlebars.compile(i);return a(n)},this.setTemplate=function(e,n){t.put(e,n)}}),angular.module("admin.component").directive("uiAreaChart",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!1,link:function(e,n,i){var a=new t(e,n,i);a.setType("line")},templateUrl:"tpl.chart"}}),angular.module("admin.component").directive("uiBubbleChart",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!1,link:function(e,n,i){var a=new t(e,n,i);a.setType("line")},templateUrl:"tpl.chart"}}),angular.module("admin.component").directive("uiColumnChart",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!1,link:function(e,n,i){new t(e,n,i)},templateUrl:"tpl.chart.column"}}),angular.module("admin.component").directive("uiLineChart",function(t){return{restrict:"E",replace:!0,scope:!1,link:function(e,n,i){new t(e,n,i)},templateUrl:"tpl.chart.line"}}),angular.module("admin.component").directive("uiMixedChart",function(t){return{restrict:"E",replace:!0,scope:!1,link:function(e,n,i){new t(e,n,i)},templateUrl:"tpl.chart.line"}}),angular.module("admin.component").directive("uiPieChart",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!1,link:function(e,n,i){var a=new t(e,n,i);a.setData=function(t){this.config.series=[{type:"pie",data:t.map(function(t){for(var e in t)return[e,t[e]]})}],this.build()}},templateUrl:"tpl.chart.pie"}}),angular.module("admin.component").directive("uiScatterChart",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!1,link:function(e,n,i){var a=new t(e,n,i);a.setType("line")},templateUrl:"tpl.chart"}}),angular.module("admin.component").factory("uiChartFactory",function(t,e,n,i){var a=(new e("Chart"),function(t,e,i){n.call(this),this.scope=t,this.element=e,this.elementTarget=e.find("div"),this.attrs=i,this.instance=null,this.xAxisName=this.attrs.xaxis,this.categories=this.attrs.categories?this.attrs.categories.split(","):[],this.pageData=null,this.config={title:{},subtitle:{},chart:{},xAxis:{},yAxis:{},legend:{},series:{}},this.init()});return a.prototype={init:function(){this.config.title.text=this.attrs.title||"",this.config.subtitle.text=this.attrs.subTitle||"",this.config.chart.type=this.attrs.type,this.attrs.url&&this.refresh(this.attrs.url),t.tiggerComplete(this.scope,this.attrs.ref||"$"+this.attrs.type+"chart",this)},refresh:function(t,e){var n=this;i.post(t,e||{}).then(function(t){n.setData(t)})},setType:function(t){this.config.chart.type=t,this.instance&&this.instance.redraw()},setCategories:function(t,e){this.categories=e?t:this.categories.concat(t),this.pageData&&this.setData(this.pageData)},setXAxisData:function(t){this.instance?this.instance.xAxis[0].setCategories(t,!1):this.config.xAxis.categories=t},setData:function(t){var e=this,n=[],i=[];this.pageData=t,$.each(t,function(t,a){e.xAxisName&&n.push(a[e.xAxisName]||""),e.dataToSeriesData(a,i)}),this.setXAxisData(n),this.instance?(this.instance.series=i,this.instance.redraw()):(this.config.series=i,this.build())},dataToSeriesData:function(t,e){e=e||[],$.each(this.categories,function(n,i){var a=t[i],r=e[n]||{name:i,data:[]};r.data.push(a),e[n]=r})},build:function(){console.info(this.config),this.instance=this.elementTarget.highcharts(this.config)}},a}),angular.module("admin.component").directive("uiFormItem",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,i,a){e.find(">div").append(a(t)),e.removeAttr("name").removeAttr("model")},template:function(n,i){var a=(i.col||e).split(":");return t.getTemplate("tpl.form.item",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").constant("defaultCol","2:10").directive("uiForm",function(t,e){return{restrict:"E",replace:!0,scope:!1,transclude:!0,compile:function(){var n=null;return{pre:function(i,a,r,o,s){n=new t(i,a,r,s(i)),n.layout();var l=r.ref||"$form";i[l]=n,e.tiggerComplete(i,l,n)},post:function(){setTimeout(function(){n.initValidation()},300)}}},templateUrl:"tpl.form"}}),function(){jQuery.validator&&(jQuery.validator.addMethod("url",function(t,e){var n=/^(http|https):\/\//;return this.optional(e)||n.test(t)},"链接地址必须以http://或者https://开头！"),jQuery.validator.addMethod("dateRange",function(t,e,n){var i=moment(t),a=moment($(this.currentForm).find('[name="terminatetime"]').val());return i.isBefore(a)},"时间范围不正确"),jQuery.validator.addMethod("maxlength",function(t,e,n){var i=0;return n&&n>0&&(i=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length<=i},"请输入一个长度最多是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("minlength",function(t,e,n){var i=0;return n&&n>0&&(i=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length>=i},"请输入一个长度最少是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("rangelength",function(t,e,n){var i=0,a=0;n&&n[0]>0&&(i=n[0]),n&&n[1]>0&&(a=n[1]);var r=t.replace(/[^\x00-\xff]/gi,"--").length;return a>=r&&r>=i},"请输入一个长度介于 {0} 和 {1} 之间的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("mobile",function(t,e){var n=t.length,i=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(e)||11==n&&i.test(t)},"手机号码不正确"),jQuery.validator.addMethod("pwdRule",function(t,e){var n=/^(?![0-9]+$)(?![a-z]+$)(?![0-9a-z]+$)(?![\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]+$)[0-9A-Za-z\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]{8,16}$/;return this.optional(e)||n.test(t)},"密码由8-16位字母、数字和特殊字符组成，且至少有一个大写字母或者特殊字符！"))}(jQuery),angular.module("admin.component").directive("uiSearchForm",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(n,i,a){var r=e.getComponentRef(i.parent().find(".ui-table"),"$table"),o=new t(n,i,a,r),s=a.ref||"$searchForm";n[s]=o,e.tiggerComplete(n,s,o)},template:function(t,n){var i=n.column||"11:1",a=n.ref||"$searchForm",r=i.split(":");return e.getTemplate("tpl.searchform",{leftCol:r[0],rightCol:r[1],ref:a})}}});var UIFormControl=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.isSearchControl=e.parents(".ui-search-form").length>0,this.formPrefix=this.isSearchControl?"$search":"$form",this.formResetEventName=this.isSearchControl?"uisearchform.reset":"uiform.reset",this.init(),this.initEvents(),this.cleanElement(),this.render()}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&o(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){this.scope.lcol=void 0!==this.scope.lcol?this.scope.lcol:2,this.scope.rcol=void 0!==this.scope.rcol?this.scope.rcol:10,this.triggerComplete(this.scope,this.attrs.ref||"$"+this.formPrefix+this.className,this)},l.initEvents=function(){var t=this;this.scope.$on(this.formResetEventName,function(){return t.reset()})},l.cleanElement=function(){this.element.removeAttr("name").removeAttr("model").removeAttr("readonly").removeAttr("disabled")},l.attr=function(t,e){return this.formEl?t&&e?(this.formEl.prop(t,e),this):this.formEl.prop(t):void 0},l.val=function(t){return this.formEl?t?(this.formEl.val(t),this):this.formEl.val():void 0},l.destroy=function(){delete this.listenerMap,this.resetListener()},l.change=function(t){this.$on("change",t)},l.render=function(){},l.reset=function(){this.formEl&&this.formEl.val("")},r(e.prototype,l),l=void 0,e}(ComponentEvent);angular.module("admin.component").service("uiFormControl",function(){return UIFormControl}),function(){var t=function(t){"use strict";function e(e,n,i){this.className="Date",this.message=new Message("uiDate"),this.formEl=n.find("input"),this.dateMode=i.mode?-1!=i.mode.indexOf("date"):!0,this.timeMode=i.mode?-1!=i.mode.indexOf("time"):!0,t.call(this,e,n,i)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&o(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){t.prototype.init.call(this);var e=[];this.dateMode&&e.push("yyyy-MM-dd"),this.timeMode&&e.push("HH:mm:ss"),this.format=e.join(" ")},l.initEvents=function(){t.prototype.initEvents.call(this)},l.render=function(){this.formEl.datetimepicker({language:"zh-CN",pickDate:this.dateMode,useCurrent:!1,pickTime:this.timeMode,useSeconds:this.timeMode})},r(e.prototype,l),l=void 0,e}(UIFormControl);angular.module("admin.component").service("UIDateService",function(){return t})}(),function(){!function(t){"use strict";function e(e,n,i){t.call(this,e,n,i)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;return n||r(e,t),null!==t&&o(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e}(UIFormControl);angular.module("admin.component").value("uiDateRangeDefaultRange",{"今天":[moment().startOf("day"),moment().endOf("day")],"昨天":[moment().subtract("days",1).startOf("day"),moment().subtract("days",1).endOf("day")],"最近7天":[moment().subtract("days",6).startOf("day"),moment().endOf("day")],"最近30天":[moment().subtract("days",29).startOf("day"),moment().endOf("day")],"当前月":[moment().startOf("month"),moment().endOf("month")],"上个月":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"最近六个月":[moment().subtract("days",182).startOf("day"),moment().endOf("day")]}).value("uiDateRangeDefaultConfig",{opens:"right",minDate:moment().subtract("year",40).startOf("year"),maxDate:moment().add("year",10).endOf("year"),showDropdowns:!0,showWeekNumbers:!1,timePickerIncrement:1,timePicker12Hour:!1,buttonClasses:["btn","btn-sm"],applyClass:"green",cancelClass:"default",separator:" - ",locale:{applyLabel:"确定",cancelLabel:"取消",resetLabel:"重置",fromLabel:"从",toLabel:"至",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}}).factory("uiDateRangeService",function(t,e,n,i){var a=(new t("DateRange"),function(t,e,a){this.className="DateRange",this.element=e,this.startDateElement=e.find(".input-group").find("input:first"),this.endDateElement=e.find(".input-group").find("input:last"),this.attrs=a,this.hasDefaultDateRange=!!this.attrs.range,this.isDateTimeMode="date"!==a.mode||void 0!==attr.time,this.format=a.format||(this.isDateTimeMode?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD");var r=n[this.attrs.range]||[];this.defaultStartDate=a.fromValue||r[0],this.defaultEndDate=a.toValue||r[1],this.limit=a.limit,i.apply(this,arguments)});return a.prototype=$.extend(new i,{_init:function(){this.config=$.extend({},e,{ranges:n,timePicker:this.isDateTimeMode,format:this.format}),this.limit&&(this.config.dateLimit={days:this.limit}),this.hasDefaultDateRange&&(this.config.startDate=this.defaultStartDate,this.config.endDate=this.defaultEndDate)},render:function(){this.element.find("div").daterangepicker(this.config,function(t,e){t=t?t.format(this.format):"",e=e?e.format(this.format):"",this.startDateElement.val(t),this.endDateElement.val(e),this.$emit("change",this,t,e)}.bind(this))},reset:function(){this.startDateElement.val(""),this.endDateElement.val("")},val:function(t,e){return t&&this.startDateElement.val(t),e&&this.endDateElement.val(e),t||e?this:[this.startDateElement.val(),this.endDateElement.val()]}}),function(t,e,n,i,r){return new a(t,e,n,i,r)}})}(),function(){angular.module("admin.component").constant("uiFormValidateConfig",{errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{},highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},success:function(t,e){t.closest(".form-group").removeClass("has-error")},errorPlacement:function(t,e,n){$(t).appendTo($(e).parent())}}).factory("uiFormFactory",function(t,e,n,i){var a=(new t("Form"),function(t,e,n,a){this.column=n.column,this.formItems=a,this.formControlMap={},this.action=n.action.replace(/#/g,""),this.formName=n.formName,i.apply(this,arguments)});return a.prototype=$.extend(new i,{
_init:function(){this.scope.$on("componentComplete",function(t,e){e&&e.name&&(this.formControlMap[e.name]=e)}.bind(this))},changeValidateRule:function(t,e){var n=this.element.data().validator;if(n){var i=n.settings.rules[t];n.settings.rules[t]=$.extend(i,e)}},startValidate:function(){this.element.valid()},addFormItem:function(t){this.formItems.push(t),this.layout()},formItemVal:function(t,e){var n=this.element.find('[name="'+t+'"]');return e?void n.val(e):n.val()},layout:function(t){if(t=parseInt(void 0!==t?t:this.column),t>1){var e=12/t,n=this.element.find(" > div"),i=[];n.html();var a,r;for(a=0;a<this.formItems.length;a++)r=this.formItems[a],void 0!==r.innerHTML&&("hidden"==r.type?n.append(r):i.push(r));var o=function(t,e){n.append(e)};for(a=0;a<i.length;a+=t){for(var s=$("<div/>").addClass("row"),l=a,c=a,u=[];l+t>c&&i[c];){if(r=i[c],-1!=r.className.indexOf("row"))u.push(r),a++,l++;else{var d=$("<div/>").addClass("col-md-"+e);d.append(i[c]),s.append(d)}c++}n.append(s),$.each(u,o)}}else this.element.find(" > div").append(this.formItems)},initValidation:function(){this.action?$.getJSON("/validator?action="+this.action,function(t){this.setRules(t)}.bind(this)):this.formName?$.getJSON("/validator?cm="+this.formName,function(t){this.setRules(t)}.bind(this)):this.attrs.validateUrl?$.getJSON(this.attrs.validateUrl,function(t){this.setRules(t)}.bind(this)):this.element.submit(this._submit.bind(this))},setRules:function(t){var e={};this.$emit("uiform.rules",t,e),this.element.validate($.extend({},n,{rules:t,messages:e,submitHandler:this._submit.bind(this)}))},formData:function(t){var e=this.element.serializeArray();if(t===!0){var n={};$.each(e,function(t,e){var i=e.name,a=e.value;n[i]?$.isArray(n[i])?n[i].push(a):n[i]=[n[i],a]:n[i]=a}),e=n}return e},loadData:function(t){var n=this;return e.post(t).then(function(t){n.setData(t)})},setData:function(t){for(var e in t){var n=this.formControlMap[e];n&&n.val(t[e])}},submit:function(t){this.$on("uiForm.doSubmit",t)},_submit:function(t){return this.action?e.post(this.action,this.formData(t)).then(function(){this.$emit("uiForm.completeSubmit",this)}.bind(this)):this.$emit("uiForm.doSubmit",this.formData({})),!1},reset:function(){this.scope.$broadcast("uiform.reset")}}),a})}(jQuery),angular.module("admin.component").constant("uiInputMaskMap",{backcard:"9999 9999 9999 9999"}).factory("uiInputFactory",function(t,e,n){var i=(new t("Input"),function(t,i,a){this.inputElement=i.find("input"),this.attrs=a,this.mask=a.mask||e[a.type],n.apply(this,arguments)});return i.prototype=$.extend(new n,{render:function(){this.mask&&$.fn.inputmask&&this.inputElement.inputmask(this.mask),this.element.removeAttr("type")},reset:function(){this.inputElement.val("")},disabled:function(t){this.attr("disabled",t)},attr:function(t,e){return e?void this.inputElement.attr(t,e):this.inputElement.attr(t)},val:function(t){return void 0!==t?(this.inputElement.val(t),this):this.inputElement.val()}}),function(t,e,n,a,r){return new i(t,e,n,a,r)}}),angular.module("admin.component").factory("uiRegionHelper",function(t,e,n){var i,a,r,o=new n("UiRegionHelper"),s=[],l=!1,c=!1,u="http://pic.ofcard.com/themes/common/region/China_Region_Last.js",d=!1,h=!1,m="086",p=function(n,i,a,o){if(o&&void 0===n)return void e.error(i+"的pid为空");var s=this,l=t.defer();return this.getTreeData().then(function(){var t=r[n].child;l.resolve(t),a&&s.setHtml(a,t)},function(){l.reject([])}),l.promise};return{getDataMap:function(){var n=t.defer();return c?n.resolve(i):l?s.push(n):(l=!0,$.getScript(u,function(){n.resolve(i=window.CHINA_REGION),$.each(s,function(t,e){e.resolve(i)}),s=[],c=!0},function(){l=!1,e.error("....区域数据读取不到了。。"),n.reject({})})),n.promise},getDataList:function(e){e=e||"s";var n=t.defer();return this.getTreeData().then(function(){var t=[];$.each(i,function(n,i){var a=!1;switch(e){case"p":a=i[1]==m;break;case"c":var o=r[i[1]];if(o&&o.id==m)a=!0;else if(n==m)a=!0;else{var s=r[o.pid];a=s?s.id==m:!1}break;case"s":a=!0}a&&t.push({id:n,name:i[0],pid:i[1]})}),n.resolve(t),d=!0},function(){n.reject({})}),n.promise},getDatasByMode:function(e){e=e||"s";var n=t.defer();return this.getTreeData().then(function(){var t=[];$.each(r,function(n,i){i.mode==e&&t.push(i)}),n.resolve(t)},function(){n.reject({})}),n.promise},getTreeData:function(){var e=t.defer();return h?e.resolve(a):this.getDataMap().then(function(t){a={"086":{id:m,text:"全国",child:[]}},r={"086":{id:m,text:"全国",child:[]}},$.each(t,function(t,e){var n={id:t,text:e[0],child:[],pid:e[1],mode:null};t!=m&&(r[t]=n),r[e[1]]&&(r[e[1]].child.push(n),e[1]==m?(n.mode="p",a[m].child.push(n)):n.mode=r[e[1]].pid==m?"c":"s")}),e.resolve(a),h=!0},function(){e.reject({})}),e.promise},getHtml:function(t){var e=[];return $.each(t,function(t,n){var i=n.id;e.push('<option value="'+i+'">'+n.text+"</option>")}),e.join("")},setHtml:function(t,e){t.html(this.getHtml(e)).change()},getProvince:function(t){return p.call(this,m,"请选择省",t,!1)},getCity:function(t,e){return p.call(this,t,"请选择市",e,!0)},getStreet:function(t,e){return p.call(this,t,"请选择区",e,!0)},getById:function(e){var n=t.defer();return this.getTreeData().then(function(){n.resolve(r[e])},function(){n.reject({})}),n.promise},htmlById:function(n,i,a,s){var l=this,c=t.defer();return this.getById(n).then(function(t){if(t){var u,d,h,m,p;switch(t.mode){case"p":u=n,l.getProvince(s),l.getCity(u,a),c.resolve([null,null,t]);break;case"c":m=r[t.pid],u=m.id,d=n,l.getProvince(s),l.getCity(m.id,a),l.getStreet(d,i),c.resolve([null,t,m]);break;case"s":p=r[t.pid],m=r[p.pid],u=m.id,d=p.id,h=n,l.getProvince(s),l.getCity(m.id,a),l.getStreet(p.id,i),c.resolve([t,p,m])}setTimeout(function(){u&&s&&s.select2("val",u),d&&a&&a.select2("val",d),h&&i&&i.select2("val",h)},500)}else o.error("当前地址数据有误, 请重新编辑保存"),e.error("["+n+"]"),l.getProvince(s),c.reject()}),c.promise}}}),angular.module("admin.component").factory("uiRegionService",function(t,e,n){var i=(new e("Region"),function(t,e,i){var a=e.find("input");this.$inputDom=$(a[0]),this.$pDom=$(a[1]),this.$cDom=$(a[2]),this.$sDom=$(a[3]),this.$aDom=$(a[a.length-1]),this.codeValue=i.sValue,this.autoWidth=i.autoWidth,this.mode=i.mode||"s",this.valueType=i.valueType||"text",n.apply(this,arguments)});return i.prototype=$.extend(new n,{_init:function(){var e=this;if(/^\d+$/g.test(this.codeValue)){var n,i,a;t.htmlById(this.codeValue).then(function(e){return n=e[2],i=e[1],a=e[0],t.getProvince()}).then(function(i){return e.$pDom.select2(e.toProvinceData(i)),n?(e.$pDom.select2("val",n.id),e.$pDom.val(n[e.valueType]),t.getCity(n.id)):null}).then(function(n){return n?(e.$cDom.select2(e.toCityData(n)),i?(e.$cDom.select2("val",i.id),e.$cDom.val(i[e.valueType]),t.getStreet(i.id)):null):void 0}).then(function(t){t&&(e.$sDom.select2(e.toStreetData(t)),a&&(e.$sDom.select2("val",a.id),e.$sDom.val(a[e.valueType])))}),this.$inputDom.val(this.codeValue)}else t.getProvince().then(function(t){e.$pDom.select2(e.toProvinceData(t))});this.attrs.aValue&&this.$aDom.val(this.attrs.aValue),this.initMode(),this.initEvent()},initMode:function(){var t=0;switch(this.attrs.mode){case"p":t=120,this.$pDom.select2(this.toProvinceData()),this.$cDom.remove(),this.$sDom.remove();break;case"c":t=240,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.remove();break;default:t=360,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.select2(this.toStreetData())}this.autoWidth&&this.element.width(t+60)},initEvent:function(){var e=this;this.$pDom.change(function(n){n.val?(t.getCity(n.val).then(function(t){e.$cDom.select2(e.toCityData(t)),e.$sDom.select2(e.toStreetData())}),this.$pDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):this.reset()}.bind(this)),this.$cDom.change(function(n){n.val?(t.getStreet(n.val).then(function(t){e.$sDom.select2(e.toStreetData(t))}),this.$cDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):(this.$sDom.select2(this.toStreetData()),this.$cDom.val(""),this.$inputDom.val(""))}.bind(this)),this.$sDom.change(function(t){t.val?(this.$sDom.val(t.added[this.valueType]),this.$inputDom.val(t.val)):(this.$sDom.val(""),this.$inputDom.val(""))}.bind(this))},toProvinceData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},toCityData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},toStreetData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},reset:function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())}}),function(t,e,n,a,r){return new i(t,e,n,a,r)}}),angular.module("admin.component").factory("uiSearchFormFactory",function(t,e){var n=new t("SearchForm"),i=function(t,n,i,a){this.elementContainer=n.find(".row > div:eq(0)"),this.tableId=a,e.apply(this,arguments)};return i.prototype=$.extend(new e,{_init:function(){$(document).keydown(function(t){13==t.keyCode&&this.search()}.bind(this)),this.element.submit(function(t){return t.preventDefault(),!1})},addFormItem:function(t){this.elementContainer.append(t)},formData:function(){return this.element.serializeArray()},formParamData:function(){return this.element.serialize()},search:function(){var t=this.formData();this.$emit("uisearchform.doSubmit",t),this.scope[this.tableId]?this.scope[this.tableId].search(t):n.error("为发现ref为["+this.tableId+"]的组件, 无法调用查询")},submit:function(t){this.$on("uisearchform.doSubmit",t)},reset:function(){this.scope.$broadcast("uisearchform.reset")}}),i}),angular.module("admin.component").factory("uiSelectFactory",function(t,e,n,i){var a=(new t("Select"),function(t,e,i){this.selectElement=e.find("select"),this.dataKeyName=i.keyName||"key",this.dataValueName=i.valueName||"text",this.defaultResetValue=i.isMulti?"":this.selectElement.find("option:eq(0)")[0]?this.selectElement.find("option:eq(0)").val():"",this.model=i.model,this.init=!1,n.apply(this,arguments)});return a.prototype=$.extend(new n,{_init:function(){if(this.model&&(this.watch=this.scope.$watch(this.model,function(t){this.val(void 0!==t?t:this.defaultResetValue)}.bind(this)),!i.get(this.scope,this.model))){var t=this.attrs.value?this.attrs.value:this.defaultResetValue;i.set(this.scope,this.model,t)}this.attrs.url&&this.load(this.attrs.url),!this.model&&this.attrs.value&&this.val(this.attrs.value),this.element.removeAttr("value")},load:function(t,n,i){var a=this;return e.post(t).then(function(t){if(a.setData(t,i),n)a.val(n);else{var e=a.val(),r=/^\?.+:(.+)\s+\?$/.exec(e);a.val(r?r[1]:e)}})},disabled:function(t){this.selectElement.prop("disabled",t),this.render()},render:function(){this.init?this.selectElement.selectpicker("refresh"):(this.selectElement.selectpicker({iconBase:"fa",tickIcon:"fa-check"}),this.init=!0)},setData:function(t,e,n,i){n=n||this.dataKeyName,i=i||this.dataValueName,e&&this.selectElement.html(""),$.isArray(t)?$.each(t,function(t,e){this.selectElement.append(this.toOption(e,n,i))}.bind(this)):$.each(t,function(t,e){var a=this.toOptionGroup(t);$.each(e,function(t,e){a.append(this.toOption(e,n,i))}.bind(this)),this.selectElement.append(a)}.bind(this)),this.reset()},toOption:function(t,e,n){var i=angular.isString(t),a=i?t:t[e],r=i?t:t[n],o=$("<option/>").attr("value",a).html(r);return this.$emit("uiselect.onOption",o,t),o.data("item",t),o},toOptionGroup:function(t){var e=$("<optgroup/>").attr("label",t);return e},reset:function(){this.selectElement.val(this.defaultResetValue),this.render()},change:function(t){this.selectElement.change(t)},val:function(t){return void 0!==t?(this.selectElement.val(t),this.render(),this):this.selectElement.val()}}),function(t,e,n,i,r){return new a(t,e,n,i,r)}}),angular.module("admin.component").constant("userConfig",{url:"/sysconfig/orguser/select",labelName:"name",valueName:"staffno"}).constant("tagConfig",{url:"/sysconfig/tag/list?classify=",labelName:"name",valueName:"id"}).factory("uiMultiSelectFactory",function(t,e,n,i,a,r,o){var s=(new i("MultiSelect"),function(t,e,n){r.call(this),this.scope=t,this.element=e,this.inputElement=e.find("input"),this.attrs=n,this.isInit=!0,this.selectValues=[],this.selectItems=[],this.datas=void 0;var i=this,a={openOnEnter:!1,formatNoMatches:function(){return"没有符合的数据"},formatInputTooShort:function(t,e){return"输入"+e+"个字符后开始查询"},formatSelectionTooBig:function(t){return"最大可以选中"+t+"个数据"},formatSearching:function(){return"正在加载数据..."},formatAjaxError:function(){return"加载数据失败"}};void 0!==n.multi&&(a.multiple=!0),void 0!==n.url&&(void 0!==n.multi&&(a.createSearchChoice=$.proxy(i.createSearchChoice,i)),a.query=$.proxy(i.filterData,i),a.initSelection=$.proxy(i.initSelection,i),a.id=$.proxy(i.formatId,i),a.formatSelection=$.proxy(i.formatResult,i),a.formatResult=$.proxy(i.formatResult,i)),n.minmum&&(a.minimumInputLength=n.minmum),n.maxSize&&(a.maximumSelectionSize=n.maxSize),a.closeOnSelect=!1,this.inputElement.select2(a),this.initValue(),this.initEvents()});return s.prototype={initValue:function(){var t=this.attrs.model,e=this;if(void 0!==this.attrs.multi&&this.attrs.setCheck&&this.loadData().then(function(){e.selectItems=[],e.selectValues=[],$.each(e.datas,function(t,n){-1!=(","+e.attrs.setCheck+",").indexOf(","+n.id+",")&&(e.selectItems.push(n),e.selectValues.push(n.id))}),e.isFocusInit=!0,e.val(e.selectValues)}),t){var n=o.get(this.scope,t);if(n)this.element.select2("val",n);else var i=this,a=this.scope.$watch(t,function(t){t&&(i.element.select2("val",t),a())})}},initEvents:function(){var t=this;this.element.on("select2-selecting",function(t){return t.object.isNew&&"false"==this.attrs.editable?!1:(void 0!==this.attrs.multi?(this.selectValues.push(t.val),this.selectItems.push(t.object)):(this.selectValues=[t.val],this.selectItems=[t.object]),this.$emit("uiSelect.doSelect",this.selectValues,this.selectItems),this.attrs.model&&o.set(this.scope,this.attrs.model,void 0!==this.attrs.multi?this.selectValues:this.selectValues[0]),!0)}.bind(this)),this.element.on("select2-removing",function(t){this.selectValues=$.grep(this.selectValues,function(e){return e!=t.val}),this.selectItems=$.grep(this.selectItems,function(e){return e!=t.choice}),this.$emit("uiSelect.doRemove",this.selectValues,this.selectItems)}.bind(this)),this.element.on("change",function(e){e.added&&this.$emit("uiSelect.doAdd",e.added,t.attrs.tag),e.removed&&this.$emit("uiSelect.doDel",e.removed,t.attrs.tag)}.bind(this))},createSearchChoice:function(t,e){return 0===$(e).filter(function(){return 0===this.name.indexOf(t)}).length?e.length<=10?{id:t,name:t,isNew:!0}:null:void 0},useParams:function(t){return $.extend(this.params,t||{})},loadData:function(){var n=this,i=t.defer();return n.datas?i.resolve(n.datas):e.post(this.attrs.url,this.useParams).then(function(t){n.datas=t?t.aaData||t:[],$.each(n.datas,function(t,e){var n=[];for(var i in e)n.push(i+"="+(e[i]||"").toString().toLowerCase());e.__string=n.join(",")}),i.resolve(n.datas)}),i.promise},filterData:function(t){var e=this,n=(this.attrs.search||"").toLowerCase().split(","),i=t.term.toLowerCase();this.loadData().then(function(a){var r=[];$.each(a,function(a,o){var s=!1;t.init?s=e.attrs.multi?-1!=t.term.indexOf(e.formatId(o)):e.formatId(o)==t.term:0===n.length||""===n[0]?s=-1!=o.__string.indexOf(i):$.each(n,function(t,e){s=-1!=(o[e]||"").toString().toLowerCase().indexOf(i)}),s&&r.push(o)}),t.callback({results:r})})},initSelection:function(t,e){var n=this,i=function(t){e(void 0!==n.attrs.multi?t.results:t.results[0])};n.isFocusInit?(n.isFocusInit=!1,n.isInit=!1,i({results:n.selectItems})):void 0!==t.val()?(n.isInit=!1,this.filterData({term:t.val(),init:!0,callback:i})):n.isInit&&(n.isInit=!1,i({results:[]}))},formatId:function(t){return t[this.attrs.valueName||"id"]},formatResult:function(t,e,n){return t[this.attrs.labelName||"name"]},reset:function(){this.selectItems=[],this.selectValues=[],this.inputElement.select2("val","")},val:function(t){if(!t)return this.attrs.multi?this.selectValues:this.selectValues[0];this.inputElement.select2("val",t),this.selectValues=this.attrs.multi?t:[t];var e=","+this.selectValues.join(",")+",",n=this;this.loadData().then(function(t){n.selectItems=$.grep(t,function(t){return-1!=e.indexOf(","+n.formatId(t)+",")})})},item:function(){return this.attrs.multi?this.selectItems:this.selectItems[0]},render:function(){this.element.change()}},function(t,e,n){return new s(t,e,n)}}),angular.module("admin.component").factory("uiSpinnerFactory",function(t,e,n){var i=(new t("Spinner"),function(t,n,i){this.inputElement=n.find("input"),this.spinner=null,e.apply(this,arguments)});return i.prototype=$.extend(new e,{render:function(){this.spinner=this.element.spinner(this.attrs),this.attrs.model&&(this.attrs.value&&n.set(this.scope,this.attrs.model,this.attrs.value),this.element.on("changed",function(){n.set(this.scope,this.attrs.model,this.val()),this.$emit("change",this.val())}.bind(this)),this.scope.$watch(this.attrs.model,function(t){t!==this.val()&&this.val(void 0===t?"0":t)}.bind(this)))},change:function(t){this.$on("change",t)},reset:function(){this.inputElement.val("")},disabled:function(t){this.attr("disabled",t)},attr:function(t,e){return e?void this.inputElement.attr(t,e):this.inputElement.attr(t)},val:function(t){return void 0!==t?(this.inputElement.val(t),this):this.inputElement.val()}}),function(t,e,n,a,r){return new i(t,e,n,a,r)}}),angular.module("admin.component").factory("uiSwitchFactory",function(t,e,n){var i=(new t("Switch"),function(t,n,i){this.inputElement=n.find("input"),this.onValue=i.onValue||"on",this.offValue=i.offValue||"off",this.attrs=i,this.model=i.model,e.apply(this,arguments)});return i.prototype=$.extend(new e,{render:function(){if($.fn.bootstrapSwitch&&(this.inputElement.bootstrapSwitch({size:"small",onSwitchChange:this.onChangeHandler.bind(this)}),this.inputElement.bootstrapSwitch("state",this.attrs.value==this.onValue)),this.inputElement[0].checked=!0,this.model&&(this.scope.$watch(this.model,function(t){t!=this.val()&&this.val(t)}.bind(this)),!n.get(this.scope,this.model))){var t=this.offValue;n.set(this.scope,this.model,t||this.offValue)}},onChangeHandler:function(t,e){var i=e?this.onValue:this.offValue;this.inputElement.val(i),this.inputElement[0].checked=!0,this.$emit("change"),this.model&&n.set(this.scope,this.model,i)},reset:function(){this.inputElement.val()},disabled:function(t){this.inputElement.bootstrapSwitch("disabled","true"==t)},val:function(t){return void 0!==t?(this.inputElement.bootstrapSwitch("state",t==this.onValue),this):this.inputElement.val()}}),function(t,e,n,a,r){return new i(t,e,n,a,r)}}),angular.module("admin.component").factory("uiTabFactory",function(t,e,n,i){var a=(new t("Tab"),function(t,e,i){n.call(this),this.element=e,this.contentElement=e.find(".tab-content"),this["default"]=parseInt(i["default"]||0),this.attrs=i,this.scope=t,this.activeItem=null,this.items=[]});return a.prototype={init:function(){this.showAtIndex(this["default"])},change:function(t){this.$on("change",t)},remove:function(t){this.$on("remove",t)},getContainer:function(){return this.contentElement},showAtItem:function(t){if(t){this.activeItem&&this.activeItem.active(!1).hide();var e=this.getContainer();return t.active(!0).show().then(function(t){0===t.parent().length&&e.append(t),t.show()}),this.$emit("change",t,t.getIndex()),this.activeItem=t,this}},showAtIndex:function(t){this.showAtItem(this.items[t])},addItem:function(t){t.index=this.items.length,this.items.push(t),t.onActive(this.onActiveHandler.bind(this)),t.onRemove(this.onRemoveHandler.bind(this))},onActiveHandler:function(t){this.showAtItem(t)},onRemoveHandler:function(t,e){if(this.items.splice(e,1),this.activeItem==t){var n=e-1,i=e;n>=0&&n<=this.items.length-1?this.showAtIndex(n):i>=0&&i<this.items.length-1&&this.showAtIndex(i)}this.$emit("remove",t,t.getIndex())},addTab:function(t,e,n){var a=['<ui-tab-item head="'+t+'">',e,"</ui-tab-item>"],r=$(a.join(""));this.element.find("ul").append(r),i(r)(this.scope),n&&this.showAtIndex(this.items.length-1)}},function(t,e,n){return new a(t,e,n)}}),angular.module("admin.component").directive("uiTab",function(t,e){return{restrict:"E",replace:!0,transclude:!0,compile:function(){var n=null;return{pre:function(i,a,r){n=t(i,a,r);var o=r.ref||"$tab";i[o]=n,e.tiggerComplete(i,o,n)},post:function(){n.init()}}},template:function(t,n){return e.getTemplate("tpl.tab",n)}}}),angular.module("admin.component").factory("uiTabItemFactory",function(t,e,n,i){var a=(new e("TabItem"),function(t,e,n,a){i.call(this),this.scope=t,this.element=e,this.content=a?this.wrapperContent(a):null,this.elementTitle=e.find("span"),this.attrs=n,this.scope=t,this.items=[],this.dropdown=e.parent().hasClass("dropdown-menu")});return a.prototype={onClickHandler:function(){this.$emit("uitabitem.active",this)},onRemoveHandler:function(t){var e=this.getIndex();this.content&&this.content.remove(),this.element&&this.element.remove(),this.$emit("uitabitem.remove",this,e),delete this.listenerMap,t.stopPropagation()},onActive:function(t){this.$on("uitabitem.active",t)},onRemove:function(t){this.$on("uitabitem.remove",t)},active:function(t){var e=null;return e=this.dropdown?this.element.parent().parent():this.element,e[t?"addClass":"removeClass"]("active"),this},wrapperContent:function(t){return $("<div/>").addClass("tab-pane fade").append(t)},hide:function(){return this.content&&this.content.removeClass("active in").hide(),this},title:function(t){return t?void this.elementTitle.html(t):this.elementTitle.html()},show:function(){var e=$.Deferred();return this.content?e.resolve(this.content):this.attrs.url&&$.get(this.attrs.url,function(n){this.content=t(this.wrapperContent(n))(this.scope),e.resolve(this.content)}.bind(this)),e.promise().then(function(t){return t.addClass("active in"),t})},getIndex:function(){return this.element.index()}},function(t,e,n,i){return new a(t,e,n,i)}}),angular.module("admin.component").directive("uiTabItem",function(t,e){return{restrict:"E",replace:!0,transclude:!0,scope:!0,controller:function(n,i,a,r){var o=e.getComponentRef(i.parent(),"$tab"),s=t(n,i,a,r(n));n.$tabItem=s,n[o].addItem(s)},template:function(t,n){return e.getTemplate("tpl.tab.item",$.extend({tabRef:e.getComponentRef(t.parent(),"$tab"),index:t.index()},n))}}}),angular.module("admin.component").directive("uiTabListItem",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!0,template:function(e,n){return t.getTemplate("tpl.tab.list.item",$.extend({tabRef:t.getComponentRef(e.parent(),"$tab")},n))}}}),angular.module("admin.component").directive("uiTabRemoteItem",function(t,e){return{restrict:"E",replace:!0,scope:!0,controller:function(n,i,a){var r=e.getComponentRef(i.parent(),"$tab"),o=t(n,i,a);n.$tabItem=o,n[r].addItem(o)},template:function(t,n){return e.getTemplate("tpl.tab.item",$.extend({tabRef:e.getComponentRef(t.parent(),"$tab"),index:t.index()},n))}}}),angular.module("admin.component").controller("uiPortalController",function(t,e,n,i,a,r){var o=(new r("Portal"),0);t.$on("portletComplete",function(e,i){if(++o>=s){var a;n.sortable({connectWith:".portlet-container",items:".portlet-container",opacity:.8,coneHelperSize:!0,placeholder:"portlet-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",helper:"clone",cancel:".portlet-sortable-empty, .portlet-fullscreen",revert:250,start:function(t,e){a=e.item.next().next()},stop:function(e,i){for(var r=i.item,o=r.next(),s=r.data("portlet"),l=o?o.index():null;o.length>0;)o.data("portlet")&&(o.data("portlet").col=l++),o=o.next();for(var c=a?a.index():null;a.length>0;)a.data("portlet")&&(a.data("portlet").col=c++),a=o.next();s.row=r.parent().index(),s.col=r.index(),t.storePortlets(),n.find(".portlet-sortable-empty").each(function(t,e){var n=$(e);n.appendTo(n.parent())})}})}}),t.storePortlets=function(){var t={};$.each(l,function(e,n){t[n.url]={row:n.row,col:n.col}}),$.cookie(c,JSON.stringify(t))};var s,l,c=e.store||"portal";t.setPortlets=function(e){var n=i.toJSON($.cookie(c)||"{}"),a=[];o=0,s=e.length,l=e,$.each(l,function(e,i){var r=n[i.url],o=r?r.row:i.row,s=r?r.col:i.col;o<t.columns.length?t.setPortlet(o,s,i):a.push(i)}),$.each(a,function(e,n){t.setPortlet(e,n.col,n)}),t.resetColumns(),this.storePortlets()},t.setPortlet=function(e,n,i){var a=t.columns.length;e%=a,n=n,i.row=e,i.col=n,t.columns[e][n]=i},t.resetColumns=function(){for(var e=[],n=0;n<t.columns.length;n++)e.push([]);$.each(t.columns,function(t,n){$.each(n,function(n,i){if(i){i.col=e[t].length,e[t].push(i);var a=e[t][n-1];a&&(a.next=i)}})}),t.columns=e},t.columns=[];var u=e.column||2;t.eachColumn=12/u;for(var d=0;u>d;d++)t.columns.push([]);e.url?a.get(e.url).then(function(e){t.setPortlets(e)}):t.setPortlets([{url:"/static/portlet/portlet-1.jsp",row:0,col:0},{url:"/static/portlet/portlet-2.jsp",row:0,col:1},{url:"/static/portlet/portlet-3.jsp",row:1,col:0},{url:"/static/portlet/portlet-4.jsp",row:1,col:1},{url:"/static/portlet/portlet-5.jsp",row:1,col:2}])}),angular.module("admin.component").directive("uiPortal",function(){return{restrict:"E",replace:!0,controller:"uiPortalController",templateUrl:"tpl.portal"}}),angular.module("admin.component").directive("uiPortletAction",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"tpl.portal.portlet.action"}}),angular.module("admin.component").directive("uiPortletActionPagination",function(t){return{restrict:"E",replace:!0,link:function(e,n,i){var a=i.url,r=i.pageIndex,o=i.pageSize,s=i.pageLimit,l=i.pageDataName,c=i.pageTotalName,u=!1,d=new t(a,r,o,s,l,c),h=function(t){$.extend(e,t)};e.setUrl=function(t){d.url=t},e.load=function(t){t--,t==d.pageIndex&&u||(u=!0,d.getPage(t).then(h))},e.loadFirst=function(t){(!e.isFirst||t)&&d.prePage().then(h)},e.loadLast=function(t){(!e.isLast||t)&&d.nextPage().then(h)},e.load(1)},templateUrl:"tpl.portal.portlet.action.pagination"}}),angular.module("admin.component").directive("uiPortletActionSearch",function(t){return{restrict:"E",replace:!0,link:function(t,e,n){n.onEnter&&e.keydown(function(i){13==i.keyCode&&t[n.onEnter]&&t[n.onEnter](e.val())})},template:function(e,n){return t.getTemplate("tpl.portal.portlet.action.search",n)}}}),angular.module("admin.component").directive("uiPortletActionTab",function(t,e,n){return{restrict:"E",replace:!0,transclude:!0,compile:function(){var e=null;return{pre:function(n,i,a){e=t(n,i,a),e.getContainer=function(){return i.parents(".portlet").find(".portlet-body")},n[a.ref]=e},post:function(){e.items.length>0&&n(function(){e.showAtIndex(0)})}}},template:function(t,n){return n.ref=n.ref||"$portletActionTab"+(new Date).getTime(),e.getTemplate("tpl.portal.portlet.action.tab",n)}}}),angular.module("admin.component").directive("uiPortlet",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:!0,controller:function(e,n,i,a){var r=a(e),o=r.filter(".portlet-tool-bar");0===o.length&&$.each(r,function(t,e){return-1!=e.nodeName.indexOf("UI-PORTLET-ACTION")?(o=$(e),!1):void 0}),n.find(".portlet-body").append(r),0!==o.length&&o.insertAfter(n.find(".caption")),t.tiggerComplete(e,i.ref||"$portlet",e)},template:function(e,n){return t.getTemplate("tpl.portal.portlet",n)}}}),angular.module("admin.component").controller("uiPortletContainerController",function(t,e,n){n.data("portlet",t.portlet).load(t.portlet.url,function(){t.$emit("portletComplete")})}),angular.module("admin.component").directive("uiPortletContainer",function(){return{restrict:"E",replace:!0,controller:"uiPortletContainerController",templateUrl:"tpl.portal.portlet.container"}}),angular.module("admin.component").directive("uiTableCheckColumn",function(t,e,n){var i=new n("tableCheckColumn");return{restrict:"E",replace:!0,controller:function(n,a,r){r.checked=!0;var o=a.find("input"),s=e.getComponentRef(a.parents("table").parent(),"$table"),l=r.name;o.click(function(t){var e=t.target.checked;n[s].selectAllHandler(e,l),t.stopPropagation()}),n.$on("uitable.selectAllChecked",function(t,e){o[0].checked=e,$.fn.uniform&&o.uniform()});var c=function(t){var e=n[s].containItem(t);n[s].pageSelectNum.push(e?!0:!1),n.$on("uitable.selectAll",function(t,e){i[0].checked=e,$.fn.uniform&&i.uniform()});var i=$('<input type="checkbox" pk="'+t[l]+'"/>').val(t[l]).click(function(e){n[s].selectOneHandler(e.target.checked,r.name,t),e.stopPropagation()});return i[0].checked=e,i};n[s]&&n[s].addColumn?(n[s].setColumn(t(s,n,r,c),r.index),n[s].idName=l):i.error("uiTableCheckColumn必须放在uiTable里面")},templateUrl:"tpl.table.column.checked"}}),angular.module("admin.component").directive("uiTableDateColumn",function(t,e,n,i){var a=new i("tableColumn");return{restrict:"E",replace:!0,controller:function(i,r,o,s){var l=n.getComponentRef(r.parents("table").parent(),"$table"),c=o.format||"yyyy-MM-dd HH:mm:ss",u=o.name,d=function(t){var e=t[u];return e&&(e=s.dateFormatStr(e,c)),$("<div/>").html(e)};i[l]&&i[l].addColumn?i[l].setColumn(t(l,i,o,d,e),o.index):a.error("uiTableColumn必须放在uiTable里面")},template:function(t,e){return n.getTemplate("tpl.table.column",e)}}}),angular.module("admin.component").directive("uiTableImageColumn",function(t,e,n){var i=new n("TableImageColumn");return{restrict:"E",replace:!0,controller:function(n,a,r){var o=e.getComponentRef(a.parents("table").parent(),"$table"),s=r.placeholder||"http://usr.im/110x30?text=What",l=r.name,c=r.qiniu,u=r.imageWidth,d=r.imageHeight,h=function(t){var e=t[l];return e=void 0!==e?e:s,c&&(e+=c),$("<img/>").attr("src",e).css({width:u,height:d})};n[o]&&n[o].addColumn?n[o].setColumn(t(o,n,r,h),r.index):i.error("uiTableColumn必须放在uiTable里面")},template:function(t,n){return e.getTemplate("tpl.table.column",n)}}}),angular.module("admin.component").directive("uiTableColumn",function(t,e,n,i){var a=new n("tableColumn");return{restrict:"E",replace:!0,transclude:!0,controller:function(n,r,o,s){var l=e.getComponentRef(r.parents("table").parent(),"$table"),c=s().length>0,u=o.name||"",d=function(t){if(c){var e=null;return s(n.$new(),function(n,i){i.data=t,e=n}),e}var i="render"+u.charAt(0).toUpperCase()+u.substr(1),a=t[u];if(n[i])return n[i](t);if(u&&-1!=u.indexOf(".")){var r,o=u.split(".");for(a=t;(r=o.shift())&&a;)a=a[r]}return void 0!==a?$("<div/>").html(a):a};if(n[l]&&n[l].addColumn){var h=null;if(void 0!==o.editable){var m="uiEditable"+o.editable.charAt(0).toUpperCase()+o.editable.substring(1)+"Factory";try{h=i.get(m)}catch(p){h=i.get("uiEditableInputFactory")}}n[l].setColumn(t(l,n,o,d,h),o.index)}else a.error("uiTableColumn必须放在uiTable里面")},template:function(t,n){return e.getTemplate("tpl.table.column",n)}}}),angular.module("admin.component").directive("uiTableOperationColumn",function(t,e,n){var i=new n("tableColumn");return{restrict:"E",replace:!0,transclude:!0,controller:function(n,a,r,o){var s=e.getComponentRef(a.parents("table").parent(),"$table"),l=function(t){var e=null;return o(n.$new(),function(n,i){i.data=t,e=n}),e};n[s]&&n[s].addColumn?n[s].setColumn(t(s,n,r,l),r.index):i.error("uiTableColumn必须放在uiTable里面")},template:function(t,n){return n.head=n.head||"操作",e.getTemplate("tpl.table.column",n)}}}),angular.module("admin.component").constant("uiTableProgressColumnTpl",['<div style="border: 1px solid #57b5e3;" class="progress progress-striped active" role="progressbar"style="margin-bottom:0px;">','<div class="progress-bar"></div>',"</div>"].join("")).directive("uiTableProgressColumn",function(t,e,n,i){var a=new i("TableProgressColumn");return{restrict:"E",replace:!0,controller:function(i,r,o){var s=e.getComponentRef(r.parents("table").parent(),"$table"),l=o.name,c=function(t){var e=t[l],i="progress-bar-success";e=void 0!==e?e:0,25>=e?i="progress-bar-danger":50>=e?i="progress-bar-danger":75>=e&&(i="progress-bar-info");var a=$(n).attr("title",e+"%").find("div").addClass(i).animate({width:e+"%"}).end();return a};i[s]&&i[s].addColumn?i[s].setColumn(t(s,i,o,c),o.index):a.error("uiTableProgressColumn必须放在uiTable里面")},template:function(t,n){return e.getTemplate("tpl.table.column",n)}}}),angular.module("admin.component").filter("emptyFilter",function(){return function(t,e){return t||e||"-"}}).factory("uiTableColumnService",function(t){new t("TableColumnService");return function(t,e,n,i,a,r){
var o={sName:n.name||"",mTitle:n.head,bEditable:n.editable,bChecked:n.checked,mEditUrl:n.editUrl,mAttrs:n,sClass:n.css||"",sWidth:n.width||"smart",bVisible:void 0===n.novisible,bSortable:void 0!==n.sort,mDataProp:function(o,s){if("display"!=s)return"";if(3==arguments.length)return arguments[2];var l=i?i.apply(this,arguments):o[n.name];if(l=void 0!==l?l:"-",void 0!==l&&angular.isString(l)&&(l=$.trim(l),l=l.length?l:"-",l="<div>"+l+"</div>"),void 0!==n.editable&&a){var c=null,u={url:e[t].editUrl,title:n.head,pk:e[t].getIdByData(o),name:n.name,rule:e[t].getRuleByName(n.name),value:o[n.name]};e.$on("uitable.editabled",function(t,e){e&&c?c.show():e?c=a(l,n,u,r):c.hide()})}return l}};return o}}),angular.module("admin.component").directive("uiTableStateColumn",function(t,e,n,i){var a=new i("tableColumn");return{restrict:"E",replace:!0,transclude:!0,controller:function(i,r,o,s){var l=n.getComponentRef(r.parents("table").parent(),"$table"),c=o.tpl,u=o.name,d=o["default"],h=function(t){var e=t[u],n=null;if(c);else{var a=i.$new();a.data=t,s(a,function(t){if(n=t.filter('[state="'+e+'"]'),0===n.length&&(n=t.filter('[state="'+d+'"]')),0===n.length)for(var i,a=0;a<t.length;a++)if(i=t[a],i.innerHTML&&-1!=i.innerHTML.indexOf(d)){n=$(i);break}})}return n.length>0?n:null};if(i[l]&&i[l].addColumn){var m=[];s().each(function(t,e){var n=$(e),i=n.attr("state"),a=n.html();i&&a&&m.push({value:i,text:a})}),i[l].setColumn(t(l,i,o,h,e,m),o.index)}else a.error("uiTableColumn必须放在uiTable里面")},template:function(t,e){return n.getTemplate("tpl.table.column",e)}}}),angular.module("admin.component").directive("uiFormDate",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",placeholder:"@",model:"=",change:"&",help:"@"},link:function(e,n,i){new t(e,n,i)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change()" ng-model="model" readonly="true"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormDateRange",function(t,e,n){return{restrict:"E",replace:!0,link:t,template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.input.daterange",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormInput",function(t,e,n){return{restrict:"E",replace:!0,link:t,template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.input",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormTextarea",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,i,a){var r=e.find("textarea");t.$on("uiform.reset",function(){r.val("")}),r.html(a().text()),e.removeAttr("name").removeAttr("model").removeAttr("rows").removeAttr("cols")},template:function(n,i){var a=(i.col||e).split(":");return t.getTemplate("tpl.form.textarea",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormRegion",function(t,e,n){return{restrict:"E",replace:!0,link:t,template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.region",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormSelect",function(t,e,n){return{restrict:"E",replace:!0,transclude:!0,link:t,template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.select",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormMultiSelect",function(t,e,n,i){return{restrict:"E",replace:!0,transclude:!0,link:e,template:function(t,e){var a=(e.col||i).split(":");return n.getTemplate("tpl.form.select",$.extend({isMulti:!0,leftCol:a[0],rightCol:a[1],other:[{key:"multiple",val:""},{key:"title",val:e.tip||"请选择"}]},e))}}}),angular.module("admin.component").directive("uiFormRemoteSelect",function(t,e,n){return{restrict:"E",replace:!1,transclude:!0,link:function(n,i,a){var r=t(n,i,$.extend({multi:!0},a));e.tiggerComplete(n,a.ref||"$formRemoteSelect",r),n.$on("uiform.reset",function(){r.reset()}),i.removeAttr("name").removeAttr("readonly").removeAttr("model")},template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.input",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormSpinner",function(t,e,n){return{restrict:"E",replace:!0,link:t,template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.spinner",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiFormSwitch",function(t,e,n){return{restrict:"E",replace:!0,transclude:!0,link:t,template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.form.switch",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiSearchDate",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,i){new t(e,n,i)},template:'\n                 <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change()" readonly="true"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchDateRange",function(t,e){return{restrict:"E",replace:!0,link:t,template:function(t,n){return e.getTemplate("tpl.searchform.daterange",n)}}}),angular.module("admin.component").directive("uiSearchInput",function(t,e){return{restrict:"E",replace:!0,link:t,template:function(t,n){return e.getTemplate("tpl.searchform.input",n)}}}),angular.module("admin.component").directive("uiSearchNumberInput",function(t){return{restrict:"E",replace:!0,link:function(t,e){var n=e.find("input");t.$on("uisearchform.reset",function(){n.val("")}),n.onkeyup(function(t){var e=this.value;e=e.replace(/[^\d]/g,""),this.value=e}),e.removeAttr("name").removeAttr("readonly").removeAttr("model")},template:function(e,n){return t.getTemplate("tpl.searchform.input",n)}}}),angular.module("admin.component").directive("uiSearchInputSelect",function(t,e,n,i){var a=new i("SearchInputSelect");return{restrict:"E",replace:!0,transclude:!0,link:function(i,r,o){var s=o.selectName&&o.inputName,l=new e(i,r,o),c=new t(i,r,o);n.tiggerComplete(i,o.ref||"$searchInputSelect",{select:c,input:l}),s||(o.selectName||o.inputName?a.error("必须同时设置select-name和input-name, 要么不设置, 要么全设置"):(c.change(function(){l.attr("name",c.val())}),l.attr("name",c.val()))),i.$on("uisearchform.reset",function(){c.reset(),l.reset()})},template:function(t,e){return n.getTemplate("tpl.searchform.input.select",e)}}}),angular.module("admin.component").directive("uiSearchRegion",function(t,e){return{restrict:"E",replace:!0,link:t,template:function(t,n){return e.getTemplate("tpl.searchform.region",n)}}}),angular.module("admin.component").directive("uiSearchSelect",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:t,template:function(t,n){return e.getTemplate("tpl.searchform.select",n)}}}),angular.module("admin.component").directive("uiSearchMultiSelect",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:t,template:function(t,n){return e.getTemplate("tpl.searchform.select",$.extend({isMulti:!0,other:[{key:"multiple",val:""},{key:"title",val:n.tip||"请选择"}]},n))}}}),angular.module("admin.component").directive("uiSearchRemoteSelect",function(t,e,n){return{restrict:"E",replace:!0,transclude:!0,link:function(n,i,a){var r=t(n,i,$.extend({multi:!0},a));e.tiggerComplete(n,a.ref||"$searchRemoteSelect",r),n.$on("uisearchform.reset",function(){r.reset()}),i.removeAttr("name").removeAttr("readonly").removeAttr("model")},template:function(t,i){var a=(i.col||n).split(":");return e.getTemplate("tpl.searchform.userselect.input",$.extend({leftCol:a[0],rightCol:a[1]},i))}}}),angular.module("admin.component").directive("uiSearchUserSelect",function(t,e,n){return{restrict:"E",replace:!0,link:function(i,a,r){var o=t(i,a,$.extend({},n,r));e.tiggerComplete(i,r.ref||"$searchUserSelect",o),i.$on("uisearchform.reset",function(){o.reset()}),a.removeAttr("name").removeAttr("model")},template:function(t,n){return e.getTemplate("tpl.searchform.userselect.input",n)}}}),function(){var t=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.logger=new Logger("uiStateButton"),this.message=new Message("uiStateButton")}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;n||r(e,t);var l={};return null!==t&&o(e,t),e.prototype=s(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.init=function(){var t=this;this.scope.clickHandler||this.message.error("必须设置ng-click属性"),this.element.click(function(){t.disable(!0);var e=t.scope.clickHandler();t.wait(e)})},l.wait=function(t){var e=this;t&&t["finally"]?t["finally"](function(){return e.disable(!1)}):this.disable(!1)},l.disable=function(t){this.scope.target&&Metronic[""+(t?"":"un")+"blockUI"](this.scope.target),this.element.prop("disabled",t)},r(e.prototype,l),l=void 0,e}(Event);angular.module("admin.component").directive("uiStateButton",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{target:"@target",clickHandler:"&ngClick"},link:function(e,n,i){var a=new t(e,n,i);a.init()},template:"tpl.button.state"}})}(),function(){angular.module("admin.component").directive("uiBreadcrumb",function(t){var e=function(e){"use strict";function n(t){this.scope=t,this.message=new Message("uiBreadcrumb"),this.ajax=new Ajax}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,r(e,n));return t},s=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;i||o(n,e);var c={};return null!==e&&s(n,e),n.prototype=l(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),a(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var e=this;this.scope.datas?this.handler(t.toJSON(this.scope.datas)):this.scope.url?this.ajax.post(this.scope.url).then(function(t){return e.handler(t)}):this.message.error("至少设置data或者url来配置面包屑")},c.handler=function(t){this.scope.items=(t||[]).map(function(t){return{name:t.name?t.name:t,url:t.url?t.url:""}})},o(n.prototype,c),c=void 0,n}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{datas:"@",url:"@"},link:function(t){new e(t).init()},template:'\n                    <div class="page-bar">\n                        <ul class="page-breadcrumb">\n                            <li ng-repeat="item in items">\n                                <a ng-href="item.url" ng-bind="item.name"></a>\n                                <i ng-if="!$last" class="fa fa-angle-right"></i>\n                            </li>\n                        </ul>\n                    </div>\n                '}})}(),function(){angular.module("admin.component").directive("uiContainer",function(t,e,n){var i=function(i){"use strict";function a(t,e,n){this.scope=t,this.element=e,this.content=n(t),this.scope.$on("componentComplete",this.initHandler.bind(this))}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,s(e,n));return t},c=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;r||l(a,i);var d={};return null!==i&&c(a,i),a.prototype=u(null!==i?i.prototype:null,{constructor:{value:a,configurable:!0,writable:!0}}),o(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),d.init=function(){this.element.show().append(this.content),this.lazyInit()},d.lazyInit=function(){var i=this,a=this.scope.controller;t(function(){if(a&&window[a]){var t=/\(([^\)]+)\)/.exec(window[a].toString())[1],r={$scope:i.scope};t=t.split(",");for(var o,s=1;s<t.length;s++)o=$.trim(t[s]),r[o]=n.get(o);e(window[a],r)}else a&&e(a,{$scope:i.scope});i.scope.$emit("uicontainer.ready")})},d.initHandler=function(t,e){e&&(this.scope[e.ref]=e.component)},l(a.prototype,d),d=void 0,a}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{controller:"@"},link:function(t,e,n,a,r){new i(t,e,r).init()},template:"\n                    <div></div>\n                "}})}(),angular.module("admin.component").factory("uiMenuFactory",function(t,e,n){var i=(new t("Menu"),function(t,e,i){n.call(this),this.element=e,this.attrs=i,this.scope=t,this.activeItem=null,this.init()});return i.prototype={init:function(){this.scope.activeItem=null,this.scope.menuItems=[],this.scope.onClickHandler=this.onClickHandler.bind(this),this.attrs.url&&this.setUrl(this.attrs.url)},setUrl:function(t){e.get(t).then(function(t){this.setData(t)}.bind(this))},setData:function(t){this.scope.menuItems=t},onClickHandler:function(t){this.scope.activeItem&&(this.scope.activeItem.active=!1),this.scope.activeItem=t,this.scope.activeItem.active=!0}},function(t,e,n,a,r){return new i(t,e,n,a,r)}}),angular.module("admin.component").directive("uiMenu",function(){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e){e.find(" li a").click(function(t){var e=$(t.target);e.parent().parent().find("li").removeClass("active"),e.parent().parent().find(".arrow").removeClass("open"),e.parent().addClass("active"),e.find(".arrow").addClass("open")});var n=e.find('a[href="'+window.location.hash+'"]');n=n.length>0?n:e.find('a[href="'+window.location.hash.replace(/\/[^\/]+$/,"")+'"]'),n.parents("li").each(function(t,e){var n=$(e);n.addClass("active"),n.find(" > a .arrow").addClass("open")})},templateUrl:"tpl.menu"}}),angular.module("admin.component").factory("uiTableEditableFactory",function(t){var e=(new t("TableEditable"),function(){this.editUrl=this.attrs.editUrl||"",this.editUrl=this.editUrl+(-1==this.editUrl.indexOf("?")?"?":"&")+"idName="+this.attrs.idName,this.editFormName=this.attrs.formName,this.editRuleMap={},this.editFormName?$.getJSON("/validator?cm="+this.editFormName,function(t){this.editRuleMap=t}.bind(this)):this.editUrl,this.toggleEdit=function(t){this.scope.$broadcast("uitable.editabled",t)},this.getRuleByName=function(t){return this.editRuleMap[t]||{}}});return e}),angular.module("admin.component").factory("uiTableFactory",function(t,e,n,i,a,r,o,s){var l=new r("table"),c=function(t,n,i){o.call(this),this.columns=[],this.nopageMode=void 0!==i.nopage,this.idName=i.idName,this.pageResult={},this.selectValues=[],this.selectItems=[],this.instance=null,this.element=n,this.scope=t,this.attrs=i,this.searchParams=null,this.pageSelectNum=[],e.call(this)};return c.prototype={initTable:function(){this.instance=t(this,this.element,this.attrs,this.columns),this.element.on("click","tr",function(t){})},initEvnet:function(){},setColumn:function(t,e){if(e=parseInt(e),e&&!isNaN(e)?this.columns.splice(e,0,t):(e=this.columns.length,this.columns.push(t)),this.instance){var n=this.instance.fnSettings(),i=n.aoHeader[0],a=this.element.find("th").eq(e)[0],r=n.aoColumns;t.fnGetData=t.mDataProp,t=$.extend({},r[r.length-1],t),i.splice(e,0,{cell:a,unique:!0}),r.splice(e,0,t)}$.each(this.columns,function(t,e){e.mIndex=t})},addColumn:function(t,e,n){var i='<ui-table-column head="'+t+'" name="'+e+'" data-index="'+n+'"></ui-table-column>';this.addCustomColumn(i,n)},addCustomColumn:function(t,e){var n=this.element.find("tr:eq(0)"),i=n.find(void 0==e?"th:last-child":"th:eq("+e+")"),a=$(t);a.insertAfter(i),s(a)(this.scope)},removeColumnAtIndex:function(t){this.element.find("tr:eq(0) th:eq("+t+")").remove();var e=this.instance.fnSettings();e.aoHeader[0].splice(t,1),e.aoColumns.splice(t,1),this.columns.splice(t,1)},getDataAtIndex:function(t){return this.pageResult.aaData?this.pageResult.aaData[t]:null},getIdByIndex:function(t){var e=this.getDataAtIndex(t);return this.getIdByData(e)},getIdByData:function(t){return t?t[this.idName]:null},containItem:function(t){for(var e=t[this.idName],n=0;n<this.selectValues.length;n++)if(this.selectValues[n]===e)return!0;return!1},getDomsByColumnIndex:function(t){var e=[];return this.element.find("tr:gt(0)").each(function(n,i){e.push($("td",i).eq(t))}),e},getIdByIndex:function(t){var e=this.getDataAtIndex(t),n=e?e[this.idName]:null;return n},beforeDataHandler:function(t){this.pageResult=t,this.nopageMode&&(this.selectItems=[]),this.pageSelectNum=[],this.$emit("uitable.dataSuccess",t)},afterDataHandler:function(t){$.fn.uniform&&this.element.find("input[type=checkbox]").uniform();{var e=0;this.element.find("tr:gt(0)")}$.each(this.pageSelectNum,function(t,n){n&&e++}),this.scope.$broadcast("uitable.selectAllChecked",this.pageResult.aaData&&e==this.pageResult.aaData.length&&0!=e),this.$emit("uitable.renderSuccess",t)},errorDataHandler:function(t){this.$emit("uitable.dataFail",t)},refresh:function(t,e){this.searchParams=t||this.searchParams,this.url=e||this.url,this.instance.fnPageChange(this.getCurrentPage()-1),this.$emit("uitable.refreshData")},jumpTo:function(t){/^\d+$/.test(t)?t=parseInt(t)-1:void 0==t&&(t=this.getCurrentPage()-1),this.instance.fnPageChange(void 0!=t?Math.abs(t):"first"),this.$emit("uitable.refreshData")},getCurrentPage:function(){var t=this.instance.fnSettings();return Math.ceil(t._iDisplayStart/t._iDisplayLength)+1},search:function(t,e){this.$emit("uitable.beforeSearch"),this.selectItems=[],this.selectValues=[],this.searchParams=t||this.searchParams,this.url=e||this.url,this.jumpTo(1)},items:function(t,e){e=e||this.idName;var n=this;this.selectItems=t,this.selectValues=$.map(this.selectItems,function(t){{var i=t[e];n.element.find('[pk="'+i+'"]').attr("checked",!0)}return i})},cleanSelect:function(t){t?(this.selectItems=[],this.selectValues=[]):this.selectAllHandler(!1)},selectAllHandler:function(t,e){e=e||this.idName;var n=this.pageResult.aaData||[],i=function(){this.selectItems=t?this.selectItems.concat($.grep(n,function(t){return!this.containItem(t)}.bind(this))):$.grep(this.selectItems,function(t){for(var e=0;e<n.length;e++)if(n[e][this.idName]==t[this.idName])return!1;return!0}.bind(this)),this.selectValues=$.map(this.selectItems,function(t){return t[e]}),this.scope.$broadcast("uitable.selectAll",t)}.bind(this);this.scope.$$phase?i():this.scope.$apply(i)},selectOneHandler:function(t,e,n){e=e||this.idName,this.scope.$apply(function(){if(t)this.selectItems.push(n),this.selectValues.push(n[e]);else for(var i,a=0;i=this.selectItems[a];a++)if(i[e]==n[e]){this.selectItems.splice(a,1),this.selectValues.splice(a,1);break}this.scope.$broadcast("uitable.selectAllChecked",this.selectItems.length==this.pageResult.aaData.length&&0!=this.selectItems.length)}.bind(this))},cleanState:function(){this.attrs.stateKey?a.post("/dataTable/stateClean",{sStateKey:this.attrs.stateKey}).then(function(){l.success("表格缓存信息更新成功！"),setTimeout("window.location.href = window.location.href;",1e3)}):l.error("该表格没有设置缓存！")}},function(t,e,n){return new c(t,e,n)}}),angular.module("admin.component").directive("uiTable",function(t,e){return{restrict:"E",replace:!0,transclude:!0,compile:function(){var n=null;return{pre:function(i,a,r){var o=r.ref||"$table";n=t(i,a,r),i[o]=n,e.tiggerComplete(i,o,n)},post:function(){n.initTable()}}},templateUrl:"tpl.table"}}),angular.module("admin.component").provider("uiTableDelegate",function(){return{$get:function(t,e,n){return function(i,a,r,o){var s=r.stateKey,l="",c=$(a.find("table")).dataTable({bDestroy:!0,sDom:"<'table-scrollable't><'row'<'col-md-3 col-sm-12'li>r<'col-md-7 col-sm-12'p>>",bPaginate:void 0===r.nopage,bLengthChange:!0,bFilter:!1,bSort:!0,bInfo:void 0===r.nopage,bAutoWidth:!1,bStateSave:!0,aoColumns:o,aaSorting:t.toJSON(r.sort||"[]"),fnInitComplete:function(){if(void 0==r.nopage)try{var t=this.parent().parent().find("div.row"),e=$(['<div class="col-md-2">','<div class="input-group">','<input type="text" class="form-control" placeholder="跳转页数">','<span class="input-group-btn">','<a href="javascript:;" class="btn green" style="font-size: 12px;">Go</a>',"</span>","</div>","</div>"].join("")),a=function(){var t=s.val();/\d+/.test(t)?i.jumpTo(t):s.val("")},o=e.find("a"),s=e.find("input");t.append(e),o.click(a),$(document).keydown(function(t){13==t.keyCode&&a(),t.stopImmediatePropagation()})}catch(l){n.error(l)}},fnServerData:function(t,n,a){if(!r.url&&!i.url||void 0!=r.manual)return delete r.manual,void a({aaData:[],iTotalRecords:0,iTotalDisplayRecords:0});var o=i.url||r.url;if(i.searchParams){var s=[];$.isArray(i.searchParams)?s=i.searchParams:$.each(i.searchParams,function(t,e){s.push({name:t,value:e})}),n=n.concat(s)}e.post(o,n).then(function(t){$.isArray(t)?t={aaData:t,iTotalDisplayRecords:t.length,iTotalRecords:t.length}:r.nameData&&r.nameTotal&&(t={aaData:t[r.nameData],iTotalDisplayRecords:t[r.nameTotal],iTotalRecords:t[r.nameTotal]}),i.beforeDataHandler(t),a(t),i.afterDataHandler(t)},function(t){i.errorDataHandler(t)})["finally"](function(t){i.$emit("uitable.requestComplete")})},fnStateLoadParams:function(t,e){},fnStateLoad:function(t,e){var n=void 0;return"undefined"!=typeof s&&s.length>0&&$.ajax({url:"/dataTable/stateLoad",data:{sStateKey:s},type:"POST",dataType:"json",cache:!1,async:!1,timeout:1e3,success:function(t){"ok"==t.result&&null!=t.data&&""!=t.data&&(n=t.data,l=n.aaSorting.toString()+n.abVisCols.toString()+n.iLength)}}),n},fnStateSaveParams:function(t,e){"undefined"!=typeof s&&s.length>0&&(e.sStateKey=s,e.oSearch="",e.aoSearchCols="",e.iStart=0)},fnStateSave:function(t,n){if("undefined"!=typeof s&&s.length>0){var i=n.aaSorting.toString()+n.abVisCols.toString()+n.iLength;l!=i&&e.post("/dataTable/stateSave",{data:JSON.stringify(n)}).then(function(){l=i})}},oLanguage:{sProcessing:'<img src="http://7xi8np.com1.z0.glb.clouddn.com/assets/img/loading-spinner-grey.gif"/><span>&nbsp;&nbsp;正在查询.. .</span>',sLengthMenu:"每页显示 _MENU_ 条",sZeroRecords:"请选择条件后，点击搜索按钮开始搜索",sInfo:"<label>当前第 _START_ - _END_ 条　共计 _TOTAL_ 条</label>",sInfoEmpty:"没有符合条件的记录",sInfoFiltered:"(从 _MAX_ 条记录中过滤)",sSearch:"查询",oPaginate:{sFirst:"首页",sPrevious:"上一页",sNext:"下一页",sLast:"尾页"}},sPaginationType:"bootstrap_full_number",aLengthMenu:[[10,20,30,60],[10,20,30,60]],bProcessing:!0,bServerSide:!0});return c}}}}),angular.module("admin.component").factory("uiTableToolBarFactory",function(t,e,n){var i=new t("TableToolBar"),a=function(t,e,n,i){this.scope=t,this.element=n,this.tableId=e,this.attrs=i,this.blank=","+(i.blank||"")+",",this.isEdit=!1,this.editText="开启"};return a.prototype={isShow:function(t,e){return-1==this.blank.indexOf(","+t+",")&&!e.bChecked},toggleColumn:function(t,e){e.bVisible=!e.bVisible,this.scope[this.tableId]&&this.scope[this.tableId].instance.fnSetColumnVis(e.mIndex,e.bVisible,!1),t.stopPropagation()},toggleEdit:function(){this.isEdit=!this.isEdit,this.editText=this.isEdit?"关闭":"开启",this.scope[this.tableId].toggleEdit(this.isEdit)},getHideBeforeIndex:function(t){for(var e=this.instance.fnSettings().aoColumns,n=0,i=0;t>i;i++)e[i].bVisible&&n++;return n},doAddItem:function(){this.scope.addItem?this.scope.addItem():this.attrs.add?n.get("$state").go(this.attrs.add):i.error('点击添加数据按钮，但是没有设置地址, 请在add="地址"')},doDelItem:function(t){this.scope.delItem?this.scope.delItem(t):this.attrs.del?t.length>1?e.remove(this.attrs.del,{ids:t.join(",")}).then(function(){this.scope[this.tableId].refresh()}.bind(this)):e.remove(this.attrs.del+"/"+t[0]).then(function(){this.scope[this.tableId].refresh()}.bind(this)):i.error('点击删除数据按钮，但是没有设置地址, 请在del="地址"')}},function(t,e,n,i){return new a(t,e,n,i)}}),angular.module("admin.component").directive("uiToolBarTable",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(n,i,a){i.find('[data-hover="dropdown"]').dropdownHover();var r=e.getComponentRef(i.parent().find(".ui-table"),"$table"),o=a.ref||"$tableToolBar",s=t(n,r,i,a);n[o]=s,e.tiggerComplete(n,o,s)},template:function(t,n){return e.getTemplate("tpl.toolbar.table",{editable:void 0!=n.editable,add:void 0!=n.add,del:void 0!=n.del,table:e.getComponentRef(t.parent().find("ui-table"),"$table"),ref:e.getComponentRef(t,"$tableToolBar"),tip:n.tip||"数据",deltip:n.deltip||"删除"})}}}),angular.module("admin.component").directive("tooltip",function(){return{restrict:"A",replace:!1,link:function(t,e,n){var i=n.tooltip,a=n.title,r=n.placement||(a?"right":"top");a?e.popover({title:a,content:i,placement:r,trigger:"hover"}):e.tooltip({title:i,placement:r})}}}),angular.module("admin.component").factory("uiTreeFactory",function(t,e,n,i,a,r,o){var s=new r("Tree"),l=function(t,e,n){o.call(this),this.scope=t,this.element=e,this.attrs=n,this.instance=null,this.selectItems=[],this.selectValues=[],this.treeNodeBtns=[],this.searchModel=n.searchModel,this.searchMode=n.searchMode,this.checkedValues=(n.setCheck||"").split(","),this.init()};return l.prototype={init:function(){if(void 0!=this.attrs.region?n.getDataList(this.attrs.region||"s").then(function(t){this.setData(t)}.bind(this)):this.attrs.url&&t.post(this.attrs.url).then(function(t){this.setData(t)}.bind(this)),void 0!=this.attrs.onAdd&&this.addTreeNodeBtn("新增","add",this.onTreeNodeAddClickHandler.bind(this)),void 0!=this.attrs.onEdit&&this.addTreeNodeBtn("编辑","edit",this.onTreeNodeEditClickHandler.bind(this)),void 0!=this.attrs.onDel&&this.addTreeNodeBtn("删除","remove",this.onTreeNodeDelClickHandler.bind(this)),this.searchModel){var e=this;this.scope.$watch(this.searchModel,function(t){void 0!=t&&e.filter(t)})}},refresh:function(e,n){return(n=n||this.attrs.url)?t.post(n,e||{}).then(function(t){this.setData(t)}.bind(this)):void s.error("未设置url, 无法请求")},filter:function(t){if(this.dataList){var e=this.dataList;if(t){t=t.toLowerCase();var n=this;e=[],$.each(this.dataList,function(i,a){-1!=a.name.toLowerCase().indexOf(t)&&(e=e.concat(n.getHierarchyDataById(a.id)))});var i=[],a={};$.each(e,function(t,e){a[e.id]||i.push(e),a[e.id]=e}),e=i}this.setData(e,null,!0),this.expandAll(!0)}},addTreeNodeBtn:function(t,e,n){this.addTreeNodeBtnAtIndex(this.treeNodeBtns.length,t,e,n)},addTreeNodeBtnAtIndex:function(t,e,n,i){this.treeNodeBtns.splice(t,0,{label:e,className:n,handler:i})},onTreeNodeAddClickHandler:function(t){var e=this.attrs.onAdd;e&&this.scope[e]?this.scope[e](t):s.error("设置了on-add, 但是未发现处理函数")},onTreeNodeDelClickHandler:function(t){var e=this.attrs.onDel;e&&this.scope[e]?this.scope[e](t):s.error("设置了on-del, 但是未发现处理函数")},onTreeNodeEditClickHandler:function(t){var e=this.attrs.onEdit;e&&this.scope[e]?this.scope[e](t):s.error("设置了on-edit, 但是未发现处理函数")},setData:function(t,n,i){if(t=t.menuTreeList||t||[],i||(this.dataList=t,this.dataMap={},$.each(t,function(t,e){this.dataMap[e.id]=e}.bind(this))),void 0!=this.attrs.root){var a=this.attrs.root||"根目录",r=this.attrs.rootId||"0";t.push({id:r,open:"true",pid:null,name:a,type:"1"})}this.$emit("dataSuccess",t),this.instance=$.fn.zTree.init(this.element,e(this),t),this.expand(n),this.checkedValues&&this.checked(this.checkedValues);var o=$.grep(t,function(t){return t.checked+""=="true"});this.item(this.selectItems.concat(o))},getHierarchyById:function(t){var e=[],n=this.getById(t);if(n)for(e.push(n);n=n.getParentNode();)e.unshift(n);return e},getHierarchyDataById:function(t){var e=[],n=this.getDataById(t);if(n)for(e.push(n);n=this.getDataById(n.pid);)e.unshift(n);return e},getById:function(t){return this.instance.getNodeByParam("id",t)},getDataById:function(t){return this.dataMap[t]},expand:function(t){if(t=t||this.attrs.expand,"all"==t)return void this.expandAll(!0);if(void 0!=t){var e=this.instance,n=e.getNodes()[0],i=function(t,n){if(t&&t.children&&n-->1)for(var a=0;a<t.children.length;a++)e.expandNode(t.children[a],!0,!1,!1),i(t.children[a],n)};1==t?e.expandNode(n,!0,!1,!1):i(n,t)}},expandAll:function(t){this.instance.expandAll(t)},expandById:function(t){var e=this.getById(t);e?this.instance.expandNode(e,!0,!1,!1):s.error("未找到id为["+t+"]的节点, 无法展开")},checked:function(t,e){e&&(this.selectItems=[],this.selectValues=[]);for(var n,i=[],a=0;a<t.length;a++)if(n=t[a]){var r=this.instance.getNodeByParam("id",n,null);r&&(this.instance.checkNode(r,!0,!0),i.push(r))}this.item(i)},item:function(t){return t?(this.selectItems=t,void(this.selectValues=$.map(this.selectItems,function(t){return t.id}))):this.selectItems},val:function(){},cleanChecked:function(){var t=this;$.each(this.selectItems,function(e,n){var i=t.instance.getNodeByParam("id",n.id,null);t.instance.checkNode(i,!1,!0)})},setSelectData:function(t){this.selectItems=t,this.selectValues=$.map(this.selectItems,function(t){return t.id})}},function(t,e,n){return new l(t,e,n)}}),angular.module("admin.component").directive("uiTree",function(t,e){return{restrict:"E",replace:!0,link:function(n,i,a){var r=t(n,i,a);e.tiggerComplete(n,a.ref||"$tree",r)},template:function(t,e){return e.treeId=(new Date).getTime(),'<ul id="tree'+e.treeId+'" class="ztree" style="width:100%; overflow:auto;"></ul>'}}}),angular.module("admin.component").provider("uiTreeConfig",function(){var t={check:{enable:!0},edit:{enable:!1},data:{key:{name:"name",childs:"childs",title:"name"},simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:"0"}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeClick:null,onClick:null,onCheck:null}},e=function(t,e){var n=$("#"+e.tId+"_span"),i=$("<span class='button'></span>").addClass(t.className).attr("title",t.label).click(function(n){t.handler(e),n.stopPropagation()});return n.append(i),{show:function(){i.show()},hide:function(){i.hide()}}},n=function(e){$.extend(this,t),this.tree=e,this.check.enable="false"!=e.attrs.check,this.edit.enable="true"==e.attrs.edit,this.callback={beforeClick:this.call.bind(this,"onBeforeClick"),onClick:this.call.bind(this,"onClick"),beforeCheck:this.call.bind(this,"onBeforeCheck"),onCheck:this.onCheck.bind(this)},this.view={addHoverDom:this.onMouseEnterHandler.bind(this),removeHoverDom:this.onMouseLeaveHandler.bind(this)},this.treeNodeBtnMap={}};return n.prototype={onMouseEnterHandler:function(t,n){this.treeNodeBtnMap[n.id]=this.treeNodeBtnMap[n.id]||{};var i=this.treeNodeBtnMap[n.id],a=this.tree.treeNodeBtns;$.each(a,function(t,a){var r=i[a.label];r||(r=e(a,n),i[a.label]=r),r.show()})},onMouseLeaveHandler:function(t,e){$.each(this.treeNodeBtnMap[e.id]||{},function(t,e){e.hide()})},onCheck:function(t,e,n){var i=this.tree.instance.getCheckedNodes(!0);this.tree.setSelectData(i),this.call("onCheck",["",t,e,n])},call:function(t){var e=arguments,n=this.tree.attrs[t],i=this.tree.scope;if(n){e=Array.prototype.slice.call(e,1);var a=i[n].apply(i,e);try{i.$apply()}catch(r){}return a}return!0}},{setConfig:function(e){t=$.extend(t,e)},$get:function(){return function(t){return new n(t)}}}}),angular.module("admin.component").directive("uiTreeRegion",function(t,e){return{restrict:"E",replace:!0,link:function(n,i,a){a.region=a.mode||"s";var r=t(n,i,a);e.tiggerComplete(n,a.ref||"$treeRegion",r)},template:function(t,e){return e.treeId=(new Date).getTime(),'<ul id="tree'+e.treeId+'" class="ztree" style="width:100%; overflow:auto;"></ul>'}}}),function(t){angular.module("admin.template",[])}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.button.state",'<button type="button" class="btn" ng-transclude></button>');

})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.chart.line",['<div class="" type="line">',"<div></div>","</div>"].join("")),t.setTemplate("tpl.chart.column",['<div class="" type="column">',"<div></div>","</div>"].join("")),t.setTemplate("tpl.chart.pie",['<div class="" type="pie">',"<div></div>","</div>"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.form",['<form action="#" class="form-horizontal">','<div class="form-body">',"</div>","</form>"].join("")),t.setTemplate("tpl.form.input",['<div class="form-group">','<label class="col-md-{{{leftCol}}} control-label">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<input {{#if type}}type="{{type}}"{{else}}type="text"{{/if}} class="form-control" name="{{name}}" placeholder="{{placeholder}}"  {{#if value}}value="{{value}}"{{/if}} {{#if readonly}}readonly="{{readonly}}"{{/if}} {{#if model}}ng-model="{{model}}"{{/if}} {{#each other}}{{key}}="{{val}}"{{/each}}/>','{{#if help}}<span class="help-block">{{help}}</span>{{/if}}',"</div>","</div>"].join("")),t.setTemplate("tpl.form.input.daterange",['<div class="form-group">','<label class="col-md-{{leftCol}} control-label">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<div class="input-date-range input-inline">','<div class="input-group">','<input type="text" class="form-control" name="{{fromName}}" {{#if fromModel}}ng-model="{{fromModel}}"{{/if}} {{#if fromValue}}value="{{fromValue}}"{{/if}} readonly>','<span class="input-group-addon">至</span>','<input type="text" class="form-control" name="{{toName}}" {{#if toModel}}ng-model="{{toModel}}"{{/if}} {{#if toValue}}value="{{toValue}}"{{/if}} readonly>',"</div>","</div>",'{{#if help}}<span class="help-block">{{{help}}}</span>{{/if}}',"</div>","</div>"].join("")),t.setTemplate("tpl.form.select",['<div class="form-group" {{#if isMulti}}is-multi="true"{{/if}}>','<label class="col-md-{{leftCol}} control-label">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<select class="form-control" {{#if buttonClass}}data-style="{{buttonClass}}"{{/if}} name="{{name}}" placeholder="{{placeholder}}" {{#if disabled}}disabled="disabled"{{/if}} {{#if model}}ng-model="{{model}}"{{/if}} {{#each other}}{{key}}="{{val}}"{{/each}} ng-transclude></select>','{{#if help}}<span class="help-block">{{help}}</span>{{/if}}',"</div>","</div>"].join("")),t.setTemplate("tpl.form.item",['<div class="form-group">','<label class="col-md-{{leftCol}} control-label">{{{label}}}</label>','<div class="col-md-{{rightCol}}">',"</div>","</div>"].join("")),t.setTemplate("tpl.form.region",['<div class="form-group">','<label class="col-md-{{leftCol}} control-label">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<input type="hidden" {{#if model}}ng-value="{{model}}"{{/if}} {{#if sName}}name="{{sName}}"{{/if}}  {{#if value}}value="{{value}}"{{/if}}/>','<input type="text" class="input-small form-control input-inline" name="province"/>','<input type="text" class="input-small form-control input-inline" name="city"/>','<input type="text" class="input-small form-control input-inline" name="area"/>','<input type="text" class="input-xsmall form-control input-inline" {{#if aName}}name="{{aName}}"{{/if}}/>','{{#if help}}<span class="help-block">{{help}}</span>{{/if}}',"</div>","</div>"].join("")),t.setTemplate("tpl.form.textarea",['<div class="form-group">','<label class="control-label col-md-{{leftCol}}">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<textarea {{#if rows}}rows="{{rows}}"{{/if}} {{#if style}}style="{{style}}"{{/if}} {{#if cols}}cols="{{cols}}"{{/if}} {{#if model}}ng-model="{{model}}"{{/if}} {{#if name}}name="{{name}}"{{/if}} class="form-control"></textarea>','{{#if help}}<span class="help-block">{{help}}</span>{{/if}}',"</div>","</div>"].join("")),t.setTemplate("tpl.form.switch",['<div class="form-group">','<label class="control-label col-md-{{leftCol}}">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<input type="checkbox"  {{#if disabled}}disabled="{{disabled}}"{{/if}} {{#if value}}value="{{value}}"{{/if}} {{#if name}}name="{{name}}"{{/if}} {{#if onText}}data-on-text="{{onText}}"{{/if}}  {{#if offText}}data-off-text="{{offText}}"{{/if}}/>','{{#if help}}<span class="help-block">{{help}}</span>{{/if}}',"</div>","</div>"].join("")),t.setTemplate("tpl.form.spinner",['<div class="form-group">','<label class="control-label col-md-{{leftCol}}">{{{label}}}</label>','<div class="col-md-{{rightCol}}">','<div class="input-group" style="width:150px;">','<div class="spinner-buttons input-group-btn">','<button type="button" class="btn spinner-up blue"><i class="fa fa-plus"></i></button>',"</div>",'<input type="text" class="spinner-input form-control" {{#if name}}name="{{name}}"{{/if}} {{#if value}}value="{{value}}"{{/if}} readonly>','<div class="spinner-buttons input-group-btn">','<button type="button" class="btn spinner-down red"><i class="fa fa-minus"></i></button>',"</div>","</div>",'{{#if help}}<span class="help-block">{{help}}</span>{{/if}}',"</div>","</div>"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.menu",['<div class="page-sidebar-wrapper">','<div class="page-sidebar navbar-collapse collapse">','<ul class="page-sidebar-menu" ng-transclude></ul>',"</div>","</div>"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.portal",['<div class="row ui-sortable">','<div class="column sortable col-md-{{eachColumn}}" ng-repeat="column in columns">','<ui-portlet-container ng-repeat="portlet in column"></ui-portlet-container>','<div class="portlet-container portlet-sortable-empty"></div>',"</div>","</div>"].join("")),t.setTemplate("tpl.portal.portlet.container",['<div class="portlet-container">',"</div>"].join("")),t.setTemplate("tpl.portal.portlet",['<div class="portlet">','<div class="portlet-title tabbable-line">','<div class="caption"><span class="caption-subject {{captionClass}}">{{title}}</span></div>',"</div>",'<div class="portlet-body">',"</div>","</div>"].join("")),t.setTemplate("tpl.portal.portlet.action",['<div class="actions portlet-tool-bar" ng-transclude>',"</div>"].join("")),t.setTemplate("tpl.portal.portlet.action.pagination",['<ul class="pagination pagination-circle portlet-tool-bar">','<li ng-class="{\'disabled\': isFirst}" ><a href="javascript:;" ng-click="loadFirst()"><i class="fa fa-angle-left"></i></a></li>','<li ng-repeat="page in pageList" ng-class="{\'active\': page.current}" ng-click="load(page.index)"><a href="javascript:;" ng-bind="page.index"></a></li>','<li ng-class="{\'disabled\': isLast}" ><a href="javascript:;" ng-click="loadLast()"><i class="fa fa-angle-right"></i></a></li>',"</ul>"].join("")),t.setTemplate("tpl.portal.portlet.action.search",['<div class="inputs portlet-tool-bar">','<div class="portlet-input input-inline input-small">','<div class="input-icon right">','<i class="icon-magnifier"></i>','<input type="text" {{#if model}}ng-model="{{model}}"{{/if}} class="form-control input-circle" placeholder="查询"/>',"</div>","</div>","</div>"].join("")),t.setTemplate("tpl.portal.portlet.action.tab",['<ul class="nav nav-tabs portlet-tool-bar" ng-transclude>',"</ul>"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.searchform",['<form novalidate action="" class="ui-search-form form-inline">','<div class="row">','<div class="col-md-{{leftCol}}" ng-transclude></div>','<div class="text-right col-md-{{rightCol}}">','<a title="回车键也可触发搜索" class="btn blue-chambray btn-sm" ng-click="{{ref}}.search()" style="width: 30px"><i class="fa fa-search"></i></button>','<a title="重置搜索选项" class="btn default btn-sm" ng-click="{{ref}}.reset()" style="width: 30px"><i class="fa fa-undo font-blue-chambray"></i></a>',"</div>","</div>","</form>"].join("")),t.setTemplate("tpl.searchform.input",['<div class="input-inline search-item">','<div class="input-group">',"{{#if label}}",'<div class="input-group-addon">{{label}}:</div>',"{{/if}}",'<input class="form-control" name="{{name}}" placeholder="{{placeholder}}" {{#if model}}ng-model="{{model}}"{{/if}} {{#each other}}{{key}}="{{val}}"{{/each}}/>',"</div>","</div>"].join("")),t.setTemplate("tpl.searchform.userselect.input",['<div class="input-inline search-item">','<div class="input-group input-small">',"{{#if label}}",'<div class="input-group-addon">{{label}}:</div>',"{{/if}}",'<input class="form-control" name="{{name}}" placeholder="{{placeholder}}" {{#if model}}ng-model="{{model}}"{{/if}} {{#each other}}{{key}}="{{val}}"{{/each}}/>',"</div>","</div>"].join("")),t.setTemplate("tpl.searchform.daterange",['<div class="input-inline search-item input-mlarge">','<div class="input-group">','<input type="text" readonly class="form-control" name="{{fromName}}" {{#if fromModel}}ng-model="{{fromModel}}"{{/if}}/>','<span class="input-group-addon">{{label}}</span>','<input type="text" readonly class="form-control" name="{{toName}}" {{#if toModel}}ng-model="{{toModel}}"{{/if}}/>',"</div>","</div>"].join("")),t.setTemplate("tpl.searchform.input.select",['<div class="input-inline search-item">','<div class="input-group">','<select class="input-xsmall form-control " {{#if buttonClass}}data-style="{{buttonClass}}"{{/if}} {{#if model}}ng-model="{{model}}"{{/if}} {{#if selectName}}name="{{selectName}}"{{/if}} ng-transclude></select>','<input style="left:-1px;" class="form-control input-small pull-right" {{#if inputName}}name="{{inputName}}"{{/if}} placeholder="{{placeholder}}" ng-keydown="onChangeHandler($event)"/>',"</div>","</div>"].join("")),t.setTemplate("tpl.searchform.region",['<div class="input-inline search-item">','<div class="input-group">','{{#if label}}<div class="input-group-addon">{{{label}}}:</div>{{/if}}','<input type="hidden" {{#if model}}ng-value="{{model}}"{{/if}} {{#if name}}name="{{name}}"{{/if}}  value="{{value}}"/>','<input type="text" class="input-small form-control" name="province" />','<input type="text" class="input-small form-control" name="city" />','<input type="text" class="input-small form-control" name="area" />',"</div>","</div>"].join("")),t.setTemplate("tpl.searchform.select",["{{#if label}}",'<div class="input-inline input-medium search-item" {{#if isMulti}}is-multi="true"{{/if}}>','<div class="input-group">','<div class="input-group-addon">{{label}}:</div>','<select class="form-control" {{#if buttonClass}}data-style="{{buttonClass}}"{{/if}} name="{{name}}" {{#if model}}ng-model="{{model}}"{{/if}} ng-transclude {{#each other}}{{key}}="{{val}}"{{/each}}></select>',"</div>","</div>","{{else}}",'<div class="input-small search-item input-inline" {{#if isMulti}}is-multi="true"{{/if}}>','<select name="{{name}}" {{#if buttonClass}}data-style="{{buttonClass}}"{{/if}} class="form-control" {{#if model}}ng-model="{{model}}"{{/if}} ng-transclude {{#each other}}{{key}}="{{val}}"{{/each}}></select>',"</div>","{{/if}}"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.tab",['<div class="tabbable-custom{{#if close}} tabbable-close{{/if}}">','<ul class="nav nav-tabs" ng-transclude>',"</ul>",'<div class="tab-content" style="min-height: 100px;">',"</div>","</div>"].join("")),t.setTemplate("tpl.tab.item",["<li>",'<a href="javascript:;" ng-click="$tabItem.onClickHandler()" ><span>{{{head}}}</span><i class="fa fa-times" ng-click="$tabItem.onRemoveHandler($event)"></i></a>',"</li>"].join("")),t.setTemplate("tpl.tab.list.item",['<li class="dropdown">','<a href="#" class="dropdown-toggle" data-toggle="dropdown">{{head}} <i class="fa fa-angle-down"></i></a>','<ul class="dropdown-menu" role="menu" ng-transclude>',"</ul>","</li>"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.table",['<div class="ui-table">','<table class="table table-striped table-bordered table-hover">',"<thead>",'<tr role="row" class="heading" ng-transclude>',"</tr>","</thead>","<tbody></tbody>","</table>","</div>"].join("")),t.setTemplate("tpl.table.column",["<th>","{{head}}","</th>"].join("")),t.setTemplate("tpl.table.column.checked",["<th>",'<input type="checkbox" ng-click="onSelectAllHandler($event)"/>',"</th>"].join(""))})}(jQuery),function(t){angular.module("admin.template").run(function(t){t.setTemplate("tpl.toolbar.table",['<div class="ui-toolbar table-toolbar">','<div class="btn-group pull-left">',"{{#if editable}}",'<button type="button" class="btn btn-sm btn-info" ng-click="{{ref}}.toggleEdit()"><i class="fa fa-edit"></i> <span ng-bind="{{ref}}.editText"></span>快速编辑</button>&nbsp;&nbsp;',"{{/if}}","{{#if add}}",'<button type="button" class="btn btn-sm btn-primary" ng-click="{{ref}}.doAddItem()"><i class="fa fa-plus-circle"></i> 新增{{tip}}</button>&nbsp;&nbsp;',"{{/if}}","{{#if del}}",'<button type="button" ng-class="{\'btn-danger\': {{table}}.selectValues.length > 0}" class="btn btn-sm" ng-disabled="{{table}}.selectValues.length==0" ng-click="{{ref}}.doDelItem({{table}}.selectValues)"><i class="fa fa-times-circle"></i> {{deltip}}{{tip}}</button>&nbsp;&nbsp;',"{{/if}}","</div>",'<div class="btn-group pull-left" ng-transclude></div>','<span ng-show="{{table}}.selectValues.length != 0" class="table-toolbar-tip fadeInRight">您已选择 <strong ng-bind="{{table}}.selectValues.length"></strong> 个{{tip}}，支持翻页选择多个{{tip}}。</span>','<div class="btn-group pull-right">','<a class="btn default btn-sm" href="#" data-hover="dropdown"><i class="fa fa-table"></i></a>','<div class="dropdown-menu dropdown-checkboxes pull-right">','<label ng-repeat="column in {{table}}.columns" ng-if="{{ref}}.isShow($index, column)" style="cursor:pointer" >','<div class="checker">','<span ng-class="{checked: column.bVisible}">','<input type="checkbox" ng-click="{{ref}}.toggleColumn($event, column)">',"</span>","</div>",'<span ng-bind="column.mTitle"/>',"</label>",'<label class="divider"></label>','<label style="text-align: center;"><a href="javascript:;" ng-click="{{table}}.cleanState()" class="btn btn-sm green easy-pie-chart-reload"><i class="fa fa-repeat"></i> 恢复默认</a></label>'," </div>","</div>",'<div style="clear:both"></div>',"</div>"].join(""))})}(jQuery),function(){angular.module("admin",["admin.service","admin.filter","admin.component","admin.template"]).config(function(t,e){t.setSuccessHandler(function(t){return 1==t.type?t.data:null}),t.setFailHandler(function(t){return 1!=t.type?t.data:null}),e.setPostion("bottom","right")})}(),$.fn.modal&&($.fn.modal.Constructor.prototype.enforceFocus=function(){});