var Event=function(){"use strict";function t(){this.listenerMap={}}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,r=function(t,r){for(var o in r)r.hasOwnProperty(o)&&e(t,o,n(r,o));return t},o={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),o.$on=function(t,e){var n=this.listenerMap[t]||[];n.push(e),this.listenerMap[t]=n},o.$emit=function(t){var e=this.listenerMap[t]||[],n=Array.prototype.slice.call(arguments,1);$.each(e,function(t,e){e.apply(this,n)}.bind(this))},r(t.prototype,o),o=void 0,t}(),ComponentEvent=function(t){"use strict";function e(){null!==t&&t.apply(this,arguments)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t),null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1});var s={};return s.triggerComplete=function(t,e,n){t[e]=n,t.$emit("componentComplete",{ref:e,component:n})},s.getComponent=function(t,e,n){var r=e.attr("ref")||n;return t[r]},i(e.prototype,s),s=void 0,e}(Event);angular.module("admin.filter",[]),angular.module("admin.service",[]),angular.module("admin.service").provider("Ajax",function(){var t,e,n={setSuccessHandler:function(e){t=e},setFailHandler:function(t){e=t},$get:function(n,r,o){var i=new o("Ajax"),a=function(r,o,a){var l=n.defer();return $.ajax({url:o,cache:!1,data:a,type:r,dataType:"json",success:function(n){var r=t(n),o=e(n);r?l.resolve(r):l.reject(o)},error:function(t,e){var n={403:"没有权限",404:"请求的地址不存在",500:"服务器出现了问题,请稍后重试"}[e];i.error(n||"服务器出现了问题,请稍后重试")}}),l.promise};return{get:function(t,e){return a("GET",t,e)},post:function(t,e){return a("POST",t,e)},message:function(t,e,n,r){return this.post(t,e).then(function(){return i.success(n)})["catch"](function(){return i.error(r)})},add:function(t,e){return this.message(t,e,"添加数据成功","添加数据失败")},update:function(t,e){return this.message(t,e,"更新数据成功","更新数据失败")},remove:function(t,e,n){var r=this;return util.confirm("您确认删除该"+(n.label||"数据")+"吗?").then(function(){return r.message(t,e,"删除数据成功","删除数据失败")})}}}};return n});var PRS$0=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,e){for(var n in e)e.hasOwnProperty(n)&&DP$0(t,n,GOPD$0(e,n));return t};window.toastr?toastr.options={closeButton:!0,debug:!1,positionClass:"toast-top-center",showDuration:"1000",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}:console.error("需要 toastr库 支持, 请导入...");var Message=function(){"use strict";function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}(),MessageProvider=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.setPostion=function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},e.$get=function(){return Message},MIXIN$0(t.prototype,e),e=void 0,t}();angular.module("admin.service").provider("msg",MessageProvider).provider("Message",function(){var t={setPosition:function(t,e){toastr.options.positionClass="toast-"+t+"-"+e},$get:function(){var t=function(){function t(t){this.className=t?t+": ":""}var e={},n={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.success=function(e,n){t.success(this.className+e,n)},e.success=function(t,e){e=e||"成功",toastr.success((this.className||"")+t,e)},n.info=function(e,n){t.info(this.className+e,n)},e.info=function(t,e){e=e||"消息",toastr.info((this.className||"")+t,e)},n.warning=function(e,n){t.warning(this.className+e,n)},e.warning=function(t,e){e=e||"警告",toastr.warning(t,e)},n.error=function(e,n){t.error(this.className+e,n)},e.error=function(t,e){e=e||"错误",toastr.error(t,e)},MIXIN$0(t,e),MIXIN$0(t.prototype,n),e=n=void 0,t}();return t}};return t}),function(){var t={type:"keydown",propagate:!1,inputDisabled:!1,keyCode:!1},n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},r={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},o=function(){"use strict";function o(t,e){this.window=t,this.timeout=e,this.keyboardEvent={}}var i=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s={};return i(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.bind=function(e,n,r){r=$.extend({},t,r),e=e.toLowerCase();var o=r&&r.target?r.target:this.window.document;this.keyboardEvent[e]={callback:this.handler,target:o,event:r.type,opt:r},$(o).bind(r.type,this.handler.bind(this,n,e))},s.unbind=function(t){t=t.toLowerCase();var e=this.keyboardEvent[t];if(delete this.keyboardEvent[t],e){var n=e.event,r=e.target,o=e.callback;$(r).unbind(n,o)}},s.handler=function(t,o,i){var a=this.keyboardEvent[o];if(a.inputDisabled){var l=i.target;if("INPUT"==l.tagName||"TEXTAREA"==l.tagName)return}var s=String.fromCharCode(i.keyCode).toLowerCase();188==code&&(s=","),190==code&&(s=".");for(var c,u=o.split("+"),p=0,m={shift:{wanted:!1,pressed:i.shiftKey?!0:!1},ctrl:{wanted:!1,pressed:i.ctrlKey?!0:!1},alt:{wanted:!1,pressed:i.altKey?!0:!1}},f=0,d=u.length;c=u[f],d>f;f++){switch(c){case"ctrl":case"control":p++,m.ctrl.wanted=!0;break;case"shift":case"alt":case"meta":p++,m[c].wanted=!0}c.length>1?r[c]==code&&p++:a.keyCode?a.keyCode==code&&p++:s==c?p++:n[s]&&e.shiftKey&&(s=n[s],s==c&&p++)}p==u.length&&m.ctrl.pressed==m.ctrl.wanted&&m.shift.pressed==m.shift.wanted&&m.alt.pressed==m.alt.wanted&&m.meta.pressed==m.meta.wanted&&(this.timeout(function(){t(e)},1),a.propagation&&i.stopPropagation())},l(o.prototype,s),s=void 0,o}();angular.module("admin.service").factory("Shortcut",o)}(),angular.module("admin.service").factory("Util",function($rootScope,$compile,$filter,$parse,$q){return{dateFormatStr:function(t,e){return $filter("date")(t||new Date,e)},dateTimeStr:function(t){return this.dateFormatStr(t,"yyyy-MM-dd HH:mm:ss")},dateStr:function(t,e){return this.dateFormatStr(t,"yyyy-MM-dd")},timeStr:function(t,e){return this.dateFormatStr(t,"HH:mm:ss")},animate:function(t,e,n){n=void 0!==n?n:!0,t.addClass(e+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n&&$(this).removeClass(e+" animated")})},setTag:function(t,e,n){n.$emit("ui.completeInit",t,e)},setValue:function(t,e,n){var r=e.split(".");if(r.length>1){var o=r.splice(r.length-1,r.length).join(""),i=r.join("."),a=$parse(i)(t);a[o]=n}else t[e]=n},getValue:function(t,e){return $parse(e)(t)},toJSON:function(str){return eval("("+str+")")},toScope:function(t,e){return e=e||$rootScope,$.extend(e.$new(),t||{})},format:function(t,e){var n=$compile(t)(e);return n},confirm:function(t){if(bootbox){var e=$q.defer();return bootbox.confirm(t,function(t){t?e.resolve():e.reject()}),e.promise}throw new Error("需要 bootbox库 支持, 请导入....")},checkValuesUseRules:function(t,e){var n=$("<form></form>"),r=[];$.each(t,function(t,e){var o=$("<input>").attr("name",t).val(e);r.push(o),n.append(o)});var o=n.validate({rules:e,debug:!0,submitHandler:function(){return!1}}),i=null;return $.each(r,function(t,e){return o.check(e)?void 0:(i=e.attr("name"),!1)}),i?o.errorMap[i]:null},checkValueUseRules:function(t,e,n){var r={},o={};return r[t]=e,o[t]=n,this.checkValuesUseRules(r,o)}}}),function(){var t=function(){"use strict";function t(t){this.$parse=t}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,r=function(t,r){for(var o in r)r.hasOwnProperty(o)&&e(t,o,n(r,o));return t},o={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),o.set=function(t,e,n){var r=this.$parse(e);r.assign(t,n),t.$$phase||t.$apply()},o.get=function(t,e){var n=this.$parse(e);return n(t)},r(t.prototype,o),o=void 0,t}();angular.module("admin.service").service("ValueService",t)}(),angular.module("admin.component",[]),angular.module("admin.component").directive("uiFormItem",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,r,o){e.find(">div").append(o(t)),e.removeAttr("name").removeAttr("model")},template:function(n,r){var o=(r.col||e).split(":");return t.getTemplate("tpl.form.item",$.extend({leftCol:o[0],rightCol:o[1]},r))}}}),angular.module("admin.component").constant("defaultCol","2:10").directive("uiForm",function(t){return{restrict:"E",replace:!0,scope:!1,transclude:!0,compile:function(){var e=null;return{pre:function(n,r,o,i,a){e=new t(n,r,o,a(n))},post:function(){e.layout(),setTimeout(function(){e.initValidation()},300)}}},templateUrl:"tpl.form"}}),function(){jQuery.validator&&(jQuery.validator.addMethod("url",function(t,e){var n=/^(http|https):\/\//;return this.optional(e)||n.test(t)},"链接地址必须以http://或者https://开头！"),jQuery.validator.addMethod("dateRange",function(t,e,n){var r=moment(t),o=moment($(this.currentForm).find('[name="terminatetime"]').val());return r.isBefore(o)},"时间范围不正确"),jQuery.validator.addMethod("maxlength",function(t,e,n){var r=0;return n&&n>0&&(r=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length<=r},"请输入一个长度最多是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("minlength",function(t,e,n){var r=0;return n&&n>0&&(r=n),this.optional(e)||t.replace(/[^\x00-\xff]/gi,"--").length>=r},"请输入一个长度最少是 {0} 的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("rangelength",function(t,e,n){var r=0,o=0;n&&n[0]>0&&(r=n[0]),n&&n[1]>0&&(o=n[1]);var i=t.replace(/[^\x00-\xff]/gi,"--").length;return o>=i&&i>=r},"请输入一个长度介于 {0} 和 {1} 之间的字符串（中文文字按照2个字符计算）"),jQuery.validator.addMethod("mobile",function(t,e){var n=t.length,r=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(e)||11==n&&r.test(t)},"手机号码不正确"),jQuery.validator.addMethod("pwdRule",function(t,e){var n=/^(?![0-9]+$)(?![a-z]+$)(?![0-9a-z]+$)(?![\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]+$)[0-9A-Za-z\~\)\!@#\$%^&\*\(\)_\+\-=\{\}\[\]|:;<>\?,\.\/]{8,16}$/;return this.optional(e)||n.test(t)},"密码由8-16位字母、数字和特殊字符组成，且至少有一个大写字母或者特殊字符！"))}(jQuery),angular.module("admin.component").directive("uiSearchForm",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(n,r,o){var i=e.getComponentRef(r.parent().find(".ui-table"),"$table"),a=new t(n,r,o,i),l=o.ref||"$searchForm";n[l]=a,e.tiggerComplete(n,l,a)},template:function(t,n){var r=n.column||"11:1",o=n.ref||"$searchForm",i=r.split(":");return e.getTemplate("tpl.searchform",{leftCol:i[0],rightCol:i[1],ref:o})}}});var UIFormControl=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.isSearchControl=e.parents(".ui-search-form").length>0,this.formPrefix=this.isSearchControl?"$search":"$form",this.formResetEventName=this.isSearchControl?"uisearchform.reset":"uiform.reset",this.init(),this.initEvents(),this.cleanElement(),this.render()}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){this.message=new Message("UI"+(this.formPrefix+this.className)),this.scope.lcol=void 0!==this.scope.lcol?this.scope.lcol:2,this.scope.rcol=void 0!==this.scope.rcol?this.scope.rcol:10,this.triggerComplete(this.scope,this.attrs.ref||this.formPrefix+this.className,this)},s.initEvents=function(){var t=this;this.scope.$on(this.formResetEventName,function(){return t.reset()})},s.cleanElement=function(){this.element.removeAttr("name").removeAttr("model").removeAttr("readonly").removeAttr("disabled")},s.attr=function(t,e){return this.formEl?t&&e?(this.formEl.prop(t,e),this):this.formEl.prop(t):void 0},s.val=function(t){return this.formEl?void 0!==t?(this.formEl.val(t),this):this.formEl.val():void 0},s.destroy=function(){delete this.listenerMap,this.reset()},s.change=function(t){this.$on("change",t)},s.render=function(){},s.reset=function(){this.formEl&&this.formEl.val("")},i(e.prototype,s),s=void 0,e}(ComponentEvent);angular.module("admin.component").factory("uiFormControl",function(){return UIFormControl}),function(){angular.module("admin.component").factory("UIDateControl",function(){var t=function(t){"use strict";function e(e,n,r){this.className="Date",this.formEl=n.find("input"),this.dateMode=r.mode?-1!=r.mode.indexOf("date"):!0,this.timeMode=r.mode?-1!=r.mode.indexOf("time"):!0,t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this);var e=[];this.dateMode&&e.push("yyyy-MM-dd"),this.timeMode&&e.push("HH:mm:ss"),this.format=e.join(" ")},s.initEvents=function(){t.prototype.initEvents.call(this)},s.render=function(){this.formEl.datetimepicker({language:"zh-CN",pickDate:this.dateMode,useCurrent:!1,pickTime:this.timeMode,useSeconds:this.timeMode})},i(e.prototype,s),s=void 0,e}(UIFormControl);return t})}(),function(){var t={"今天":[moment().startOf("day"),moment().endOf("day")],"昨天":[moment().subtract("days",1).startOf("day"),moment().subtract("days",1).endOf("day")],"最近7天":[moment().subtract("days",6).startOf("day"),moment().endOf("day")],"最近30天":[moment().subtract("days",29).startOf("day"),moment().endOf("day")],"当前月":[moment().startOf("month"),moment().endOf("month")],"上个月":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"最近六个月":[moment().subtract("days",182).startOf("day"),moment().endOf("day")]},e={opens:"right",minDate:moment().subtract("year",40).startOf("year"),maxDate:moment().add("year",10).endOf("year"),showDropdowns:!0,showWeekNumbers:!1,timePickerIncrement:1,timePicker12Hour:!1,buttonClasses:["btn","btn-sm"],applyClass:"green",cancelClass:"default",separator:" - ",locale:{applyLabel:"确定",cancelLabel:"取消",resetLabel:"重置",fromLabel:"从",toLabel:"至",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}};angular.module("admin.component").factory("UIDateRangeControl",function(){var n=function(n){"use strict";function r(t,e,r){this.className="DateRange",this.startDateElement=e.find(".input-group").find("input:first"),this.endDateElement=e.find(".input-group").find("input:last"),this.hasDefaultDateRange=!!r.range,this.isDateTimeMode="date"!==r.mode||void 0!==r.time,this.format=r.format||(this.isDateTimeMode?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"),this.limit=r.limit,n.call(this,t,e,r)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;o||l(r,n);var u={};return null!==n&&s(r,n),r.prototype=c(null!==n?n.prototype:null,{constructor:{value:r,configurable:!0,writable:!0}}),i(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){n.prototype.init.call(this);var r=t[this.attrs.range]||[];this.defaultStartDate=this.attrs.fromValue||r[0],this.defaultEndDate=this.attrs.toValue||r[1],this.config=$.extend({},e,{ranges:t,timePicker:this.isDateTimeMode,format:this.format}),this.limit&&(this.config.dateLimit={days:this.limit}),this.hasDefaultDateRange&&(this.config.startDate=this.defaultStartDate,this.config.endDate=this.defaultEndDate)},u.render=function(){var t=this;this.element.find("div").daterangepicker(this.config,function(e,n){e=e?e.format(t.format):"",n=n?n.format(t.format):"",t.val(e,n),t.scope.change({startVal:e,endVal:n})})},u.reset=function(){this.startDateElement.val(""),this.endDateElement.val("")},u.val=function(t,e){return t&&this.startDateElement.val(t),e&&this.endDateElement.val(e),t||e?this:[this.startDateElement.val(),this.endDateElement.val()]},l(r.prototype,u),u=void 0,r}(UIFormControl);return n})}(),function(){angular.module("admin.component").provider("UIEditorControl",function(){var t,e,n={setUrl:function(n,r){t=n,e=r},$get:function(){var n=function(n){function r(t,e,r){this.className="Editor",this.$scriptElement=e.find("script"),n.call(this,t,e,r)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;o||l(r,n);var u={};return null!==n&&s(r,n),r.prototype=c(null!==n?n.prototype:null,{constructor:{value:r,configurable:!0,writable:!0}}),i(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){n.prototype.init.call(this),this.editorId="uiFromEditor"+(new Date).getTime(),this.$scriptElement.attr("id",this.editorId)},u.render=function(){var r=this;n.prototype.render.call(this),window.UE?this._initEditor():$.getScript(t,function(){$.getScript(e,function(){r._initEditor()})})},u.reset=function(){this.editor.setContent("")},u.val=function(t){return void 0!==t?(this.editor.setContent(t),this):this.editor.getContent()},u.getEditor=function(){return this.editor},u._initEditor=function(){var t=this;this.editor=UE.getEditor(this.editorId,{autoHeightEnabled:!0}),this.editor.addListener("contentChange",function(){t._change()})},u._change=function(){var t=this.val();this.scope.model=t,this.scope.change({val:t})},l(r.prototype,u),u=void 0,r}(UIFormControl);return n}};return n})}(),function(){angular.module("admin.component").factory("UIFormControl",function(){var t=function(t){"use strict";function e(e,n,r,o){this.className="form",this.action=this.attrs.action.replace(/#/g,""),this.formItems=o,this.formControlMap={},t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){var e=this;t.prototype.init.call(this),this.scope.$on("componentComplete",function(t,n){e.formControlMap[n.name]=n.component})},s.initEvents=function(){t.prototype.initEvents.call(this)},s.changeValidateRule=function(t,e){var n=this.element.data().validator;if(n){var r=n.settings.rules[t];n.settings.rules[t]=$.extend(r,e)}},s.startValidate=function(){this.element.valid()},i(e.prototype,s),s=void 0,e}(t);return t}).constant("uiFormValidateConfig",{errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{},highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},success:function(t,e){t.closest(".form-group").removeClass("has-error")},errorPlacement:function(t,e,n){$(t).appendTo($(e).parent())}}).factory("uiFormFactory",function(t,e,n,r){var o=(new t("Form"),function(t,e,n,o){this.column=n.column,this.formItems=o,this.formControlMap={},this.action=n.action.replace(/#/g,""),this.formName=n.formName,r.apply(this,arguments)});return o.prototype=$.extend(new r,{_init:function(){this.scope.$on("componentComplete",function(t,e){e&&e.name&&(this.formControlMap[e.name]=e)}.bind(this))},changeValidateRule:function(t,e){var n=this.element.data().validator;if(n){var r=n.settings.rules[t];n.settings.rules[t]=$.extend(r,e)}},startValidate:function(){this.element.valid()},addFormItem:function(t){this.formItems.push(t),this.layout()},formItemVal:function(t,e){var n=this.element.find('[name="'+t+'"]');return e?void n.val(e):n.val()},layout:function(t){if(t=parseInt(void 0!==t?t:this.column),t>1){var e=12/t,n=this.element.find(" > div"),r=[];n.html();var o,i;for(o=0;o<this.formItems.length;o++)i=this.formItems[o],void 0!==i.innerHTML&&("hidden"==i.type?n.append(i):r.push(i));var a=function(t,e){n.append(e)};for(o=0;o<r.length;o+=t){for(var l=$("<div/>").addClass("row"),s=o,c=o,u=[];s+t>c&&r[c];){if(i=r[c],-1!=i.className.indexOf("row"))u.push(i),o++,s++;else{var p=$("<div/>").addClass("col-md-"+e);p.append(r[c]),l.append(p)}c++}n.append(l),$.each(u,a)}}else this.element.find(" > div").append(this.formItems)},initValidation:function(){this.action?$.getJSON("/validator?action="+this.action,function(t){this.setRules(t)}.bind(this)):this.formName?$.getJSON("/validator?cm="+this.formName,function(t){this.setRules(t)}.bind(this)):this.attrs.validateUrl?$.getJSON(this.attrs.validateUrl,function(t){this.setRules(t)}.bind(this)):this.element.submit(this._submit.bind(this))},setRules:function(t){var e={};this.$emit("uiform.rules",t,e),this.element.validate($.extend({},n,{rules:t,messages:e,submitHandler:this._submit.bind(this)}))},formData:function(t){var e=this.element.serializeArray();if(t===!0){var n={};$.each(e,function(t,e){var r=e.name,o=e.value;n[r]?$.isArray(n[r])?n[r].push(o):n[r]=[n[r],o]:n[r]=o}),e=n}return e},loadData:function(t){var n=this;return e.post(t).then(function(t){n.setData(t)})},setData:function(t){for(var e in t){var n=this.formControlMap[e];n&&n.val(t[e])}},submit:function(t){this.$on("uiForm.doSubmit",t)},_submit:function(t){return this.action?e.post(this.action,this.formData(t)).then(function(){this.$emit("uiForm.completeSubmit",this)}.bind(this)):this.$emit("uiForm.doSubmit",this.formData({})),!1},reset:function(){this.scope.$broadcast("uiform.reset")}}),o})}(jQuery),function(){angular.module("admin.component").factory("UIInputControl",function(){var t=function(t){"use strict";function e(e,n,r){this.className="Input",this.formEl=n.find("input"),t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;return n||i(e,t),null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e}(UIFormControl);return t})}(),angular.module("admin.component").factory("uiRegionHelper",function(t,e){var n,r,o,i=new e("UiRegionHelper"),a=[],l=!1,s=!1,c="http://localhost:63342/AngularAdmin/output/assets/js/China_Region_Last.js",u=!1,p=!1,m="086",f=function(e,n,r,i){if(!i||void 0!==e){var a=this,l=t.defer();return this.getTreeData().then(function(){var t=o[e].child;l.resolve(t),r&&a.setHtml(r,t)},function(){l.reject([])}),l.promise}};return{getDataMap:function(){var e=t.defer();return s?e.resolve(n):l?a.push(e):(l=!0,$.getScript(c,function(){e.resolve(n=window.CHINA_REGION),$.each(a,function(t,e){e.resolve(n)}),a=[],s=!0},function(){l=!1,e.reject({})})),e.promise},getDataList:function(e){e=e||"s";var r=t.defer();return this.getTreeData().then(function(){var t=[];$.each(n,function(n,r){var i=!1;switch(e){case"p":i=r[1]==m;break;case"c":var a=o[r[1]];if(a&&a.id==m)i=!0;else if(n==m)i=!0;else{var l=o[a.pid];i=l?l.id==m:!1}break;case"s":i=!0}i&&t.push({id:n,name:r[0],pid:r[1]})}),r.resolve(t),u=!0},function(){r.reject({})}),r.promise},getDatasByMode:function(e){e=e||"s";var n=t.defer();return this.getTreeData().then(function(){var t=[];$.each(o,function(n,r){r.mode==e&&t.push(r)}),n.resolve(t)},function(){n.reject({})}),n.promise},getTreeData:function(){var e=t.defer();return p?e.resolve(r):this.getDataMap().then(function(t){r={"086":{id:m,text:"全国",child:[]}},o={"086":{id:m,text:"全国",child:[]}},$.each(t,function(t,e){var n={id:t,text:e[0],child:[],pid:e[1],mode:null};t!=m&&(o[t]=n),o[e[1]]&&(o[e[1]].child.push(n),e[1]==m?(n.mode="p",r[m].child.push(n)):n.mode=o[e[1]].pid==m?"c":"s")}),e.resolve(r),p=!0},function(){e.reject({})}),e.promise},getHtml:function(t){var e=[];return $.each(t,function(t,n){var r=n.id;e.push('<option value="'+r+'">'+n.text+"</option>")}),e.join("")},setHtml:function(t,e){t.html(this.getHtml(e)).change()},getProvince:function(t){return f.call(this,m,"请选择省",t,!1)},getCity:function(t,e){return f.call(this,t,"请选择市",e,!0)},getStreet:function(t,e){return f.call(this,t,"请选择区",e,!0)},getById:function(e){var n=t.defer();return this.getTreeData().then(function(){n.resolve(o[e])},function(){n.reject({})}),n.promise},htmlById:function(e,n,r,a){var l=this,s=t.defer();return this.getById(e).then(function(t){if(t){var c,u,p,m,f;switch(t.mode){case"p":c=e,l.getProvince(a),l.getCity(c,r),s.resolve([null,null,t]);break;case"c":m=o[t.pid],c=m.id,u=e,l.getProvince(a),l.getCity(m.id,r),l.getStreet(u,n),s.resolve([null,t,m]);break;case"s":f=o[t.pid],m=o[f.pid],c=m.id,u=f.id,p=e,l.getProvince(a),l.getCity(m.id,r),l.getStreet(f.id,n),s.resolve([t,f,m])}setTimeout(function(){c&&a&&a.select2("val",c),u&&r&&r.select2("val",u),p&&n&&n.select2("val",p)},500)}else i.error("当前地址数据有误, 请重新编辑保存"),logger.error("["+e+"]"),l.getProvince(a),s.reject()}),s.promise}}}),function(){angular.module("admin.component").factory("UIRegionControl",function(t){var e=function(e){"use strict";function n(t,n,r){this.className="Region",this.$inputDom=n.find("input:eq(0)"),this.$pDom=n.find('[name="province"]'),this.$cDom=n.find('[name="city"]'),this.$sDom=n.find('[name="area"]'),this.$aDom=n.find('[name="address"]'),this.valueType=r.valueType||"text",e.call(this,t,n,r)}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},l=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;r||a(n,e);var c={};return null!==e&&l(n,e),n.prototype=s(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),o(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){switch(e.prototype.init.call(this),this.attrs.mode){case"p":this.$cDom.hide(),this.$sDom.hide(),this.$aDom.hide();break;case"c":this.$sDom.hide(),this.$aDom.hide();break;case"s":this.$aDom.hide()}},c.initEvents=function(){var n=this;e.prototype.initEvents.call(this),this.$pDom.change(function(e){e.val?(t.getCity(e.val).then(function(t){n.$cDom.select2(n.toCityData(t)),n.$sDom.select2(n.toStreetData())}),n.$pDom.val(e.added[n.valueType]),n.$inputDom.val(e.val),n._change("p")):n.reset()}),this.$cDom.change(function(e){e.val?(t.getStreet(e.val).then(function(t){n.$sDom.select2(n.toStreetData(t))}),n.$cDom.val(e.added[n.valueType]),n.$inputDom.val(e.val),n._change("c")):(n.$sDom.select2(n.toStreetData()),n.$cDom.val(""),n.$inputDom.val(""))}),this.$sDom.change(function(t){t.val?(n.$sDom.val(t.added[n.valueType]),n.$inputDom.val(t.val),n._change("s")):(n.$sDom.val(""),n.$inputDom.val(""))})},c.render=function(){var n=this;e.prototype.render.call(this),/^\d+$/g.test(this.codeValue)?(t.htmlById(this.codeValue).then(function(e){return e.concat(t.getProvince())}).then(function(e,r,o,i){if(n.$pDom.select2(n.toProvinceData(i)),e)return n.$pDom.select2("val",e.id),n.$pDom.val(e[self.valueType]),[r,o,t.getCity(e.id)];throw n.$cDom.select2(n.toCityData([])),n.$sDom.select2(n.toStreetData([])),new Error}).then(function(e,r,o){if(n.$cDom.select2(self.toCityData(o)),e)return n.$cDom.select2("val",e.id),n.$cDom.val(e[self.valueType]),[r,t.getStreet(e.id)];throw n.$sDom.select2(n.toStreetData([])),new Error}).then(function(t,e){n.$sDom.select2(self.toStreetData(e)),t&&(self.$sDom.select2("val",t.id),self.$sDom.val(t[self.valueType]))}),this.$inputDom.val(this.codeValue)):t.getProvince().then(function(t){n.$pDom.select2(n.toProvinceData(t)),n.$cDom.select2(n.toCityData([])),n.$sDom.select2(n.toStreetData([]))})},c.toProvinceData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},c.toCityData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},c.toStreetData=function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},c.reset=function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())},c._change=function(t){this.scope.model=this.$inputDom.val();var e=this.scope.mode,n=this.$pDom.val(),r=this.$cDom.val(),o=this.$sDom.val();this.scope.change({mode:t,val:e,p:n,c:r,s:o})},a(n.prototype,c),c=void 0,n}(UIFormControl);return e})}(),angular.module("admin.component").factory("uiRegionService",function(t,e,n){var r=(new e("Region"),function(t,e,r){var o=e.find("input");this.$inputDom=$(o[0]),this.$pDom=$(o[1]),this.$cDom=$(o[2]),this.$sDom=$(o[3]),this.$aDom=$(o[o.length-1]),this.codeValue=r.sValue,this.autoWidth=r.autoWidth,this.mode=r.mode||"s",this.valueType=r.valueType||"text",n.apply(this,arguments)});return r.prototype=$.extend(new n,{_init:function(){var e=this;if(/^\d+$/g.test(this.codeValue)){var n,r,o;t.htmlById(this.codeValue).then(function(e){return n=e[2],r=e[1],o=e[0],t.getProvince()}).then(function(r){return e.$pDom.select2(e.toProvinceData(r)),n?(e.$pDom.select2("val",n.id),e.$pDom.val(n[e.valueType]),t.getCity(n.id)):null}).then(function(n){return n?(e.$cDom.select2(e.toCityData(n)),r?(e.$cDom.select2("val",r.id),e.$cDom.val(r[e.valueType]),t.getStreet(r.id)):null):void 0}).then(function(t){t&&(e.$sDom.select2(e.toStreetData(t)),o&&(e.$sDom.select2("val",o.id),e.$sDom.val(o[e.valueType])))}),this.$inputDom.val(this.codeValue)}else t.getProvince().then(function(t){e.$pDom.select2(e.toProvinceData(t))});this.attrs.aValue&&this.$aDom.val(this.attrs.aValue),this.initMode(),this.initEvent()},initMode:function(){var t=0;switch(this.attrs.mode){
case"p":t=120,this.$pDom.select2(this.toProvinceData()),this.$cDom.remove(),this.$sDom.remove();break;case"c":t=240,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.remove();break;default:t=360,this.$pDom.select2(this.toProvinceData()),this.$cDom.select2(this.toCityData()),this.$sDom.select2(this.toStreetData())}this.autoWidth&&this.element.width(t+60)},initEvent:function(){var e=this;this.$pDom.change(function(n){n.val?(t.getCity(n.val).then(function(t){e.$cDom.select2(e.toCityData(t)),e.$sDom.select2(e.toStreetData())}),this.$pDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):this.reset()}.bind(this)),this.$cDom.change(function(n){n.val?(t.getStreet(n.val).then(function(t){e.$sDom.select2(e.toStreetData(t))}),this.$cDom.val(n.added[this.valueType]),this.$inputDom.val(n.val)):(this.$sDom.select2(this.toStreetData()),this.$cDom.val(""),this.$inputDom.val(""))}.bind(this)),this.$sDom.change(function(t){t.val?(this.$sDom.val(t.added[this.valueType]),this.$inputDom.val(t.val)):(this.$sDom.val(""),this.$inputDom.val(""))}.bind(this))},toProvinceData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择省"}},toCityData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择市"}},toStreetData:function(t){return{data:t||[],allowClear:!0,placeholder:"请选择区"}},reset:function(){this.$inputDom.val(""),this.$pDom.val("").select2("val",""),this.$cDom.val("").select2(this.toCityData()),this.$sDom.val("").select2(this.toStreetData())}}),function(t,e,n,o,i){return new r(t,e,n,o,i)}}),angular.module("admin.component").factory("uiSearchFormFactory",function(t,e){var n=new t("SearchForm"),r=function(t,n,r,o){this.elementContainer=n.find(".row > div:eq(0)"),this.tableId=o,e.apply(this,arguments)};return r.prototype=$.extend(new e,{_init:function(){$(document).keydown(function(t){13==t.keyCode&&this.search()}.bind(this)),this.element.submit(function(t){return t.preventDefault(),!1})},addFormItem:function(t){this.elementContainer.append(t)},formData:function(){return this.element.serializeArray()},formParamData:function(){return this.element.serialize()},search:function(){var t=this.formData();this.$emit("uisearchform.doSubmit",t),this.scope[this.tableId]?this.scope[this.tableId].search(t):n.error("为发现ref为["+this.tableId+"]的组件, 无法调用查询")},submit:function(t){this.$on("uisearchform.doSubmit",t)},reset:function(){this.scope.$broadcast("uisearchform.reset")}}),r}),function(){angular.module("admin.component").factory("UISelectControl",function(t){var e=function(e){"use strict";function n(t,n,r){this.className="Select",this.formEl=n.find("Select"),e.call(this,t,n,r)}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},l=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;r||a(n,e);var c={};return null!==e&&l(n,e),n.prototype=s(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),o(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){e.prototype.init.call(this),this.attrs.multiple&&this.formEl.prop("multiple","multiple"),this.defaultValue=this.scope.value||this.formEl.find("option:eq(0)").val()||"",!this.scope.model&&this.defaultValue&&(this.scope.model=this.defaultValue,this.val(this.defaultValue)),this.attrs.url&&this.load(this.attrs.url)},c.initEvents=function(){var t=this;e.prototype.initEvents.call(this),this.scope.$watch("model",function(e){void 0!==e?(t.val(e),t.scope.change()):t.val(t.defaultValue)}),this.formEl.change(function(){t.scope.model=t.formEl.val(),t.scope.$apply()})},c.render=function(){this.init?this.formEl.selectpicker("refresh"):(this.formEl.selectpicker({iconBase:"fa",tickIcon:"fa-check"}),this.init=!0)},c.val=function(t){e.prototype.val.call(this,t),t&&this.render()},c.load=function(e,n,r){var o=this;return t.get(e).then(function(t){if(o.setData(t,r),n)o.val(n);else{var e=self.val(),i=/^\?.+:(.+)\s+\?$/.exec(e);o.val(i?i[1]:e)}})},c.setData=function(t,e,n,r){var o=this;n=n||this.scope.dataKeyName,r=r||this.scope.dataValueName,e&&this.formEl.html(""),_.isArray(t)?$.each(t,function(t,e){o.formEl.append(o.toOption(e,n,r))}):$.each(t,function(t,e){var i=o.toOptionGroup(t);$.each(e,function(t,e){i.append(o.toOption(e,n,r))}),o.formEl.append(i)}),this.reset()},c.toOption=function(t,e,n){var r=_.isString(t),o=r?t:t[e],i=r?t:t[n],a=$("<option/>").attr("value",o).html(i),l=this.scope.render(a,t);return l&&a.data("content",l),a.data("item",t),a},c.toOptionGroup=function(t){var e=$("<optgroup/>").attr("label",t);return e},a(n.prototype,c),c=void 0,n}(UIFormControl);return e})}(),function(){angular.module("admin.component").factory("UISpinnerControl",function(){var t=function(t){"use strict";function e(e,n,r){this.className="Spinner",this.formEl=n.find("input"),t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this)},s.initEvents=function(){var e=this;t.prototype.initEvents.call(this),this.element.on("mousedown",".spinner-up",function(){return e._changeValue(!0)}),this.element.on("mousedown",".spinner-down",function(){return e._changeValue(!1)}),this.scope.$watch("model",function(t){var n=e._checkValue(t);n!=t&&(e.scope.model=n)})},s._changeValue=function(t){var e=1*(this.attrs.step||1),n=this.val();n=void 0!==n?parseInt(n):this.attrs.value,n+=e*(t?1:-1),n=this._checkValue(n),this.scope.model=n,this.scope.$apply(),this.scope.change({val:n})},s._checkValue=function(t){var e=1*(this.attrs.min||0),n=1*(this.attrs.max||Number.MAX_VALUE);return t>n&&(t=n),e>t&&(t=e),t},i(e.prototype,s),s=void 0,e}(UIFormControl);return t})}(),function(){angular.module("admin.component").factory("UISwitchControl",function(){var t=function(t){"use strict";function e(e,n,r){this.className="Switch",this.formEl=n.find("input"),this.checkEl=this.formEl[0],t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this),this.onValue=this.attrs.onValue||"1",this.offValue=this.attrs.offValue||"0",this.onText=this.attrs.onText||"开",this.offText=this.attrs.offText||"关"},s.initEvents=function(){t.prototype.initEvents.call(this)},s.render=function(){var t=this;if(this.formEl.bootstrapSwitch({size:"normal",onText:this.onText,offText:this.offText,onSwitchChange:function(e,n){t._change(n)}}),this.formEl.bootstrapSwitch("state",this.attrs.value==this.onValue),this.checkEl.checked=!0,this.scope.$watch("model",function(e){e!=t.val()&&t.val(e)}),!this.scope.model){var e=this.offValue;this.scope.model=e}},s.disabled=function(t){this.formEl.bootstrapSwitch("disabled","true"==t)},s.val=function(t){return void 0!==t?(this.formEl.bootstrapSwitch("state",t==this.onValue),this):this.formEl.val()},s._change=function(t){var e=t?this.onValue:this.offValue;this.val(e),this.checkEl.checked=!0,this.scope.model=e,this.scope.change({val:e})},i(e.prototype,s),s=void 0,e}(UIFormControl);return t})}(),function(){angular.module("admin.component").factory("UITagControl",function(t,e,n){var r=function(e){"use strict";function r(t,n,r){this.className="RemoteSelect",this.selectValues=[],this.selectItems=[],e.call(this,t,n,r)}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;o||l(r,e);var u={};return null!==e&&s(r,e),r.prototype=c(null!==e?e.prototype:null,{constructor:{value:r,configurable:!0,writable:!0}}),i(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){e.prototype.init.call(this)},u.initEvents=function(){var t=this;e.prototype.initEvents.call(this),this.element.on("select2-selecting",function(e){return e.object.isNew&&"false"==t.attrs.editable?!1:(t.selectValues.push(e.val),t.selectItems.push(e.object),t.scope.model=t.selectValues,t.scope.change({isAdd:!0,val:e.val,item:e.object,vals:t.selectValues,items:t.selectItems}),!0)}),this.element.on("select2-removing",function(e){t.selectValues=$.grep(t.selectValues,function(t){return t!=e.val}),t.selectItems=$.grep(t.selectItems,function(t){return t!=e.choice}),t.scope.model=t.selectValues,t.scope.change({isAdd:!1,val:e.val,item:e.object,vals:t.selectValues,items:t.selectItems})})},u.render=function(){e.prototype.render.call(this);var t=this._getConfig();this.element.find("input").select2(t)},u._getConfig=function(){var t={openOnEnter:!1,multiple:!0,createSearchChoice:$.proxy(this._createSearchChoice,this),formatResult:$.proxy(this._formatResult,this),formatSelection:$.proxy(this._formatResult,this),id:$.proxy(this._formatId,this),initSelection:$.proxy(this._initSelection,this),query:$.proxy(this._filterData,this),formatNoMatches:function(){return"没有符合的数据"},formatInputTooShort:function(t,e){return"输入"+e+"个字符后开始查询"},formatSelectionTooBig:function(t){return"最大可以选中"+t+"个数据"},formatSearching:function(){return"正在加载数据..."},formatAjaxError:function(){return"加载数据失败"}};return this.attrs.minmum&&(t.minimumInputLength=this.attrs.minmum),this.attrs.maxSize&&(t.maximumSelectionSize=this.attrs.maxSize),t.closeOnSelect=!1,t},u.useParams=function(t){return $.extend(this.params,t||{})},u.loadData=function(){var e=this,r=t.defer();return this.datas?r.resolve(this.datas):n.get(this.attrs.url,this.useParams()).then(function(t){e.datas=t?t.aaData||t:[],$.each(e.datas,function(t,e){var n=[];for(var r in e)n.push(r+"="+(e[r]||"").toString().toLowerCase());e.__string=n.join(",")}),r.resolve(e.datas)}),r.promise},u._createSearchChoice=function(t,e){return 0===$(e).filter(function(){return 0===this.name.indexOf(t)}).length?e.length<=10?{id:t,name:t,isNew:!0}:null:void 0},u._filterData=function(t){var e=this,n=(this.attrs.search||"").toLowerCase().split(","),r=t.term.toLowerCase();this.loadData().then(function(o){var i=[];$.each(o,function(o,a){var l=!1;t.init?l=e.attrs.multi?-1!=t.term.indexOf(e.formatId(a)):e.formatId(a)==t.term:0===n.length||""===n[0]?l=-1!=a.__string.indexOf(r):$.each(n,function(t,e){l=-1!=(a[e]||"").toString().toLowerCase().indexOf(r)}),l&&i.push(a)}),t.callback({results:i})})},u._initSelection=function(t,e){var n=this,r=function(t){e(void 0!==n.attrs.multi?t.results:t.results[0])};n.isFocusInit?(n.isFocusInit=!1,n.isInit=!1,r({results:n.selectItems})):void 0!==t.val()?(n.isInit=!1,this.filterData({term:t.val(),init:!0,callback:r})):n.isInit&&(n.isInit=!1,r({results:[]}))},u._formatId=function(t){return t[this.attrs.valueName||"id"]},u._formatResult=function(t,e,n){return t[this.attrs.labelName||"name"]},u.reset=function(){this.selectItems=[],this.selectValues=[],this.inputElement.select2("val","")},u.val=function(t){if(!t)return this.attrs.multi?this.selectValues:this.selectValues[0];this.inputElement.select2("val",t),this.selectValues=this.attrs.multi?t:[t];var e=","+this.selectValues.join(",")+",",n=this;this.loadData().then(function(t){n.selectItems=$.grep(t,function(t){return-1!=e.indexOf(","+n.formatId(t)+",")})})},u.item=function(){return this.attrs.multi?this.selectItems:this.selectItems[0]},l(r.prototype,u),u=void 0,r}(UIFormControl);return r})}(),function(){angular.module("admin.component").provider("UIUploadControl",function(){var t,e,n,r={setDomain:function(e){t=e},setTokenUrl:function(t){e=t},setMaxSize:function(t){n=t},$get:function(){var r=function(r){function o(t,e,n){this.className="Upload",r.call(this,t,e,n)}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,l(e,n));return t},c=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;i||s(o,r);var p={};return null!==r&&c(o,r),o.prototype=u(null!==r?r.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),a(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.init=function(){r.prototype.init.call(this),this.$updateButton=this.element.find("button:eq(0)"),this.$removeButton=this.element.find("button:eq(1)"),this.$container=this.element.find(".ui-form-upload"),this.uploadButtonId="uiFormUploadButton"+(new Date).getTime(),this.uploadContrainerId="uiFormUploadContainer"+(new Date).getTime(),this.$updateButton.attr("id",this.uploadButtonId),this.$container.attr("id",this.$container)},p.render=function(){r.prototype.render.call(this),Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:this.uploadButtonId,uptoken_url:e,domain:t,unique_names:!0,container:this.uploadContrainerId,max_file_size:n,flash_swf_url:"/assets/js/plupload/js/Moxie.swf",max_retries:3,dragdrop:!0,drop_element:this.uploadContrainerId,chunk_size:"1mb",auto_start:!0,init:{FilesAdded:function(t,e){plupload.each(e,function(t){})},BeforeUpload:function(t,e){},UploadProgress:function(t,e){},FileUploaded:function(e,n,r){r=JSON.parse(r),r.name=n.name,r.url=t+"/"+r.key,cb&&cb(r)},Error:function(t,e,n){},UploadComplete:function(){},Key:function(t,e){var n="";return n}}})},s(o.prototype,p),p=void 0,o}(UIFormControl);return r}};return r})}(),angular.module("admin.component").directive("uiTableCheckColumn",function(t){var e=function(t){"use strict";function e(e,n,r){this.className="CheckColumn",t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this),this.$table=this.element.parents("table"),this.$tableBody=this.$table.find("tbody")},s.initEvents=function(){var e=this;t.prototype.initEvents.call(this),this.scope.$emit("uitable.column.idname",this.attrs.name),this.scope.selectAllHandler=function(t){e._selectAllHandler(t)}},s.render=function(t){var e=this,n=this.getValue(t);return $('<input type="checkbox" value="'+n+'"/>').data("rowData",t).click(function(t){e._selectOneHandler(t)})},s._selectAllHandler=function(t){var e=t.target.checked;this.$tableBody.find("input[type=checkbox]").prop("checked",e).uniform(),this.scope.$emit("uitable.column.selectall",e)},s._selectOneHandler=function(t){var e=$(t.target);this.scope.$emit("uitable.column.selectone",{isCheck:t.target.checked,rowData:e.data("rowData"),value:e.val()})},i(e.prototype,s),s=void 0,e}(t);return{restrict:"E",replace:!0,scope:{head:"@"},controller:function(t,n,r){return new e(t,n,r)},template:'\n                <th>\n                    <input type="checkbox" ng-click="selectAllHandler($event)"/>\n                </th>\n            '}}),angular.module("admin.component").directive("uiTableDateColumn",function(t,e){var n=function(t){"use strict";function n(e,n,r){this.className="DateColumn",t.call(this,e,n,r)}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},l=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;r||a(n,t);var c={};return null!==t&&l(n,t),n.prototype=s(null!==t?t.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),o(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){t.prototype.init.call(this),this.format=this.attrs.format||"yyyy-MM-dd HH:mm:ss"},c.render=function(t){var n=this.getValue(t);return n&&(n=e.dateFormatStr(n,this.format)),$("<div/>").html(n)},a(n.prototype,c),c=void 0,n}(t);return{restrict:"E",replace:!0,scope:{head:"@"},controller:function(t,e,r){return new n(t,e,r)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiTableImageColumn",function(t){var e=function(t){"use strict";function e(e,n,r){t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this)},s.render=function(t){var e=this.getValue(t),n=this.attrs.placeholder,r=this.attrs.qiniu;return void 0===e&&(e=n),void 0!==e&&r&&(e+=r),$("<img/>").attr("src",e).addClass(this.scope.imageCss)},i(e.prototype,s),s=void 0,e}(t);return{restrict:"E",replace:!0,scope:{head:"@",imageCss:"@"},controller:function(t,n,r){return new e(t,n,r)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiTableColumn",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@"},controller:function(e,n,r,o){return new t(e,n,r,o)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiTableOperationColumn",function(t){var e=function(t){"use strict";function e(e,n,r){this.className="OperationColumn",t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this)},i(e.prototype,s),s=void 0,e}(t);return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@"},controller:function(t,n,r,o){return new e(t,n,r,o)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiTableProgressColumn",function(t){var e=function(t){"use strict";function e(e,n,r){this.className="ProgressColumn",t.call(this,e,n,r)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this)},s.render=function(t){var e,n=this.getValue(t),r=this._getDom();return n=void 0!==n?n:0,25>=n?e="progress-bar-danger":50>=n?e="progress-bar-danger":75>=n&&(e="progress-bar-info"),r.attr("title",n+"%").find("div").addClass(e).animate({width:n+"%"}).end(),r},s._getDom=function(){return $('\n                    <div style="border: 1px solid #57b5e3;" class="progress progress-striped active" role="progressbar"style="margin-bottom:0px;">\n                        <div class="progress-bar"></div>\n                    </div>\n                ')},i(e.prototype,s),s=void 0,e}(t);return{restrict:"E",replace:!0,scope:{head:"@"},controller:function(t,n,r){return new e(t,n,r)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").filter("emptyFilter",function(){return function(t,e){return t||e||"-"}}).factory("UITableColumnControl",function(t){var e=function(e){"use strict";function n(t,n,r,o){e.call(this),this.scope=t,this.element=n,this.attrs=r,this.transclude=o,this.hasTransclude=o&&o().length>0,this.className=this.className||"Column",this.init(),this.initEvents()}var r=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},l=Object.setPrototypeOf||function(t,e){return r?t.__proto__=e:o(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},s=Object.create;r||a(n,e);var c={};return null!==e&&l(n,e),n.prototype=s(null!==e?e.prototype:null,{constructor:{value:n,configurable:!0,writable:!0}}),o(n,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.init=function(){var e=this;this.message=new t("UITable"+this.className),this.sName=this.attrs.name||"",this.mTitle=this.attrs.head,this.bEditable=this.attrs.editable,this.bChecked=this.attrs.checked,this.mEditUrl=this.attrs.editUrl,this.mAttrs=this.attrs,this.sClass=this.attrs.css||"",this.sWidth=this.attrs.width||"smart",this.bVisible=void 0===this.attrs.novisible,this.bSortable=void 0!==this.attrs.sort,this.mDataProp=function(t,n){if("display"!=n)return"";if(3==arguments.length)return arguments[2];var r=e.render(t,n),o=e.wrapperDisplay(r);return o},this.scope.$emit("uitable.column.complete",this)},c.initEvents=function(){},c.render=function(t){if(this.hasTransclude){var e=null;return this.transclude(this.scope.$new(),function(n,r){r.data=t,e=n}),e}var n="render"+name.charAt(0).toUpperCase()+name.substr(1);return this.scope[n]?this.scope[n](t):this.getValue(t)},c.getValue=function(t){var e,n=this.sName;if(n&&-1!=n.indexOf(".")){var r,o=n.split(".");for(e=t;(r=o.shift())&&e;)e=e[r]}else n&&(e=t[n]);return e},c.wrapperDisplay=function(t){return t=void 0!==t?t:"-",void 0!==t&&angular.isString(t)&&(t=$.trim(t),t=t.length?t:"-",t="<div>"+t+"</div>"),t},a(n.prototype,c),c=void 0,n}(ComponentEvent);return e}),angular.module("admin.component").directive("uiTableStateColumn",function(t){var e=function(t){"use strict";function e(e,n,r,o){this.className="StateColumn",t.call(this,e,n,r,o)}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){t.prototype.init.call(this)},s.render=function(t){var e,n=this.getValue(t),r=this.attrs["default"],o=this.scope.$new();return o.data=t,this.transclude(o,function(t){e=t.filter('[state="'+n+'"]'),0===e.length&&(e=t.filter('[state="'+r+'"]')),0===e.length&&t.forEach(function(t){t.innerHTML&&-1!=t.innerHTML.indexOf(r)&&(e=$(t))})}),e},i(e.prototype,s),s=void 0,e}(t);return{restrict:"E",replace:!0,transclude:!0,scope:{head:"@"},controller:function(t,n,r,o){return new e(t,n,r,o)},template:"\n                <th>\n                    {{head}}\n                </th>'\n            "}}),angular.module("admin.component").directive("uiFormEditor",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <script name="{{name}}" type="text/plain"></script>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormDate",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change({val: model})" ng-model="model" readonly="true"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormDateRange",function(t){return{restrict:"E",replace:!0,link:function(e,n,r){new t(e,n,r)},scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",fromModel:"=",toModel:"=",change:"&",help:"@"},template:'\n               <div class="form-group">\n                   <label class="col-md-{{lcol}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol}}">\n                       <div class="input-date-range input-inline">\n                           <div class="input-group">\n                               <input type="text" class="form-control" name="{{fromName}}" ng-model="fromModel" value="{{fromValue}}" readonly>\n                               <span class="input-group-addon">至</span>\n                               <input type="text" class="form-control" name="{{toName}}" ng-model="toModel" value="{{toValue}}" readonly>\n                           </div>\n                       </div>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormInput",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@",type:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="{{type || \'text\'}}" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-change="change({val: model})" ng-model="model"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormTextarea",function(t,e){return{restrict:"E",replace:!0,transclude:!0,link:function(t,e,n,r,o){var i=e.find("textarea");t.$on("uiform.reset",function(){i.val("")}),i.html(o().text()),e.removeAttr("name").removeAttr("model").removeAttr("rows").removeAttr("cols")},template:function(n,r){var o=(r.col||e).split(":");return t.getTemplate("tpl.form.textarea",$.extend({leftCol:o[0],rightCol:o[1]},r))}}}),angular.module("admin.component").directive("uiFormRegion",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@",type:"@",mode:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}} ui-form-region">\n                        <input type="hidden" name="{{name}}"/>\n                        <input type="text" class="input-small form-control input-inline" name="province"/>\n                        <input type="text" class="input-small form-control input-inline" name="city"/>\n                        <input type="text" class="input-small form-control input-inline" name="area"/>\n                        <input type="text" class="input-medium form-control input-inline" name="address" ng-value="{{aValue}}" placeholder="请输入详细地址" />\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiFormSelect",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{lcol:"@",rcol:"@",label:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@",multiple:"@",render:"&"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                    <label class="col-md-{{lcol}} control-label">{{label}}</label>\n                    <div class="col-md-{{rcol}}">\n                        <select class="form-control show-tick" data-live-search="true" data-style="{{buttonClass}}" name="{{name}}" title="{{placeholder || \'请选择\'}}" ng-transclude></select>\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiFormTag",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",name:"@",model:"=",placeholder:"@",change:"&",help:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <input type="text" class="form-control" name="{{name}}"/>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormSpinner",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                       <div class="input-group" style="width:150px;">\n                           <div class="spinner-buttons input-group-btn">\n                               <button type="button" class="btn spinner-up blue"><i class="fa fa-plus"></i></button>\n                           </div>\n                           <input type="text" class="form-control {{css}}" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" readonly="true"/>\n                           <div class="spinner-buttons input-group-btn">\n                               <button type="button" class="btn spinner-down red"><i class="fa fa-minus"></i></button>\n                           </div>\n                       </div>\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                    </div>\n               </div>\n            '
}}),angular.module("admin.component").directive("uiFormSwitch",function(t){return{restrict:"E",scope:{lcol:"@",rcol:"@",label:"@",css:"@",placeholder:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n               <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}}">\n                        <input type="checkbox" class="form-control {{css}}" name="{{name}}" />\n                        <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\n            '}}),angular.module("admin.component").directive("uiFormUpload",function(t){return{restrict:"E",replace:!0,scope:{lcol:"@",rcol:"@",label:"@",css:"@",name:"@",model:"=",change:"&",help:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="form-group">\n                   <label class="col-md-{{lcol || DefaultCol.l}} control-label">{{label}}</label>\n                   <div class="col-md-{{rcol || DefaultCol.r}} ui-form-upload">\n                       <div>\n                           <img class="{{css}}"/>\n                       </div>\n                       <div class="btn-group">\n                           <button type="button" class="btn blue start">\n                               <i class="fa fa-upload"></i>\n                               <span>选择文件</span>\n                           </button>\n                           <button type="button" class="btn red start">\n                               <i class="fa fa-upload"></i>\n                               <span>删除文件</span>\n                           </button>\n                       </div>\n                       <span ng-if="help" class="help-block">{{help}}</span>\n                   </div>\n               </div>\'\n            '}}),angular.module("admin.component").directive("uiSearchDate",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                 <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change({val: model})" readonly="true"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchDateRange",function(t){return{restrict:"E",replace:!0,link:function(e,n,r){new t(e,n,r)},scope:{css:"@",name:"@",fromModel:"=",toModel:"=",change:"&",label:"@"},template:'\n                 <div class="input-inline search-item input-mlarge {{css}}">\n                    <div class="input-group">\n                        <input type="text" readonly class="form-control" name="{{fromName}}" ng-model="fromModel"/>\n                        <span class="input-group-addon">{{label || \'到\'}}</span>\n                        <input type="text" readonly class="form-control" name="{{toName}}" ng-model="toModel"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchInput",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",css:"@",placeholder:"@"},link:function(e,n,r){new t(e,n,r)},template:'\n                 <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" placeholder="{{placeholder}}" ng-model="model" ng-change="change({val: model})"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchInputSelect",function(t,e,n,r){var o=new r("SearchInputSelect");return{restrict:"E",replace:!0,transclude:!0,link:function(r,i,a){var l=a.selectName&&a.inputName,s=new e(r,i,a),c=new t(r,i,a);n.tiggerComplete(r,a.ref||"$searchInputSelect",{select:c,input:s}),l||(a.selectName||a.inputName?o.error("必须同时设置select-name和input-name, 要么不设置, 要么全设置"):(c.change(function(){s.attr("name",c.val())}),s.attr("name",c.val()))),r.$on("uisearchform.reset",function(){c.reset(),s.reset()})},template:function(t,e){return n.getTemplate("tpl.searchform.input.select",e)}}}),angular.module("admin.component").directive("uiSearchRegion",function(t){return{restrict:"E",replace:!0,scope:{model:"=",change:"&",label:"@",name:"@",mode:"@"},link:function(e,n,r){(void 0===r.mode||"a"==r.mode)&&(r.mode="s"),new t(e,n,r)},template:'\n                <div class="input-inline search-item">\n                    <div class="input-group ui-search-region">\n                        <div ng-if="label" class="input-group-addon">{{label}}:</div>\n                        <input type="hidden" name="{{name}}"/>\n                        <input type="text" class="input-small form-control input-inline" name="province"/>\n                        <input type="text" class="input-small form-control input-inline" style="left:-1px" name="city"/>\n                        <input type="text" class="input-small form-control input-inline" style="left:-2px" name="area"/>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchSelect",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{label:"@",placeholder:"@",name:"@",css:"@",model:"=",change:"&",multiple:"@",render:"&"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="input-inline search-item">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <select class="form-control show-tick" data-live-search="true" data-style="{{buttonClass}}" name="{{name}}" title="{{placeholder}}" ng-transclude></select>\n                    </div>\n                </div>\n            '}}),angular.module("admin.component").directive("uiSearchTag",function(t){return{restrict:"E",replace:!0,scope:{label:"@",name:"@",model:"=",placeholder:"@",change:"&"},link:function(e,n,r){new t(e,n,r)},template:'\n                <div class="input-large">\n                    <div class="input-group">\n                        <div ng-if="label" class="input-group-addon">{{label}}</div>\n                        <input class="form-control" name="{{name}}" />\n                    </div>\n                </div>\n            '}}),function(){var t=function(t){"use strict";function e(t,e,n){this.scope=t,this.element=e,this.attrs=n,this.message=new Message("uiStateButton")}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,o(e,n));return t},a=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||i(e,t);var s={};return null!==t&&a(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.init=function(){var t=this;this.scope.clickHandler||this.message.error("必须设置on-click属性"),this.element.click(function(){t.disable(!0);var e=t.scope.clickHandler();t.wait(e)})},s.wait=function(t){var e=this;t&&t["finally"]?t["finally"](function(){return e.disable(!1)}):this.disable(!1)},s.disable=function(t){this.scope.target&&Metronic[""+(t?"":"un")+"blockUI"](this.scope.target),this.element.prop("disabled",t)},i(e.prototype,s),s=void 0,e}(Event);angular.module("admin.component").directive("uiStateButton",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{target:"@target",clickFnName:"@onClick"},link:function(e,n,r){var o=new t(e,n,r);o.init()},template:'\n                    <button type="button" class="btn" ng-transclude ng-click="clickHandler()"></button>\n                '}})}(),function(){angular.module("admin.component").directive("uiBreadcrumb",function(t,e){var n=function(n){"use strict";function r(t){this.scope=t,this.message=new Message("uiBreadcrumb")}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},s=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},c=Object.create;o||l(r,n);var u={};return null!==n&&s(r,n),r.prototype=c(null!==n?n.prototype:null,{constructor:{value:r,configurable:!0,writable:!0}}),i(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.init=function(){var n=this;this.scope.datas?this.handler(t.toJSON(this.scope.datas)):this.scope.url?e.post(this.scope.url).then(function(t){return n.handler(t)}):this.message.error("至少设置datas或者url来配置面包屑")},u.handler=function(t){this.scope.items=(t||[]).map(function(t){return{name:t.name?t.name:t,url:t.url?t.url:""}})},l(r.prototype,u),u=void 0,r}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{datas:"@",url:"@"},link:function(t){new n(t).init()},template:'\n                    <div class="page-bar">\n                        <ul class="page-breadcrumb">\n                            <li ng-repeat="item in items">\n                                <a ng-href="item.url" ng-bind="item.name"></a>\n                                <i ng-if="!$last" class="fa fa-angle-right"></i>\n                            </li>\n                        </ul>\n                    </div>\n                '}})}(),function(){angular.module("admin.component").directive("uiContainer",function(t,e,n){var r=function(r){"use strict";function o(t,e,n){this.scope=t,this.element=e,this.scope.$on("componentComplete",this.initHandler.bind(this)),this.content=n(t)}var i=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&a(t,n,l(e,n));return t},c=Object.setPrototypeOf||function(t,e){return i?t.__proto__=e:a(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},u=Object.create;i||s(o,r);var p={};return null!==r&&c(o,r),o.prototype=u(null!==r?r.prototype:null,{constructor:{value:o,configurable:!0,writable:!0}}),a(o,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.init=function(){this.element.show().append(this.content),this.lazyInit()},p.lazyInit=function(){var r=this,o=this.scope.controller;t(function(){if(o&&window[o]){var t=/\(([^\)]+)\)/.exec(window[o].toString())[1],i={$scope:r.scope};t=t.split(",");for(var a,l=1;l<t.length;l++)a=$.trim(t[l]),i[a]=n.get(a);e(window[o],i)}else o&&e(o,{$scope:r.scope});r.scope.$emit("uicontainer.ready")})},p.initHandler=function(t,e){e&&(this.scope[e.ref]?(this.scope[e.ref]=[].concat(this.scope[e.ref]),this.scope[e.ref].push(e.component)):this.scope[e.ref]=e.component)},s(o.prototype,p),p=void 0,o}(Event);return{restrict:"E",replace:!0,transclude:!0,scope:{controller:"@"},link:function(t,e,n,o,i){new r(t,e,i).init()},template:"\n                    <div></div>\n                "}})}(),function(){var t={bDestroy:!0,sDom:"<'table-scrollable't><'row ui-table-footer'<'col-md-3 col-sm-12'li>r<'col-md-7 col-sm-12'p>>",bLengthChange:!0,bFilter:!1,bSort:!0,bAutoWidth:!1,bStateSave:!0,oLanguage:{sProcessing:'<img src="http://7xi8np.com1.z0.glb.clouddn.com/assets/img/loading-spinner-grey.gif"/><span>&nbsp;&nbsp;正在查询.. .</span>',sLengthMenu:"每页显示 _MENU_ 条",sZeroRecords:"请选择条件后，点击搜索按钮开始搜索",sInfo:"<label>当前第 _START_ - _END_ 条　共计 _TOTAL_ 条</label>",sInfoEmpty:"没有符合条件的记录",sInfoFiltered:"(从 _MAX_ 条记录中过滤)",sSearch:"查询",oPaginate:{sFirst:"首页",sPrevious:"上一页",sNext:"下一页",sLast:"尾页"}},sPaginationType:"bootstrap_full_number",aLengthMenu:[[10,20,30,60],[10,20,30,60]],bProcessing:!0,bServerSide:!0},e='\n            <div class="col-md-2">\n                <div class="input-group">\n                    <input type="text" class="form-control" placeholder="跳转页数">\n                    <span class="input-group-btn">\n                        <a href="javascript:;" class="btn green" style="font-size: 12px;">Go</a>\n                    </span>\n                </div>\n            </div>\n        ',n="aaData",r="iTotalRecords",o="post";angular.module("admin.component").provider("UITableControl",function(){return{setConfig:function(e){t=$.extend(!0,t,e)},setResultName:function(t,e){n=t,r=e},setRequestMethod:function(t){o=t},$get:function(i,a,l){var s=function(s){"use strict";function c(t,e,n){s.call(this),this.element=e,this.scope=t,this.attrs=n,this.message=new a("UITable")}var u=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,f=function(t,e){for(var n in e)e.hasOwnProperty(n)&&p(t,n,m(e,n));return t},d=Object.setPrototypeOf||function(t,e){return u?t.__proto__=e:p(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},h=Object.create;u||f(c,s);var v={};return null!==s&&d(c,s),c.prototype=h(null!==s?s.prototype:null,{constructor:{value:c,configurable:!0,writable:!0}}),p(c,"prototype",{configurable:!1,enumerable:!1,writable:!1}),v.init=function(){var t=this;this.aoColumns=[],this.bPaginate=void 0===this.attrs.nopage,this.bInfo=this.bPaginate,this.aaSorting=l.toJSON(this.attrs.sort||"[]"),this.fnInitComplete=function(){t._buildJumpDom()},this.fnServerData=function(e,n,r){t._fetchData(e,n,r)},this.idName=this.attrs.idName,this.pageResult={},this.pageResultData=[],this.selectValues=[],this.selectItems=[],this.instance=null,this.searchParams=null,this.pageSelectNum=[],this.triggerComplete(this.scope,this.attrs.ref||"$table",this)},v.initEvents=function(){var t=this;this.scope.$on("uitable.column.complete",function(e,n){t.aoColumns.push(n)}),this.scope.$on("uitable.column.idname",function(e,n){t.idName=n}),this.scope.$on("uitable.column.selectall",function(e,n){n?(t.selectItems=t.pageResultData,t.selectValues=t.selectItems.map(function(e){return e[t.idName]})):(t.selectItems=[],t.selectValues=[]),console.log(t.selectItems,t.selectValues)}),this.scope.$on("uitable.column.selectone",function(e,n){if(n.isCheck)t.selectItems.push(n.rowData),t.selectValues.push(n.value);else{var r=_.indexOf(t.selectItems,n.rowData);r>=0&&(t.selectItems.splice(r,1),t.selectValues.splice(r,1))}console.log(t.selectItems,t.selectValues)})},v.build=function(){this.instance=this.element.find("table").dataTable($.extend({},t,this))},v.jumpTo=function(t){},v.refresh=function(){},v._fetchData=function(t,e,a){var l=this;if(!this.attrs.url&&!this.url||void 0!=this.attrs.manual)delete this.attrs.manual,a({aaData:[],iTotalRecords:0,iTotalDisplayRecords:0});else{var s=this.url||this.attrs.url;$.each(this.searchParams||{},function(t,n){e.push({name:t,value:n})}),i[o](s,e).then(function(t){var e={};e=$.isArray(t)?{aaData:t,iTotalDisplayRecords:t.length,iTotalRecords:t.length}:{aaData:t[n],iTotalDisplayRecords:e[r],iTotalRecords:e[r]},l._beforeDataHandler(e),a(e),l._afterDataHandler(e)})["catch"](function(t){l._errorDataHandler(t)})["finally"](function(){})}},v._beforeDataHandler=function(t){this.pageResult=t,this.pageResultData=t.aaData,this.bPaginate&&(this.selectItems=[],this.selectValues=[]),this.scope.dataSuccess({result:t})},v._afterDataHandler=function(t){this.element.find("input[type=checkbox]").uniform()},v._errorDataHandler=function(t){this.scope.dateFail({result:t})},v._buildJumpDom=function(){var t=this;if(this.bPaginate){var n=this.element.find(".ui-table-footer"),r=$(e),o=r.find("a"),i=r.find("input");n.append(r),o.click(function(){t.jumpTo(i.val())}),$(document).keydown(function(e){13==e.keyCode&&t.refresh()})}},f(c.prototype,v),v=void 0,c}(ComponentEvent);return s}}})}(),angular.module("admin.component").directive("uiTable",function(t){return{restrict:"E",replace:!0,transclude:!0,scope:{change:"&",jumpTo:"&",dataSuccess:"&",dateFail:"&"},compile:function(){var e=null;return{pre:function(n,r,o){e=new t(n,r,o),e.init(),e.initEvents()},post:function(){e.build()}}},template:'\n                <div class="ui-table">\n                    <table class="table table-striped table-bordered table-hover">\n                        <thead>\n                            <tr role="row" class="heading" ng-transclude>\n                            </tr>\n                        </thead>\n                        <tbody></tbody>\n                    </table>\n                </div>\'\n            '}}),function(){angular.module("admin",["admin.service","admin.filter","admin.component"]).config(function(t,e,n,r){var o="http://localhost:63342/AngularAdmin/output/assets/js/";t.setSuccessHandler(function(t){return 1==t.type?t.data:null}),t.setFailHandler(function(t){return 1!=t.type?t.data:null}),e.setPosition("bottom","right"),n.setUrl(""+o+"/ueditor/ueditor.config.js",""+o+"/ueditor/ueditor.all.js"),r.setDomain("七牛域名"),r.setTokenUrl("七牛每次上传会调用这个URL, 返回算好的token, 然后才能上传"),r.setMaxSize("1mb")})}();